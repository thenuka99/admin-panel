{"version":3,"file":"react-charts.production.min.js","sources":["../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelperLoose.js","../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../node_modules/@babel/runtime/helpers/esm/extends.js","../node_modules/d3-array/src/ascending.js","../node_modules/d3-array/src/bisector.js","../node_modules/d3-array/src/bisect.js","../node_modules/d3-array/src/extent.js","../node_modules/d3-array/src/number.js","../node_modules/internmap/src/index.js","../node_modules/d3-array/src/identity.js","../node_modules/d3-array/src/group.js","../node_modules/d3-array/src/sort.js","../node_modules/d3-array/src/permute.js","../node_modules/d3-array/src/ticks.js","../node_modules/d3-array/src/max.js","../node_modules/d3-array/src/min.js","../node_modules/d3-array/src/quickselect.js","../node_modules/d3-array/src/quantile.js","../node_modules/d3-array/src/range.js","../node_modules/d3-array/src/sum.js","../src/hooks/useGetLatest.ts","../src/hooks/useIsomorphicLayoutEffect.ts","../src/utils/Utils.ts","../src/utils/chartContext.tsx","../src/seriesTypes/Bar.tsx","../node_modules/d3-path/src/path.js","../node_modules/d3-shape/src/constant.js","../node_modules/d3-shape/src/array.js","../node_modules/d3-shape/src/curve/linear.js","../node_modules/d3-shape/src/point.js","../node_modules/d3-shape/src/line.js","../node_modules/d3-shape/src/offset/none.js","../node_modules/d3-shape/src/order/none.js","../node_modules/d3-shape/src/stack.js","../src/utils/curveMonotone.ts","../src/seriesTypes/Line.tsx","../node_modules/d3-shape/src/area.js","../node_modules/d3-scale/src/init.js","../node_modules/d3-scale/src/ordinal.js","../node_modules/d3-scale/src/band.js","../node_modules/d3-color/src/define.js","../node_modules/d3-color/src/color.js","../node_modules/d3-interpolate/src/constant.js","../node_modules/d3-interpolate/src/color.js","../node_modules/d3-interpolate/src/rgb.js","../node_modules/d3-interpolate/src/numberArray.js","../node_modules/d3-interpolate/src/array.js","../node_modules/d3-interpolate/src/date.js","../node_modules/d3-interpolate/src/number.js","../node_modules/d3-interpolate/src/object.js","../node_modules/d3-interpolate/src/string.js","../node_modules/d3-interpolate/src/value.js","../node_modules/d3-interpolate/src/round.js","../node_modules/d3-scale/src/number.js","../node_modules/d3-scale/src/continuous.js","../node_modules/d3-scale/src/constant.js","../node_modules/d3-format/src/formatDecimal.js","../node_modules/d3-format/src/exponent.js","../node_modules/d3-format/src/formatSpecifier.js","../node_modules/d3-format/src/formatPrefixAuto.js","../node_modules/d3-format/src/formatRounded.js","../node_modules/d3-format/src/formatTypes.js","../node_modules/d3-format/src/identity.js","../node_modules/d3-format/src/locale.js","../node_modules/d3-format/src/defaultLocale.js","../node_modules/d3-format/src/formatGroup.js","../node_modules/d3-format/src/formatNumerals.js","../node_modules/d3-format/src/formatTrim.js","../node_modules/d3-scale/src/tickFormat.js","../node_modules/d3-format/src/precisionPrefix.js","../node_modules/d3-format/src/precisionRound.js","../node_modules/d3-format/src/precisionFixed.js","../node_modules/d3-scale/src/linear.js","../node_modules/d3-scale/src/nice.js","../node_modules/d3-scale/src/log.js","../node_modules/d3-time/src/interval.js","../node_modules/d3-time/src/millisecond.js","../node_modules/d3-time/src/duration.js","../node_modules/d3-time/src/second.js","../node_modules/d3-time/src/minute.js","../node_modules/d3-time/src/hour.js","../node_modules/d3-time/src/day.js","../node_modules/d3-time/src/week.js","../node_modules/d3-time/src/month.js","../node_modules/d3-time/src/year.js","../node_modules/d3-time/src/utcMinute.js","../node_modules/d3-time/src/utcHour.js","../node_modules/d3-time/src/utcDay.js","../node_modules/d3-time/src/utcWeek.js","../node_modules/d3-time/src/utcMonth.js","../node_modules/d3-time/src/utcYear.js","../node_modules/d3-time/src/ticks.js","../node_modules/d3-time-format/src/locale.js","../node_modules/d3-time-format/src/defaultLocale.js","../node_modules/d3-scale/src/time.js","../node_modules/d3-scale/src/utcTime.js","../src/utils/buildAxis.linear.ts","../node_modules/d3-array/src/median.js","../src/components/AxisLinear.useMeasure.ts","../src/components/AxisLinear.tsx","../src/hooks/usePrevious.ts","../src/hooks/useLatestWhen.ts","../src/hooks/usePortalElement.ts","../node_modules/@reach/observe-rect/dist/observe-rect.esm.js","../src/hooks/useRect.ts","../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../node_modules/@babel/runtime/helpers/esm/construct.js","../src/utils/spring.ts","../src/hooks/useSpring.ts","../src/components/Cursors.tsx","../src/hooks/useAnchor.tsx","../src/components/TooltipRenderer.tsx","../src/components/Tooltip.tsx","../node_modules/delaunator/index.js","../node_modules/d3-delaunay/src/path.js","../node_modules/d3-delaunay/src/polygon.js","../node_modules/d3-delaunay/src/voronoi.js","../node_modules/d3-delaunay/src/delaunay.js","../src/components/Voronoi.tsx","../src/components/Chart.tsx"],"sourcesContent":["export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nexport default function _createForOfIteratorHelperLoose(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (it) return (it = it.call(o)).next.bind(it);\n\n  if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n    if (it) o = it;\n    var i = 0;\n    return function () {\n      if (i >= o.length) return {\n        done: true\n      };\n      return {\n        done: false,\n        value: o[i++]\n      };\n    };\n  }\n\n  throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending.js\";\n\nexport default function(f) {\n  let delta = f;\n  let compare = f;\n\n  if (f.length === 1) {\n    delta = (d, x) => f(d) - x;\n    compare = ascendingComparator(f);\n  }\n\n  function left(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    while (lo < hi) {\n      const mid = (lo + hi) >>> 1;\n      if (compare(a[mid], x) < 0) lo = mid + 1;\n      else hi = mid;\n    }\n    return lo;\n  }\n\n  function right(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    while (lo < hi) {\n      const mid = (lo + hi) >>> 1;\n      if (compare(a[mid], x) > 0) hi = mid;\n      else lo = mid + 1;\n    }\n    return lo;\n  }\n\n  function center(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    const i = left(a, x, lo, hi - 1);\n    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {left, center, right};\n}\n\nfunction ascendingComparator(f) {\n  return (d, x) => ascending(f(d), x);\n}\n","import ascending from \"./ascending.js\";\nimport bisector from \"./bisector.js\";\nimport number from \"./number.js\";\n\nconst ascendingBisect = bisector(ascending);\nexport const bisectRight = ascendingBisect.right;\nexport const bisectLeft = ascendingBisect.left;\nexport const bisectCenter = bisector(number).center;\nexport default bisectRight;\n","export default function(values, valueof) {\n  let min;\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null) {\n        if (min === undefined) {\n          if (value >= value) min = max = value;\n        } else {\n          if (min > value) min = value;\n          if (max < value) max = value;\n        }\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null) {\n        if (min === undefined) {\n          if (value >= value) min = max = value;\n        } else {\n          if (min > value) min = value;\n          if (max < value) max = value;\n        }\n      }\n    }\n  }\n  return [min, max];\n}\n","export default function(x) {\n  return x === null ? NaN : +x;\n}\n\nexport function* numbers(values, valueof) {\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  }\n}\n","export class InternMap extends Map {\n  constructor(entries, key = keyof) {\n    super();\n    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});\n    if (entries != null) for (const [key, value] of entries) this.set(key, value);\n  }\n  get(key) {\n    return super.get(intern_get(this, key));\n  }\n  has(key) {\n    return super.has(intern_get(this, key));\n  }\n  set(key, value) {\n    return super.set(intern_set(this, key), value);\n  }\n  delete(key) {\n    return super.delete(intern_delete(this, key));\n  }\n}\n\nexport class InternSet extends Set {\n  constructor(values, key = keyof) {\n    super();\n    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});\n    if (values != null) for (const value of values) this.add(value);\n  }\n  has(value) {\n    return super.has(intern_get(this, value));\n  }\n  add(value) {\n    return super.add(intern_set(this, value));\n  }\n  delete(value) {\n    return super.delete(intern_delete(this, value));\n  }\n}\n\nfunction intern_get({_intern, _key}, value) {\n  const key = _key(value);\n  return _intern.has(key) ? _intern.get(key) : value;\n}\n\nfunction intern_set({_intern, _key}, value) {\n  const key = _key(value);\n  if (_intern.has(key)) return _intern.get(key);\n  _intern.set(key, value);\n  return value;\n}\n\nfunction intern_delete({_intern, _key}, value) {\n  const key = _key(value);\n  if (_intern.has(key)) {\n    value = _intern.get(value);\n    _intern.delete(key);\n  }\n  return value;\n}\n\nfunction keyof(value) {\n  return value !== null && typeof value === \"object\" ? value.valueOf() : value;\n}\n","export default function(x) {\n  return x;\n}\n","import {InternMap} from \"internmap\";\nimport identity from \"./identity.js\";\n\nexport default function group(values, ...keys) {\n  return nest(values, identity, identity, keys);\n}\n\nexport function groups(values, ...keys) {\n  return nest(values, Array.from, identity, keys);\n}\n\nexport function rollup(values, reduce, ...keys) {\n  return nest(values, identity, reduce, keys);\n}\n\nexport function rollups(values, reduce, ...keys) {\n  return nest(values, Array.from, reduce, keys);\n}\n\nexport function index(values, ...keys) {\n  return nest(values, identity, unique, keys);\n}\n\nexport function indexes(values, ...keys) {\n  return nest(values, Array.from, unique, keys);\n}\n\nfunction unique(values) {\n  if (values.length !== 1) throw new Error(\"duplicate key\");\n  return values[0];\n}\n\nfunction nest(values, map, reduce, keys) {\n  return (function regroup(values, i) {\n    if (i >= keys.length) return reduce(values);\n    const groups = new InternMap();\n    const keyof = keys[i++];\n    let index = -1;\n    for (const value of values) {\n      const key = keyof(value, ++index, values);\n      const group = groups.get(key);\n      if (group) group.push(value);\n      else groups.set(key, [value]);\n    }\n    for (const [key, values] of groups) {\n      groups.set(key, regroup(values, i));\n    }\n    return map(groups);\n  })(values, 0);\n}\n","import ascending from \"./ascending.js\";\nimport permute from \"./permute.js\";\n\nexport default function sort(values, ...F) {\n  if (typeof values[Symbol.iterator] !== \"function\") throw new TypeError(\"values is not iterable\");\n  values = Array.from(values);\n  let [f = ascending] = F;\n  if (f.length === 1 || F.length > 1) {\n    const index = Uint32Array.from(values, (d, i) => i);\n    if (F.length > 1) {\n      F = F.map(f => values.map(f));\n      index.sort((i, j) => {\n        for (const f of F) {\n          const c = ascending(f[i], f[j]);\n          if (c) return c;\n        }\n      });\n    } else {\n      f = values.map(f);\n      index.sort((i, j) => ascending(f[i], f[j]));\n    }\n    return permute(values, index);\n  }\n  return values.sort(f);\n}\n","export default function(source, keys) {\n  return Array.from(keys, key => source[key]);\n}\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    let r0 = Math.round(start / step), r1 = Math.round(stop / step);\n    if (r0 * step < start) ++r0;\n    if (r1 * step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) * step;\n  } else {\n    step = -step;\n    let r0 = Math.round(start * step), r1 = Math.round(stop * step);\n    if (r0 / step < start) ++r0;\n    if (r1 / step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","export default function max(values, valueof) {\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  }\n  return max;\n}\n","export default function min(values, valueof) {\n  let min;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  }\n  return min;\n}\n","import ascending from \"./ascending.js\";\n\n// Based on https://github.com/mourner/quickselect\n// ISC license, Copyright 2018 Vladimir Agafonkin.\nexport default function quickselect(array, k, left = 0, right = array.length - 1, compare = ascending) {\n  while (right > left) {\n    if (right - left > 600) {\n      const n = right - left + 1;\n      const m = k - left + 1;\n      const z = Math.log(n);\n      const s = 0.5 * Math.exp(2 * z / 3);\n      const sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n      const newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n      const newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n      quickselect(array, k, newLeft, newRight, compare);\n    }\n\n    const t = array[k];\n    let i = left;\n    let j = right;\n\n    swap(array, left, k);\n    if (compare(array[right], t) > 0) swap(array, left, right);\n\n    while (i < j) {\n      swap(array, i, j), ++i, --j;\n      while (compare(array[i], t) < 0) ++i;\n      while (compare(array[j], t) > 0) --j;\n    }\n\n    if (compare(array[left], t) === 0) swap(array, left, j);\n    else ++j, swap(array, j, right);\n\n    if (j <= k) left = j + 1;\n    if (k <= j) right = j - 1;\n  }\n  return array;\n}\n\nfunction swap(array, i, j) {\n  const t = array[i];\n  array[i] = array[j];\n  array[j] = t;\n}\n","import max from \"./max.js\";\nimport min from \"./min.js\";\nimport quickselect from \"./quickselect.js\";\nimport number, {numbers} from \"./number.js\";\n\nexport default function quantile(values, p, valueof) {\n  values = Float64Array.from(numbers(values, valueof));\n  if (!(n = values.length)) return;\n  if ((p = +p) <= 0 || n < 2) return min(values);\n  if (p >= 1) return max(values);\n  var n,\n      i = (n - 1) * p,\n      i0 = Math.floor(i),\n      value0 = max(quickselect(values, i0).subarray(0, i0 + 1)),\n      value1 = min(values.subarray(i0 + 1));\n  return value0 + (value1 - value0) * (i - i0);\n}\n\nexport function quantileSorted(values, p, valueof = number) {\n  if (!(n = values.length)) return;\n  if ((p = +p) <= 0 || n < 2) return +valueof(values[0], 0, values);\n  if (p >= 1) return +valueof(values[n - 1], n - 1, values);\n  var n,\n      i = (n - 1) * p,\n      i0 = Math.floor(i),\n      value0 = +valueof(values[i0], i0, values),\n      value1 = +valueof(values[i0 + 1], i0 + 1, values);\n  return value0 + (value1 - value0) * (i - i0);\n}\n","export default function(start, stop, step) {\n  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n  var i = -1,\n      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n      range = new Array(n);\n\n  while (++i < n) {\n    range[i] = start + i * step;\n  }\n\n  return range;\n}\n","export default function sum(values, valueof) {\n  let sum = 0;\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value = +value) {\n        sum += value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if (value = +valueof(value, ++index, values)) {\n        sum += value;\n      }\n    }\n  }\n  return sum;\n}\n","import React from 'react'\n\nexport default function useGetLatest<T>(obj: T) {\n  const ref = React.useRef<T>(obj)\n  const getterRef = React.useRef<() => T>()\n\n  ref.current = obj\n  if (!getterRef.current) {\n    getterRef.current = () => ref.current\n  }\n\n  return getterRef.current\n}\n","import React from 'react'\n\nexport default typeof window !== 'undefined'\n  ? React.useLayoutEffect\n  : React.useEffect\n","import {\n  Datum,\n  DatumFocusStatus,\n  DatumStyles,\n  Series,\n  SeriesFocusStatus,\n  SeriesStyles,\n} from '../types'\n\nexport function getSeriesStatus<TDatum>(\n  series: Series<TDatum>,\n  focusedDatum: Datum<TDatum> | null\n): SeriesFocusStatus {\n  if (focusedDatum?.seriesId === series.id) {\n    return 'focused'\n  }\n\n  return 'none'\n}\n\nexport function getDatumStatus<TDatum>(\n  datum: Datum<TDatum>,\n  focusedDatum: Datum<TDatum> | null\n): DatumFocusStatus {\n  if (datum === focusedDatum) {\n    return 'focused'\n  }\n\n  if (\n    datum.tooltipGroup?.some(groupDatum => {\n      groupDatum.seriesId === focusedDatum?.seriesId &&\n        groupDatum.index === focusedDatum?.index\n    })\n  ) {\n    return 'groupFocused'\n  }\n\n  return 'none'\n}\n\nconst elementTypes = ['area', 'line', 'rectangle', 'circle'] as const\n\nexport function materializeStyles(\n  style: SeriesStyles | DatumStyles = {},\n  defaults: SeriesStyles | DatumStyles = {}\n) {\n  style = normalizeColor(style, defaults)\n  for (let i = 0; i < elementTypes.length; i++) {\n    const type = elementTypes[i]\n    if (style[type] && defaults[type]) {\n      style[type] = materializeStyles(style[type], defaults)\n    }\n  }\n  return style\n}\n\nexport function translate(x: number, y: number) {\n  return `translate3d(${Math.round(x)}px, ${Math.round(y)}px, 0)`\n}\n\n//\n\nfunction normalizeColor(\n  style: SeriesStyles | DatumStyles,\n  defaults: SeriesStyles | DatumStyles\n): SeriesStyles | DatumStyles {\n  return {\n    ...style,\n    stroke: style.stroke || style.color || defaults.stroke || defaults.color,\n    fill: style.fill || style.color || defaults.fill || defaults.color,\n  }\n}\n\nexport function isDefined(num: number) {\n  return typeof num === 'number' && !Number.isNaN(num)\n}\n","import * as React from 'react'\n\nimport { ChartContextValue } from '../types'\n\nconst chartContext = React.createContext<any>(null!)\n\nexport function ChartContextProvider<TDatum>({\n  value,\n  children,\n}: {\n  value: () => ChartContextValue<TDatum>\n  children: React.ReactNode\n}) {\n  return <chartContext.Provider value={value} children={children} />\n}\n\nexport default function useChartContext<TDatum>() {\n  return React.useContext(chartContext)() as ChartContextValue<TDatum>\n}\n","import React from 'react'\n\nimport { Axis, AxisBand, Datum, Series } from '../types'\nimport { translate } from '../utils/Utils'\nimport useChartContext from '../utils/chartContext'\n\n//\n\nexport default function BarComponent<TDatum>({\n  primaryAxis,\n  secondaryAxis,\n  series: allSeries,\n}: {\n  primaryAxis: Axis<TDatum>\n  secondaryAxis: Axis<TDatum>\n  series: Series<TDatum>[]\n}) {\n  const {\n    getSeriesStatusStyle,\n    getDatumStatusStyle,\n    focusedDatumState,\n    gridDimensions,\n  } = useChartContext<TDatum>()\n\n  const [focusedDatum] = focusedDatumState\n\n  const xAxis = primaryAxis.isVertical ? secondaryAxis : primaryAxis\n  const yAxis = primaryAxis.isVertical ? primaryAxis : secondaryAxis\n\n  return (\n    <g\n      style={{\n        transform: translate(gridDimensions.left, gridDimensions.top),\n      }}\n    >\n      {allSeries.map((series, i) => {\n        const style = getSeriesStatusStyle(series, focusedDatum)\n\n        return (\n          <g key={`lines-${i}`}>\n            {series.datums.map((datum, i) => {\n              const dataStyle = getDatumStatusStyle(datum, focusedDatum)\n\n              const [x, width] = clampPxToAxis(\n                getRectX(datum, primaryAxis, secondaryAxis) ?? NaN,\n                getWidth(datum, primaryAxis, secondaryAxis) ?? NaN,\n                xAxis\n              )\n              const [y, height] = clampPxToAxis(\n                getRectY(datum, primaryAxis, secondaryAxis) ?? NaN,\n                getHeight(datum, primaryAxis, secondaryAxis) ?? NaN,\n                yAxis\n              )\n\n              return (\n                <rect\n                  {...{\n                    ref: el => {\n                      datum.element = el\n                    },\n                    key: i,\n                    x,\n                    y,\n                    width,\n                    height,\n                    style: {\n                      strokeWidth: 0,\n                      ...style,\n                      ...style.rectangle,\n                      ...dataStyle,\n                      ...dataStyle.rectangle,\n                    },\n                  }}\n                />\n              )\n            })}\n          </g>\n        )\n      })}\n    </g>\n  )\n}\n\nfunction getWidth<TDatum>(\n  datum: Datum<TDatum>,\n  primaryAxis: Axis<TDatum>,\n  secondaryAxis: Axis<TDatum>\n): number {\n  return primaryAxis.isVertical\n    ? getSecondaryLength(datum, secondaryAxis)\n    : getPrimaryLength(datum, primaryAxis, secondaryAxis)\n}\n\nfunction getHeight<TDatum>(\n  datum: Datum<TDatum>,\n  primaryAxis: Axis<TDatum>,\n  secondaryAxis: Axis<TDatum>\n): number {\n  return primaryAxis.isVertical\n    ? getPrimaryLength(datum, primaryAxis, secondaryAxis)\n    : getSecondaryLength(datum, secondaryAxis)\n}\n\nexport function getPrimaryGroupLength<TDatum>(\n  _datum: Datum<TDatum>,\n  primaryAxis: Axis<TDatum>\n) {\n  return Math.max(primaryAxis.primaryBandScale!.bandwidth(), 1)\n}\n\nexport function getPrimaryLength<TDatum>(\n  _datum: Datum<TDatum>,\n  primaryAxis: Axis<TDatum>,\n  secondaryAxis: Axis<TDatum>\n) {\n  if (primaryAxis.axisFamily === 'band') {\n    const bandWidth = secondaryAxis.stacked\n      ? primaryAxis.scale.bandwidth()\n      : primaryAxis.seriesBandScale.bandwidth()\n\n    return Math.min(\n      Math.max(bandWidth, primaryAxis.minBandSize ?? 1),\n      primaryAxis.maxBandSize ?? 99999999\n    )\n  }\n\n  return Math.max(\n    secondaryAxis.stacked\n      ? primaryAxis.primaryBandScale!.bandwidth()\n      : primaryAxis.seriesBandScale!.bandwidth(),\n    1\n  )\n}\n\nfunction getSecondaryLength<TDatum>(\n  datum: Datum<TDatum>,\n  secondaryAxis: Axis<TDatum>\n): number {\n  const secondary = [\n    getSecondaryStart(datum, secondaryAxis),\n    getSecondary(datum, secondaryAxis),\n  ]\n\n  return Math.abs(secondary[1] - secondary[0])\n}\n\nfunction getRectX<TDatum>(\n  datum: Datum<TDatum>,\n  primaryAxis: Axis<TDatum>,\n  secondaryAxis: Axis<TDatum>\n): number {\n  return primaryAxis.isVertical\n    ? getSecondaryStart(datum, secondaryAxis)\n    : getPrimary(datum, primaryAxis, secondaryAxis)\n}\n\nfunction getRectY<TDatum>(\n  datum: Datum<TDatum>,\n  primaryAxis: Axis<TDatum>,\n  secondaryAxis: Axis<TDatum>\n): number {\n  return primaryAxis.isVertical\n    ? getPrimary(datum, primaryAxis, secondaryAxis)\n    : getSecondary(datum, secondaryAxis)\n}\n\nexport function getPrimary<TDatum>(\n  datum: Datum<TDatum>,\n  primaryAxis: Axis<TDatum>,\n  secondaryAxis: Axis<TDatum>\n): number {\n  let primary = primaryAxis.scale(datum.primaryValue) ?? NaN\n\n  if (primaryAxis.axisFamily !== 'band') {\n    primary -= getPrimaryGroupLength(datum, primaryAxis) / 2\n  }\n\n  if (!secondaryAxis.stacked) {\n    primary =\n      primary +\n      ((primaryAxis as AxisBand<any>).seriesBandScale(datum.seriesIndex) ?? NaN)\n  }\n\n  return primary\n}\n\nfunction getSecondaryStart<TDatum>(\n  datum: Datum<TDatum>,\n  secondaryAxis: Axis<TDatum>\n): number {\n  if (secondaryAxis.stacked) {\n    return secondaryAxis.scale(datum.stackData?.[0] ?? NaN) ?? NaN\n  }\n\n  return secondaryAxis.scale(0) ?? NaN\n}\n\nfunction getSecondary<TDatum>(\n  datum: Datum<TDatum>,\n  secondaryAxis: Axis<TDatum>\n): number {\n  if (secondaryAxis.stacked) {\n    return secondaryAxis.scale(datum.stackData?.[1] ?? NaN) ?? NaN\n  }\n\n  return secondaryAxis.scale(datum.secondaryValue) ?? NaN\n}\n\nfunction clampPxToAxis<TDatum>(\n  startPx: number,\n  lengthPx: number,\n  axis: Axis<TDatum>\n) {\n  const range = axis.scale.range()\n\n  if (axis.isVertical) {\n    range.reverse()\n  }\n\n  const safe = (num: number) => Math.max(range[0], Math.min(num, range[1]))\n\n  const safeStart = safe(startPx)\n  const safeEnd = safe(startPx + lengthPx)\n  const safeLength = safeEnd - safeStart\n\n  return [safeStart, safeLength] as const\n}\n","const pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path;\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function(x1, y1, x, y) {\n    this._ += \"Q\" + (+x1) + \",\" + (+y1) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + (+x1) + \",\" + (+y1) + \",\" + (+x2) + \",\" + (+y2) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon));\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      var x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n      }\n\n      this._ += \"A\" + r + \",\" + r + \",0,0,\" + (+(y01 * x20 > x01 * y20)) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n    }\n  },\n  arc: function(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._ += \"L\" + x0 + \",\" + y0;\n    }\n\n    // Is this arc empty? We’re done.\n    if (!r) return;\n\n    // Does the angle go the wrong way? Flip the direction.\n    if (da < 0) da = da % tau + tau;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    }\n\n    // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,\" + (+(da >= pi)) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n    }\n  },\n  rect: function(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + (+w) + \"v\" + (+h) + \"h\" + (-w) + \"Z\";\n  },\n  toString: function() {\n    return this._;\n  }\n};\n\nexport default path;\n","export default function(x) {\n  return function constant() {\n    return x;\n  };\n}\n","export var slice = Array.prototype.slice;\n\nexport default function(x) {\n  return typeof x === \"object\" && \"length\" in x\n    ? x // Array, TypedArray, NodeList, array-like\n    : Array.from(x); // Map, Set, iterable, string, or anything else\n}\n","function Linear(context) {\n  this._context = context;\n}\n\nLinear.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // proceed\n      default: this._context.lineTo(x, y); break;\n    }\n  }\n};\n\nexport default function(context) {\n  return new Linear(context);\n}\n","export function x(p) {\n  return p[0];\n}\n\nexport function y(p) {\n  return p[1];\n}\n","import {path} from \"d3-path\";\nimport array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function(x, y) {\n  var defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  x = typeof x === \"function\" ? x : (x === undefined) ? pointX : constant(x);\n  y = typeof y === \"function\" ? y : (y === undefined) ? pointY : constant(y);\n\n  function line(data) {\n    var i,\n        n = (data = array(data)).length,\n        d,\n        defined0 = false,\n        buffer;\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) output.lineStart();\n        else output.lineEnd();\n      }\n      if (defined0) output.point(+x(d, i, data), +y(d, i, data));\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  line.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), line) : x;\n  };\n\n  line.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), line) : y;\n  };\n\n  line.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), line) : defined;\n  };\n\n  line.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;\n  };\n\n  line.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;\n  };\n\n  return line;\n}\n","export default function(series, order) {\n  if (!((n = series.length) > 1)) return;\n  for (var i = 1, j, s0, s1 = series[order[0]], n, m = s1.length; i < n; ++i) {\n    s0 = s1, s1 = series[order[i]];\n    for (j = 0; j < m; ++j) {\n      s1[j][1] += s1[j][0] = isNaN(s0[j][1]) ? s0[j][0] : s0[j][1];\n    }\n  }\n}\n","export default function(series) {\n  var n = series.length, o = new Array(n);\n  while (--n >= 0) o[n] = n;\n  return o;\n}\n","import array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport offsetNone from \"./offset/none.js\";\nimport orderNone from \"./order/none.js\";\n\nfunction stackValue(d, key) {\n  return d[key];\n}\n\nfunction stackSeries(key) {\n  const series = [];\n  series.key = key;\n  return series;\n}\n\nexport default function() {\n  var keys = constant([]),\n      order = orderNone,\n      offset = offsetNone,\n      value = stackValue;\n\n  function stack(data) {\n    var sz = Array.from(keys.apply(this, arguments), stackSeries),\n        i, n = sz.length, j = -1,\n        oz;\n\n    for (const d of data) {\n      for (i = 0, ++j; i < n; ++i) {\n        (sz[i][j] = [0, +value(d, sz[i].key, j, data)]).data = d;\n      }\n    }\n\n    for (i = 0, oz = array(order(sz)); i < n; ++i) {\n      sz[oz[i]].index = i;\n    }\n\n    offset(sz, oz);\n    return sz;\n  }\n\n  stack.keys = function(_) {\n    return arguments.length ? (keys = typeof _ === \"function\" ? _ : constant(Array.from(_)), stack) : keys;\n  };\n\n  stack.value = function(_) {\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), stack) : value;\n  };\n\n  stack.order = function(_) {\n    return arguments.length ? (order = _ == null ? orderNone : typeof _ === \"function\" ? _ : constant(Array.from(_)), stack) : order;\n  };\n\n  stack.offset = function(_) {\n    return arguments.length ? (offset = _ == null ? offsetNone : _, stack) : offset;\n  };\n\n  return stack;\n}\n","// @ts-nocheck\nimport { CurveFactory } from 'd3-shape'\n\nfunction sign(x) {\n  return x < 0 ? -1 : 1\n}\n\n// Calculate the slopes of the tangents (Hermite-type interpolation) based on\n// the following paper: Steffen, M. 1990. A Simple Method for Monotonic\n// Interpolation in One Dimension. Astronomy and Astrophysics, Vol. 239, NO.\n// NOV(II), P. 443, 1990.\nfunction slope3(that, x2, y2) {\n  var h0 = that._x1 - that._x0,\n    h1 = x2 - that._x1,\n    s0 = (that._y1 - that._y0) / (h0 || (h1 < 0 && -0)),\n    s1 = (y2 - that._y1) / (h1 || (h0 < 0 && -0)),\n    p = (s0 * h1 + s1 * h0) / (h0 + h1)\n  return (\n    (sign(s0) + sign(s1)) *\n      Math.min(Math.abs(s0), Math.abs(s1), 0.5 * Math.abs(p)) || 0\n  )\n}\n\n// Calculate a one-sided slope.\nfunction slope2(that, t) {\n  var h = that._x1 - that._x0\n  return h ? ((3 * (that._y1 - that._y0)) / h - t) / 2 : t\n}\n\n// According to https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Representations\n// \"you can express cubic Hermite interpolation in terms of cubic Bézier curves\n// with respect to the four values p0, p0 + m0 / 3, p1 - m1 / 3, p1\".\nfunction point(that, t0, t1) {\n  var x0 = that._x0,\n    y0 = that._y0,\n    x1 = that._x1,\n    y1 = that._y1,\n    dx = (x1 - x0) / 3\n  that._context.bezierCurveTo(\n    x0 + dx,\n    y0 + dx * t0,\n    x1 - dx,\n    y1 - dx * t1,\n    x1,\n    y1\n  )\n}\n\nfunction MonotoneX(context) {\n  this._context = context\n}\n\nMonotoneX.prototype = {\n  areaStart: function () {\n    this._line = 0\n  },\n  areaEnd: function () {\n    this._line = NaN\n  },\n  lineStart: function () {\n    this._x0 = this._x1 = this._y0 = this._y1 = this._t0 = NaN\n    this._point = 0\n  },\n  lineEnd: function () {\n    switch (this._point) {\n      case 2:\n        this._context.lineTo(this._x1, this._y1)\n        break\n      case 3:\n        point(this, this._t0, slope2(this, this._t0))\n        break\n    }\n    if (this._line || (this._line !== 0 && this._point === 1))\n      this._context.closePath()\n    this._line = 1 - this._line\n  },\n  point: function (x, y) {\n    var t1 = NaN\n\n    ;(x = +x), (y = +y)\n    if (x === this._x1 && y === this._y1) return // Ignore coincident points.\n    switch (this._point) {\n      case 0:\n        this._point = 1\n        this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y)\n        break\n      case 1:\n        this._point = 2\n        break\n      case 2:\n        this._point = 3\n        point(this, slope2(this, (t1 = slope3(this, x, y))), t1)\n        break\n      default:\n        point(this, this._t0, (t1 = slope3(this, x, y)))\n        break\n    }\n\n    ;(this._x0 = this._x1), (this._x1 = x)\n    ;(this._y0 = this._y1), (this._y1 = y)\n    this._t0 = t1\n  },\n}\n\nfunction MonotoneY(context) {\n  this._context = new ReflectContext(context)\n}\n\n;(MonotoneY.prototype = Object.create(MonotoneX.prototype)).point = function (\n  x,\n  y\n) {\n  MonotoneX.prototype.point.call(this, y, x)\n}\n\nfunction ReflectContext(context) {\n  this._context = context\n}\n\nReflectContext.prototype = {\n  moveTo: function (x, y) {\n    this._context.moveTo(y, x)\n  },\n  closePath: function () {\n    this._context.closePath()\n  },\n  lineTo: function (x, y) {\n    this._context.lineTo(y, x)\n  },\n  bezierCurveTo: function (x1, y1, x2, y2, x, y) {\n    this._context.bezierCurveTo(y1, x1, y2, x2, y, x)\n  },\n}\n\nexport const monotoneX: CurveFactory = context => new MonotoneX(context)\n\nexport const monotoneY: CurveFactory = context => new MonotoneY(context)\n","import { area, line } from 'd3-shape'\nimport React from 'react'\n\nimport { Axis, Series, Datum } from '../types'\nimport { isDefined, translate } from '../utils/Utils'\nimport useChartContext from '../utils/chartContext'\n//\nimport { monotoneX } from '../utils/curveMonotone'\n\nexport default function Line<TDatum>({\n  primaryAxis,\n  secondaryAxis,\n  series: allSeries,\n}: {\n  primaryAxis: Axis<TDatum>\n  secondaryAxis: Axis<TDatum>\n  series: Series<TDatum>[]\n}) {\n  const {\n    getSeriesStatusStyle,\n    getDatumStatusStyle,\n    focusedDatumState,\n    gridDimensions,\n  } = useChartContext<TDatum>()\n\n  const curve = secondaryAxis.curve ?? monotoneX\n\n  const [focusedDatum] = focusedDatumState\n\n  return (\n    <g\n      style={{\n        transform: translate(gridDimensions.left, gridDimensions.top),\n      }}\n    >\n      {allSeries.map((series, i) => {\n        const style = getSeriesStatusStyle(series, focusedDatum)\n\n        let areaPath: null | string = null\n\n        if (secondaryAxis.elementType === 'area') {\n          const _x = (datum: Datum<TDatum>) => getPrimary(datum, primaryAxis)\n          const _y1 = (datum: Datum<TDatum>) =>\n            clampPxToAxis(\n              getSecondaryStart(datum, secondaryAxis),\n              secondaryAxis\n            )\n          const _y2 = (datum: Datum<TDatum>) =>\n            clampPxToAxis(getSecondary(datum, secondaryAxis), secondaryAxis)\n          const areaFn = area<Datum<TDatum>>(_x, _y1, _y2).curve(curve)\n\n          areaFn.defined(datum =>\n            [_x(datum), _y1(datum), _y2(datum)].every(isDefined)\n          )\n\n          areaPath = areaFn(series.datums)\n        }\n\n        const _x = (datum: Datum<TDatum>) => getPrimary(datum, primaryAxis)\n        const _y = (datum: Datum<TDatum>) => getSecondary(datum, secondaryAxis)\n        const lineFn = line<Datum<TDatum>>(_x, _y).curve(curve)\n        lineFn.defined(datum => [_x(datum), _y(datum)].every(isDefined))\n\n        const linePath =\n          secondaryAxis.elementType === 'area' ||\n          secondaryAxis.elementType === 'line'\n            ? lineFn(series.datums) ?? undefined\n            : undefined\n\n        const showDatumElements =\n          secondaryAxis.showDatumElements ??\n          (secondaryAxis.elementType === 'bubble' || 'onFocus')\n\n        return (\n          <g key={`lines-${i}`}>\n            {areaPath ? (\n              <path\n                d={areaPath}\n                style={{\n                  strokeWidth: 2,\n                  opacity: 0.5,\n                  ...style,\n                  ...style.area,\n                }}\n              />\n            ) : null}\n            {linePath ? (\n              <path\n                d={linePath}\n                style={{\n                  strokeWidth: 2,\n                  ...style,\n                  ...style.line,\n                  fill: 'none',\n                }}\n              />\n            ) : null}\n            {series.datums.map((datum, i) => {\n              const dataStyle = getDatumStatusStyle(datum, focusedDatum)\n\n              const radius =\n                showDatumElements === 'onFocus'\n                  ? datum === focusedDatum\n                    ? 4\n                    : 0\n                  : 2\n\n              const show =\n                showDatumElements === 'onFocus'\n                  ? datum === focusedDatum\n                  : secondaryAxis.showDatumElements ??\n                    secondaryAxis.elementType === 'bubble'\n\n              return (\n                <circle\n                  key={i}\n                  ref={el => {\n                    datum.element = el\n                  }}\n                  cx={getX(datum, primaryAxis, secondaryAxis) || 0}\n                  cy={getY(datum, primaryAxis, secondaryAxis) || 0}\n                  style={{\n                    // @ts-ignore\n                    r: radius,\n                    transition: 'all .3s ease-out',\n                    ...style,\n                    ...style.circle,\n                    ...dataStyle,\n                    ...dataStyle.circle,\n                    ...(!show ? { opacity: 0 } : {}),\n                  }}\n                />\n              )\n            })}\n          </g>\n        )\n      })}\n    </g>\n  )\n}\n\nfunction getX<TDatum>(\n  datum: Datum<TDatum>,\n  primaryAxis: Axis<TDatum>,\n  secondaryAxis: Axis<TDatum>\n): number {\n  return primaryAxis.isVertical\n    ? getSecondary(datum, secondaryAxis)\n    : getPrimary(datum, primaryAxis)\n}\n\nfunction getY<TDatum>(\n  datum: Datum<TDatum>,\n  primaryAxis: Axis<TDatum>,\n  secondaryAxis: Axis<TDatum>\n): number {\n  return primaryAxis.isVertical\n    ? getPrimary(datum, primaryAxis)\n    : getSecondary(datum, secondaryAxis)\n}\n\nfunction getPrimary<TDatum>(\n  datum: Datum<TDatum>,\n  primaryAxis: Axis<TDatum>\n): number {\n  let primary = primaryAxis.scale(datum.primaryValue) ?? NaN\n\n  if (primaryAxis.axisFamily === 'band') {\n    primary += primaryAxis.scale.bandwidth() / 2\n  }\n\n  return primary\n}\n\nfunction getSecondary<TDatum>(\n  datum: Datum<TDatum>,\n  secondaryAxis: Axis<TDatum>\n): number {\n  if (secondaryAxis.stacked) {\n    return secondaryAxis.scale(datum.stackData?.[1] ?? NaN) ?? NaN\n  }\n\n  return secondaryAxis.scale(datum.secondaryValue) ?? NaN\n}\n\nfunction getSecondaryStart<TDatum>(\n  datum: Datum<TDatum>,\n  secondaryAxis: Axis<TDatum>\n): number {\n  if (secondaryAxis.stacked) {\n    return secondaryAxis.scale(datum.stackData?.[0] ?? NaN) ?? NaN\n  }\n\n  return secondaryAxis.scale(0) ?? NaN\n}\n\nfunction clampPxToAxis<TDatum>(px: number, axis: Axis<TDatum>) {\n  const range = axis.scale.range()\n  if (axis.isVertical) {\n    range.reverse()\n  }\n\n  return Math.max(range[0], Math.min(px, range[1]))\n}\n","import {path} from \"d3-path\";\nimport array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport line from \"./line.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function(x0, y0, y1) {\n  var x1 = null,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  x0 = typeof x0 === \"function\" ? x0 : (x0 === undefined) ? pointX : constant(+x0);\n  y0 = typeof y0 === \"function\" ? y0 : (y0 === undefined) ? constant(0) : constant(+y0);\n  y1 = typeof y1 === \"function\" ? y1 : (y1 === undefined) ? pointY : constant(+y1);\n\n  function area(data) {\n    var i,\n        j,\n        k,\n        n = (data = array(data)).length,\n        d,\n        defined0 = false,\n        buffer,\n        x0z = new Array(n),\n        y0z = new Array(n);\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) {\n          j = i;\n          output.areaStart();\n          output.lineStart();\n        } else {\n          output.lineEnd();\n          output.lineStart();\n          for (k = i - 1; k >= j; --k) {\n            output.point(x0z[k], y0z[k]);\n          }\n          output.lineEnd();\n          output.areaEnd();\n        }\n      }\n      if (defined0) {\n        x0z[i] = +x0(d, i, data), y0z[i] = +y0(d, i, data);\n        output.point(x1 ? +x1(d, i, data) : x0z[i], y1 ? +y1(d, i, data) : y0z[i]);\n      }\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  function arealine() {\n    return line().defined(defined).curve(curve).context(context);\n  }\n\n  area.x = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), x1 = null, area) : x0;\n  };\n\n  area.x0 = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), area) : x0;\n  };\n\n  area.x1 = function(_) {\n    return arguments.length ? (x1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : x1;\n  };\n\n  area.y = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), y1 = null, area) : y0;\n  };\n\n  area.y0 = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), area) : y0;\n  };\n\n  area.y1 = function(_) {\n    return arguments.length ? (y1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : y1;\n  };\n\n  area.lineX0 =\n  area.lineY0 = function() {\n    return arealine().x(x0).y(y0);\n  };\n\n  area.lineY1 = function() {\n    return arealine().x(x0).y(y1);\n  };\n\n  area.lineX1 = function() {\n    return arealine().x(x1).y(y0);\n  };\n\n  area.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), area) : defined;\n  };\n\n  area.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), area) : curve;\n  };\n\n  area.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), area) : context;\n  };\n\n  return area;\n}\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n","import {initRange} from \"./init.js\";\n\nexport const implicit = Symbol(\"implicit\");\n\nexport default function ordinal() {\n  var index = new Map(),\n      domain = [],\n      range = [],\n      unknown = implicit;\n\n  function scale(d) {\n    var key = d + \"\", i = index.get(key);\n    if (!i) {\n      if (unknown !== implicit) return unknown;\n      index.set(key, i = domain.push(d));\n    }\n    return range[(i - 1) % range.length];\n  }\n\n  scale.domain = function(_) {\n    if (!arguments.length) return domain.slice();\n    domain = [], index = new Map();\n    for (const value of _) {\n      const key = value + \"\";\n      if (index.has(key)) continue;\n      index.set(key, domain.push(value));\n    }\n    return scale;\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), scale) : range.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return ordinal(domain, range).unknown(unknown);\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n","import {range as sequence} from \"d3-array\";\nimport {initRange} from \"./init.js\";\nimport ordinal from \"./ordinal.js\";\n\nexport default function band() {\n  var scale = ordinal().unknown(undefined),\n      domain = scale.domain,\n      ordinalRange = scale.range,\n      r0 = 0,\n      r1 = 1,\n      step,\n      bandwidth,\n      round = false,\n      paddingInner = 0,\n      paddingOuter = 0,\n      align = 0.5;\n\n  delete scale.unknown;\n\n  function rescale() {\n    var n = domain().length,\n        reverse = r1 < r0,\n        start = reverse ? r1 : r0,\n        stop = reverse ? r0 : r1;\n    step = (stop - start) / Math.max(1, n - paddingInner + paddingOuter * 2);\n    if (round) step = Math.floor(step);\n    start += (stop - start - step * (n - paddingInner)) * align;\n    bandwidth = step * (1 - paddingInner);\n    if (round) start = Math.round(start), bandwidth = Math.round(bandwidth);\n    var values = sequence(n).map(function(i) { return start + step * i; });\n    return ordinalRange(reverse ? values.reverse() : values);\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? ([r0, r1] = _, r0 = +r0, r1 = +r1, rescale()) : [r0, r1];\n  };\n\n  scale.rangeRound = function(_) {\n    return [r0, r1] = _, r0 = +r0, r1 = +r1, round = true, rescale();\n  };\n\n  scale.bandwidth = function() {\n    return bandwidth;\n  };\n\n  scale.step = function() {\n    return step;\n  };\n\n  scale.round = function(_) {\n    return arguments.length ? (round = !!_, rescale()) : round;\n  };\n\n  scale.padding = function(_) {\n    return arguments.length ? (paddingInner = Math.min(1, paddingOuter = +_), rescale()) : paddingInner;\n  };\n\n  scale.paddingInner = function(_) {\n    return arguments.length ? (paddingInner = Math.min(1, _), rescale()) : paddingInner;\n  };\n\n  scale.paddingOuter = function(_) {\n    return arguments.length ? (paddingOuter = +_, rescale()) : paddingOuter;\n  };\n\n  scale.align = function(_) {\n    return arguments.length ? (align = Math.max(0, Math.min(1, _)), rescale()) : align;\n  };\n\n  scale.copy = function() {\n    return band(domain(), [r0, r1])\n        .round(round)\n        .paddingInner(paddingInner)\n        .paddingOuter(paddingOuter)\n        .align(align);\n  };\n\n  return initRange.apply(rescale(), arguments);\n}\n\nfunction pointish(scale) {\n  var copy = scale.copy;\n\n  scale.padding = scale.paddingOuter;\n  delete scale.paddingInner;\n  delete scale.paddingOuter;\n\n  scale.copy = function() {\n    return pointish(copy());\n  };\n\n  return scale;\n}\n\nexport function point() {\n  return pointish(band.apply(null, arguments).paddingInner(1));\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n","export default function number(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport constant from \"./constant.js\";\nimport number from \"./number.js\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(a, b) {\n  var t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    var n = Math.min(domain.length, range.length);\n    if (clamp !== identity) clamp = clamper(domain[0], domain[n - 1]);\n    piecewise = n > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = Array.from(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? true : identity, rescale()) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous() {\n  return transformer()(identity, identity);\n}\n","export default function constants(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function(x) {\n  return Math.abs(x = Math.round(x)) >= 1e21\n      ? x.toLocaleString(\"en\").replace(/,/g, \"\")\n      : x.toString(10);\n}\n\n// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimalParts(1.23) returns [\"123\", 0].\nexport function formatDecimalParts(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, ±Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatDecimal from \"./formatDecimal.js\";\nimport formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": (x, p) => (x * 100).toFixed(p),\n  \"b\": (x) => Math.round(x).toString(2),\n  \"c\": (x) => x + \"\",\n  \"d\": formatDecimal,\n  \"e\": (x, p) => x.toExponential(p),\n  \"f\": (x, p) => x.toFixed(p),\n  \"g\": (x, p) => x.toPrecision(p),\n  \"o\": (x) => Math.round(x).toString(8),\n  \"p\": (x, p) => formatRounded(x * 100, p),\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": (x) => Math.round(x).toString(16).toUpperCase(),\n  \"x\": (x) => Math.round(x).toString(16)\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"µ\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"−\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer “value” part that can be\n        // grouped, and fractional or exponential “suffix” part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function tickFormat(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport tickFormat from \"./tickFormat.js\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain();\n    var i0 = 0;\n    var i1 = d.length - 1;\n    var start = d[i0];\n    var stop = d[i1];\n    var prestep;\n    var step;\n    var maxIter = 10;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n    \n    while (maxIter-- > 0) {\n      step = tickIncrement(start, stop, count);\n      if (step === prestep) {\n        d[i0] = start\n        d[i1] = stop\n        return domain(d);\n      } else if (step > 0) {\n        start = Math.floor(start / step) * step;\n        stop = Math.ceil(stop / step) * step;\n      } else if (step < 0) {\n        start = Math.ceil(start * step) / step;\n        stop = Math.floor(stop * step) / step;\n      } else {\n        break;\n      }\n      prestep = step;\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous();\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","export default function nice(domain, interval) {\n  domain = domain.slice();\n\n  var i0 = 0,\n      i1 = domain.length - 1,\n      x0 = domain[i0],\n      x1 = domain[i1],\n      t;\n\n  if (x1 < x0) {\n    t = i0, i0 = i1, i1 = t;\n    t = x0, x0 = x1, x1 = t;\n  }\n\n  domain[i0] = interval.floor(x0);\n  domain[i1] = interval.ceil(x1);\n  return domain;\n}\n","import {ticks} from \"d3-array\";\nimport {format} from \"d3-format\";\nimport nice from \"./nice.js\";\nimport {copy, transformer} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\n\nfunction transformLog(x) {\n  return Math.log(x);\n}\n\nfunction transformExp(x) {\n  return Math.exp(x);\n}\n\nfunction transformLogn(x) {\n  return -Math.log(-x);\n}\n\nfunction transformExpn(x) {\n  return -Math.exp(-x);\n}\n\nfunction pow10(x) {\n  return isFinite(x) ? +(\"1e\" + x) : x < 0 ? 0 : x;\n}\n\nfunction powp(base) {\n  return base === 10 ? pow10\n      : base === Math.E ? Math.exp\n      : function(x) { return Math.pow(base, x); };\n}\n\nfunction logp(base) {\n  return base === Math.E ? Math.log\n      : base === 10 && Math.log10\n      || base === 2 && Math.log2\n      || (base = Math.log(base), function(x) { return Math.log(x) / base; });\n}\n\nfunction reflect(f) {\n  return function(x) {\n    return -f(-x);\n  };\n}\n\nexport function loggish(transform) {\n  var scale = transform(transformLog, transformExp),\n      domain = scale.domain,\n      base = 10,\n      logs,\n      pows;\n\n  function rescale() {\n    logs = logp(base), pows = powp(base);\n    if (domain()[0] < 0) {\n      logs = reflect(logs), pows = reflect(pows);\n      transform(transformLogn, transformExpn);\n    } else {\n      transform(transformLog, transformExp);\n    }\n    return scale;\n  }\n\n  scale.base = function(_) {\n    return arguments.length ? (base = +_, rescale()) : base;\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.ticks = function(count) {\n    var d = domain(),\n        u = d[0],\n        v = d[d.length - 1],\n        r;\n\n    if (r = v < u) i = u, u = v, v = i;\n\n    var i = logs(u),\n        j = logs(v),\n        p,\n        k,\n        t,\n        n = count == null ? 10 : +count,\n        z = [];\n\n    if (!(base % 1) && j - i < n) {\n      i = Math.floor(i), j = Math.ceil(j);\n      if (u > 0) for (; i <= j; ++i) {\n        for (k = 1, p = pows(i); k < base; ++k) {\n          t = p * k;\n          if (t < u) continue;\n          if (t > v) break;\n          z.push(t);\n        }\n      } else for (; i <= j; ++i) {\n        for (k = base - 1, p = pows(i); k >= 1; --k) {\n          t = p * k;\n          if (t < u) continue;\n          if (t > v) break;\n          z.push(t);\n        }\n      }\n      if (z.length * 2 < n) z = ticks(u, v, n);\n    } else {\n      z = ticks(i, j, Math.min(j - i, n)).map(pows);\n    }\n\n    return r ? z.reverse() : z;\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    if (specifier == null) specifier = base === 10 ? \".0e\" : \",\";\n    if (typeof specifier !== \"function\") specifier = format(specifier);\n    if (count === Infinity) return specifier;\n    if (count == null) count = 10;\n    var k = Math.max(1, base * count / scale.ticks().length); // TODO fast estimate?\n    return function(d) {\n      var i = d / pows(Math.round(logs(d)));\n      if (i * base < base - 0.5) i *= base;\n      return i <= k ? specifier(d) : \"\";\n    };\n  };\n\n  scale.nice = function() {\n    return domain(nice(domain(), {\n      floor: function(x) { return pows(Math.floor(logs(x))); },\n      ceil: function(x) { return pows(Math.ceil(logs(x))); }\n    }));\n  };\n\n  return scale;\n}\n\nexport default function log() {\n  var scale = loggish(transformer()).domain([1, 10]);\n\n  scale.copy = function() {\n    return copy(scale, log()).base(scale.base());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n","var t0 = new Date,\n    t1 = new Date;\n\nexport default function newInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = arguments.length === 0 ? new Date : new Date(+date)), date;\n  }\n\n  interval.floor = function(date) {\n    return floori(date = new Date(+date)), date;\n  };\n\n  interval.ceil = function(date) {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = function(date) {\n    var d0 = interval(date),\n        d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = function(date, step) {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = function(start, stop, step) {\n    var range = [], previous;\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    do range.push(previous = new Date(+start)), offseti(start, step), floori(start);\n    while (previous < start && start < stop);\n    return range;\n  };\n\n  interval.filter = function(test) {\n    return newInterval(function(date) {\n      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n    }, function(date, step) {\n      if (date >= date) {\n        if (step < 0) while (++step <= 0) {\n          while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty\n        } else while (--step >= 0) {\n          while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty\n        }\n      }\n    });\n  };\n\n  if (count) {\n    interval.count = function(start, end) {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = function(step) {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? function(d) { return field(d) % step === 0; }\n              : function(d) { return interval.count(0, d) % step === 0; });\n    };\n  }\n\n  return interval;\n}\n","import interval from \"./interval.js\";\n\nvar millisecond = interval(function() {\n  // noop\n}, function(date, step) {\n  date.setTime(+date + step);\n}, function(start, end) {\n  return end - start;\n});\n\n// An optimized implementation for this simple case.\nmillisecond.every = function(k) {\n  k = Math.floor(k);\n  if (!isFinite(k) || !(k > 0)) return null;\n  if (!(k > 1)) return millisecond;\n  return interval(function(date) {\n    date.setTime(Math.floor(date / k) * k);\n  }, function(date, step) {\n    date.setTime(+date + step * k);\n  }, function(start, end) {\n    return (end - start) / k;\n  });\n};\n\nexport default millisecond;\nexport var milliseconds = millisecond.range;\n","export const durationSecond = 1000;\nexport const durationMinute = durationSecond * 60;\nexport const durationHour = durationMinute * 60;\nexport const durationDay = durationHour * 24;\nexport const durationWeek = durationDay * 7;\nexport const durationMonth = durationDay * 30;\nexport const durationYear = durationDay * 365;\n","import interval from \"./interval.js\";\nimport {durationSecond} from \"./duration.js\";\n\nvar second = interval(function(date) {\n  date.setTime(date - date.getMilliseconds());\n}, function(date, step) {\n  date.setTime(+date + step * durationSecond);\n}, function(start, end) {\n  return (end - start) / durationSecond;\n}, function(date) {\n  return date.getUTCSeconds();\n});\n\nexport default second;\nexport var seconds = second.range;\n","import interval from \"./interval.js\";\nimport {durationMinute, durationSecond} from \"./duration.js\";\n\nvar minute = interval(function(date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getMinutes();\n});\n\nexport default minute;\nexport var minutes = minute.range;\n","import interval from \"./interval.js\";\nimport {durationHour, durationMinute, durationSecond} from \"./duration.js\";\n\nvar hour = interval(function(date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond - date.getMinutes() * durationMinute);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getHours();\n});\n\nexport default hour;\nexport var hours = hour.range;\n","import interval from \"./interval.js\";\nimport {durationDay, durationMinute} from \"./duration.js\";\n\nvar day = interval(\n  date => date.setHours(0, 0, 0, 0),\n  (date, step) => date.setDate(date.getDate() + step),\n  (start, end) => (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay,\n  date => date.getDate() - 1\n);\n\nexport default day;\nexport var days = day.range;\n","import interval from \"./interval.js\";\nimport {durationMinute, durationWeek} from \"./duration.js\";\n\nfunction weekday(i) {\n  return interval(function(date) {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setDate(date.getDate() + step * 7);\n  }, function(start, end) {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nexport var sunday = weekday(0);\nexport var monday = weekday(1);\nexport var tuesday = weekday(2);\nexport var wednesday = weekday(3);\nexport var thursday = weekday(4);\nexport var friday = weekday(5);\nexport var saturday = weekday(6);\n\nexport var sundays = sunday.range;\nexport var mondays = monday.range;\nexport var tuesdays = tuesday.range;\nexport var wednesdays = wednesday.range;\nexport var thursdays = thursday.range;\nexport var fridays = friday.range;\nexport var saturdays = saturday.range;\n","import interval from \"./interval.js\";\n\nvar month = interval(function(date) {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setMonth(date.getMonth() + step);\n}, function(start, end) {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, function(date) {\n  return date.getMonth();\n});\n\nexport default month;\nexport var months = month.range;\n","import interval from \"./interval.js\";\n\nvar year = interval(function(date) {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setFullYear(date.getFullYear() + step);\n}, function(start, end) {\n  return end.getFullYear() - start.getFullYear();\n}, function(date) {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\nyear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nexport default year;\nexport var years = year.range;\n","import interval from \"./interval.js\";\nimport {durationMinute} from \"./duration.js\";\n\nvar utcMinute = interval(function(date) {\n  date.setUTCSeconds(0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getUTCMinutes();\n});\n\nexport default utcMinute;\nexport var utcMinutes = utcMinute.range;\n","import interval from \"./interval.js\";\nimport {durationHour} from \"./duration.js\";\n\nvar utcHour = interval(function(date) {\n  date.setUTCMinutes(0, 0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getUTCHours();\n});\n\nexport default utcHour;\nexport var utcHours = utcHour.range;\n","import interval from \"./interval.js\";\nimport {durationDay} from \"./duration.js\";\n\nvar utcDay = interval(function(date) {\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCDate(date.getUTCDate() + step);\n}, function(start, end) {\n  return (end - start) / durationDay;\n}, function(date) {\n  return date.getUTCDate() - 1;\n});\n\nexport default utcDay;\nexport var utcDays = utcDay.range;\n","import interval from \"./interval.js\";\nimport {durationWeek} from \"./duration.js\";\n\nfunction utcWeekday(i) {\n  return interval(function(date) {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, function(start, end) {\n    return (end - start) / durationWeek;\n  });\n}\n\nexport var utcSunday = utcWeekday(0);\nexport var utcMonday = utcWeekday(1);\nexport var utcTuesday = utcWeekday(2);\nexport var utcWednesday = utcWeekday(3);\nexport var utcThursday = utcWeekday(4);\nexport var utcFriday = utcWeekday(5);\nexport var utcSaturday = utcWeekday(6);\n\nexport var utcSundays = utcSunday.range;\nexport var utcMondays = utcMonday.range;\nexport var utcTuesdays = utcTuesday.range;\nexport var utcWednesdays = utcWednesday.range;\nexport var utcThursdays = utcThursday.range;\nexport var utcFridays = utcFriday.range;\nexport var utcSaturdays = utcSaturday.range;\n","import interval from \"./interval.js\";\n\nvar utcMonth = interval(function(date) {\n  date.setUTCDate(1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCMonth(date.getUTCMonth() + step);\n}, function(start, end) {\n  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n}, function(date) {\n  return date.getUTCMonth();\n});\n\nexport default utcMonth;\nexport var utcMonths = utcMonth.range;\n","import interval from \"./interval.js\";\n\nvar utcYear = interval(function(date) {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, function(start, end) {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, function(date) {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nexport default utcYear;\nexport var utcYears = utcYear.range;\n","import {bisector, tickStep} from \"d3-array\";\nimport {durationDay, durationHour, durationMinute, durationMonth, durationSecond, durationWeek, durationYear} from \"./duration.js\";\nimport millisecond from \"./millisecond.js\";\nimport second from \"./second.js\";\nimport minute from \"./minute.js\";\nimport hour from \"./hour.js\";\nimport day from \"./day.js\";\nimport {sunday as week} from \"./week.js\";\nimport month from \"./month.js\";\nimport year from \"./year.js\";\nimport utcMinute from \"./utcMinute.js\";\nimport utcHour from \"./utcHour.js\";\nimport utcDay from \"./utcDay.js\";\nimport {utcSunday as utcWeek} from \"./utcWeek.js\";\nimport utcMonth from \"./utcMonth.js\";\nimport utcYear from \"./utcYear.js\";\n\nfunction ticker(year, month, week, day, hour, minute) {\n\n  const tickIntervals = [\n    [second,  1,      durationSecond],\n    [second,  5,  5 * durationSecond],\n    [second, 15, 15 * durationSecond],\n    [second, 30, 30 * durationSecond],\n    [minute,  1,      durationMinute],\n    [minute,  5,  5 * durationMinute],\n    [minute, 15, 15 * durationMinute],\n    [minute, 30, 30 * durationMinute],\n    [  hour,  1,      durationHour  ],\n    [  hour,  3,  3 * durationHour  ],\n    [  hour,  6,  6 * durationHour  ],\n    [  hour, 12, 12 * durationHour  ],\n    [   day,  1,      durationDay   ],\n    [   day,  2,  2 * durationDay   ],\n    [  week,  1,      durationWeek  ],\n    [ month,  1,      durationMonth ],\n    [ month,  3,  3 * durationMonth ],\n    [  year,  1,      durationYear  ]\n  ];\n\n  function ticks(start, stop, count) {\n    const reverse = stop < start;\n    if (reverse) [start, stop] = [stop, start];\n    const interval = count && typeof count.range === \"function\" ? count : tickInterval(start, stop, count);\n    const ticks = interval ? interval.range(start, +stop + 1) : []; // inclusive stop\n    return reverse ? ticks.reverse() : ticks;\n  }\n\n  function tickInterval(start, stop, count) {\n    const target = Math.abs(stop - start) / count;\n    const i = bisector(([,, step]) => step).right(tickIntervals, target);\n    if (i === tickIntervals.length) return year.every(tickStep(start / durationYear, stop / durationYear, count));\n    if (i === 0) return millisecond.every(Math.max(tickStep(start, stop, count), 1));\n    const [t, step] = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];\n    return t.every(step);\n  }\n\n  return [ticks, tickInterval];\n}\n\nconst [utcTicks, utcTickInterval] = ticker(utcYear, utcMonth, utcWeek, utcDay, utcHour, utcMinute);\nconst [timeTicks, timeTickInterval] = ticker(year, month, week, day, hour, minute);\n\nexport {utcTicks, utcTickInterval, timeTicks, timeTickInterval};\n","import {\n  timeDay,\n  timeSunday,\n  timeMonday,\n  timeThursday,\n  timeYear,\n  utcDay,\n  utcSunday,\n  utcMonday,\n  utcThursday,\n  utcYear\n} from \"d3-time\";\n\nfunction localDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n    date.setFullYear(d.y);\n    return date;\n  }\n  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\n\nfunction utcDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n\nfunction newDate(y, m, d) {\n  return {y: y, m: m, d: d, H: 0, M: 0, S: 0, L: 0};\n}\n\nexport default function formatLocale(locale) {\n  var locale_dateTime = locale.dateTime,\n      locale_date = locale.date,\n      locale_time = locale.time,\n      locale_periods = locale.periods,\n      locale_weekdays = locale.days,\n      locale_shortWeekdays = locale.shortDays,\n      locale_months = locale.months,\n      locale_shortMonths = locale.shortMonths;\n\n  var periodRe = formatRe(locale_periods),\n      periodLookup = formatLookup(locale_periods),\n      weekdayRe = formatRe(locale_weekdays),\n      weekdayLookup = formatLookup(locale_weekdays),\n      shortWeekdayRe = formatRe(locale_shortWeekdays),\n      shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n      monthRe = formatRe(locale_months),\n      monthLookup = formatLookup(locale_months),\n      shortMonthRe = formatRe(locale_shortMonths),\n      shortMonthLookup = formatLookup(locale_shortMonths);\n\n  var formats = {\n    \"a\": formatShortWeekday,\n    \"A\": formatWeekday,\n    \"b\": formatShortMonth,\n    \"B\": formatMonth,\n    \"c\": null,\n    \"d\": formatDayOfMonth,\n    \"e\": formatDayOfMonth,\n    \"f\": formatMicroseconds,\n    \"g\": formatYearISO,\n    \"G\": formatFullYearISO,\n    \"H\": formatHour24,\n    \"I\": formatHour12,\n    \"j\": formatDayOfYear,\n    \"L\": formatMilliseconds,\n    \"m\": formatMonthNumber,\n    \"M\": formatMinutes,\n    \"p\": formatPeriod,\n    \"q\": formatQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatSeconds,\n    \"u\": formatWeekdayNumberMonday,\n    \"U\": formatWeekNumberSunday,\n    \"V\": formatWeekNumberISO,\n    \"w\": formatWeekdayNumberSunday,\n    \"W\": formatWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatYear,\n    \"Y\": formatFullYear,\n    \"Z\": formatZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var utcFormats = {\n    \"a\": formatUTCShortWeekday,\n    \"A\": formatUTCWeekday,\n    \"b\": formatUTCShortMonth,\n    \"B\": formatUTCMonth,\n    \"c\": null,\n    \"d\": formatUTCDayOfMonth,\n    \"e\": formatUTCDayOfMonth,\n    \"f\": formatUTCMicroseconds,\n    \"g\": formatUTCYearISO,\n    \"G\": formatUTCFullYearISO,\n    \"H\": formatUTCHour24,\n    \"I\": formatUTCHour12,\n    \"j\": formatUTCDayOfYear,\n    \"L\": formatUTCMilliseconds,\n    \"m\": formatUTCMonthNumber,\n    \"M\": formatUTCMinutes,\n    \"p\": formatUTCPeriod,\n    \"q\": formatUTCQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatUTCSeconds,\n    \"u\": formatUTCWeekdayNumberMonday,\n    \"U\": formatUTCWeekNumberSunday,\n    \"V\": formatUTCWeekNumberISO,\n    \"w\": formatUTCWeekdayNumberSunday,\n    \"W\": formatUTCWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatUTCYear,\n    \"Y\": formatUTCFullYear,\n    \"Z\": formatUTCZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var parses = {\n    \"a\": parseShortWeekday,\n    \"A\": parseWeekday,\n    \"b\": parseShortMonth,\n    \"B\": parseMonth,\n    \"c\": parseLocaleDateTime,\n    \"d\": parseDayOfMonth,\n    \"e\": parseDayOfMonth,\n    \"f\": parseMicroseconds,\n    \"g\": parseYear,\n    \"G\": parseFullYear,\n    \"H\": parseHour24,\n    \"I\": parseHour24,\n    \"j\": parseDayOfYear,\n    \"L\": parseMilliseconds,\n    \"m\": parseMonthNumber,\n    \"M\": parseMinutes,\n    \"p\": parsePeriod,\n    \"q\": parseQuarter,\n    \"Q\": parseUnixTimestamp,\n    \"s\": parseUnixTimestampSeconds,\n    \"S\": parseSeconds,\n    \"u\": parseWeekdayNumberMonday,\n    \"U\": parseWeekNumberSunday,\n    \"V\": parseWeekNumberISO,\n    \"w\": parseWeekdayNumberSunday,\n    \"W\": parseWeekNumberMonday,\n    \"x\": parseLocaleDate,\n    \"X\": parseLocaleTime,\n    \"y\": parseYear,\n    \"Y\": parseFullYear,\n    \"Z\": parseZone,\n    \"%\": parseLiteralPercent\n  };\n\n  // These recursive directive definitions must be deferred.\n  formats.x = newFormat(locale_date, formats);\n  formats.X = newFormat(locale_time, formats);\n  formats.c = newFormat(locale_dateTime, formats);\n  utcFormats.x = newFormat(locale_date, utcFormats);\n  utcFormats.X = newFormat(locale_time, utcFormats);\n  utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n  function newFormat(specifier, formats) {\n    return function(date) {\n      var string = [],\n          i = -1,\n          j = 0,\n          n = specifier.length,\n          c,\n          pad,\n          format;\n\n      if (!(date instanceof Date)) date = new Date(+date);\n\n      while (++i < n) {\n        if (specifier.charCodeAt(i) === 37) {\n          string.push(specifier.slice(j, i));\n          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n          else pad = c === \"e\" ? \" \" : \"0\";\n          if (format = formats[c]) c = format(date, pad);\n          string.push(c);\n          j = i + 1;\n        }\n      }\n\n      string.push(specifier.slice(j, i));\n      return string.join(\"\");\n    };\n  }\n\n  function newParse(specifier, Z) {\n    return function(string) {\n      var d = newDate(1900, undefined, 1),\n          i = parseSpecifier(d, specifier, string += \"\", 0),\n          week, day;\n      if (i != string.length) return null;\n\n      // If a UNIX timestamp is specified, return it.\n      if (\"Q\" in d) return new Date(d.Q);\n      if (\"s\" in d) return new Date(d.s * 1000 + (\"L\" in d ? d.L : 0));\n\n      // If this is utcParse, never use the local timezone.\n      if (Z && !(\"Z\" in d)) d.Z = 0;\n\n      // The am-pm flag is 0 for AM, and 1 for PM.\n      if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n      // If the month was not specified, inherit from the quarter.\n      if (d.m === undefined) d.m = \"q\" in d ? d.q : 0;\n\n      // Convert day-of-week and week-of-year to day-of-year.\n      if (\"V\" in d) {\n        if (d.V < 1 || d.V > 53) return null;\n        if (!(\"w\" in d)) d.w = 1;\n        if (\"Z\" in d) {\n          week = utcDate(newDate(d.y, 0, 1)), day = week.getUTCDay();\n          week = day > 4 || day === 0 ? utcMonday.ceil(week) : utcMonday(week);\n          week = utcDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getUTCFullYear();\n          d.m = week.getUTCMonth();\n          d.d = week.getUTCDate() + (d.w + 6) % 7;\n        } else {\n          week = localDate(newDate(d.y, 0, 1)), day = week.getDay();\n          week = day > 4 || day === 0 ? timeMonday.ceil(week) : timeMonday(week);\n          week = timeDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getFullYear();\n          d.m = week.getMonth();\n          d.d = week.getDate() + (d.w + 6) % 7;\n        }\n      } else if (\"W\" in d || \"U\" in d) {\n        if (!(\"w\" in d)) d.w = \"u\" in d ? d.u % 7 : \"W\" in d ? 1 : 0;\n        day = \"Z\" in d ? utcDate(newDate(d.y, 0, 1)).getUTCDay() : localDate(newDate(d.y, 0, 1)).getDay();\n        d.m = 0;\n        d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n      }\n\n      // If a time zone is specified, all fields are interpreted as UTC and then\n      // offset according to the specified time zone.\n      if (\"Z\" in d) {\n        d.H += d.Z / 100 | 0;\n        d.M += d.Z % 100;\n        return utcDate(d);\n      }\n\n      // Otherwise, all fields are in local time.\n      return localDate(d);\n    };\n  }\n\n  function parseSpecifier(d, specifier, string, j) {\n    var i = 0,\n        n = specifier.length,\n        m = string.length,\n        c,\n        parse;\n\n    while (i < n) {\n      if (j >= m) return -1;\n      c = specifier.charCodeAt(i++);\n      if (c === 37) {\n        c = specifier.charAt(i++);\n        parse = parses[c in pads ? specifier.charAt(i++) : c];\n        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n      } else if (c != string.charCodeAt(j++)) {\n        return -1;\n      }\n    }\n\n    return j;\n  }\n\n  function parsePeriod(d, string, i) {\n    var n = periodRe.exec(string.slice(i));\n    return n ? (d.p = periodLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseShortWeekday(d, string, i) {\n    var n = shortWeekdayRe.exec(string.slice(i));\n    return n ? (d.w = shortWeekdayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseWeekday(d, string, i) {\n    var n = weekdayRe.exec(string.slice(i));\n    return n ? (d.w = weekdayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseShortMonth(d, string, i) {\n    var n = shortMonthRe.exec(string.slice(i));\n    return n ? (d.m = shortMonthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseMonth(d, string, i) {\n    var n = monthRe.exec(string.slice(i));\n    return n ? (d.m = monthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseLocaleDateTime(d, string, i) {\n    return parseSpecifier(d, locale_dateTime, string, i);\n  }\n\n  function parseLocaleDate(d, string, i) {\n    return parseSpecifier(d, locale_date, string, i);\n  }\n\n  function parseLocaleTime(d, string, i) {\n    return parseSpecifier(d, locale_time, string, i);\n  }\n\n  function formatShortWeekday(d) {\n    return locale_shortWeekdays[d.getDay()];\n  }\n\n  function formatWeekday(d) {\n    return locale_weekdays[d.getDay()];\n  }\n\n  function formatShortMonth(d) {\n    return locale_shortMonths[d.getMonth()];\n  }\n\n  function formatMonth(d) {\n    return locale_months[d.getMonth()];\n  }\n\n  function formatPeriod(d) {\n    return locale_periods[+(d.getHours() >= 12)];\n  }\n\n  function formatQuarter(d) {\n    return 1 + ~~(d.getMonth() / 3);\n  }\n\n  function formatUTCShortWeekday(d) {\n    return locale_shortWeekdays[d.getUTCDay()];\n  }\n\n  function formatUTCWeekday(d) {\n    return locale_weekdays[d.getUTCDay()];\n  }\n\n  function formatUTCShortMonth(d) {\n    return locale_shortMonths[d.getUTCMonth()];\n  }\n\n  function formatUTCMonth(d) {\n    return locale_months[d.getUTCMonth()];\n  }\n\n  function formatUTCPeriod(d) {\n    return locale_periods[+(d.getUTCHours() >= 12)];\n  }\n\n  function formatUTCQuarter(d) {\n    return 1 + ~~(d.getUTCMonth() / 3);\n  }\n\n  return {\n    format: function(specifier) {\n      var f = newFormat(specifier += \"\", formats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    parse: function(specifier) {\n      var p = newParse(specifier += \"\", false);\n      p.toString = function() { return specifier; };\n      return p;\n    },\n    utcFormat: function(specifier) {\n      var f = newFormat(specifier += \"\", utcFormats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    utcParse: function(specifier) {\n      var p = newParse(specifier += \"\", true);\n      p.toString = function() { return specifier; };\n      return p;\n    }\n  };\n}\n\nvar pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"},\n    numberRe = /^\\s*\\d+/, // note: ignores next directive\n    percentRe = /^%/,\n    requoteRe = /[\\\\^$*+?|[\\]().{}]/g;\n\nfunction pad(value, fill, width) {\n  var sign = value < 0 ? \"-\" : \"\",\n      string = (sign ? -value : value) + \"\",\n      length = string.length;\n  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n\nfunction requote(s) {\n  return s.replace(requoteRe, \"\\\\$&\");\n}\n\nfunction formatRe(names) {\n  return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n}\n\nfunction formatLookup(names) {\n  return new Map(names.map((name, i) => [name.toLowerCase(), i]));\n}\n\nfunction parseWeekdayNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.w = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekdayNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.u = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.U = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberISO(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.V = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.W = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseFullYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 4));\n  return n ? (d.y = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n}\n\nfunction parseZone(d, string, i) {\n  var n = /^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(string.slice(i, i + 6));\n  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n}\n\nfunction parseQuarter(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.q = n[0] * 3 - 3, i + n[0].length) : -1;\n}\n\nfunction parseMonthNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n}\n\nfunction parseDayOfMonth(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseDayOfYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseHour24(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.H = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMinutes(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.M = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.S = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMilliseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.L = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMicroseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 6));\n  return n ? (d.L = Math.floor(n[0] / 1000), i + n[0].length) : -1;\n}\n\nfunction parseLiteralPercent(d, string, i) {\n  var n = percentRe.exec(string.slice(i, i + 1));\n  return n ? i + n[0].length : -1;\n}\n\nfunction parseUnixTimestamp(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseUnixTimestampSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.s = +n[0], i + n[0].length) : -1;\n}\n\nfunction formatDayOfMonth(d, p) {\n  return pad(d.getDate(), p, 2);\n}\n\nfunction formatHour24(d, p) {\n  return pad(d.getHours(), p, 2);\n}\n\nfunction formatHour12(d, p) {\n  return pad(d.getHours() % 12 || 12, p, 2);\n}\n\nfunction formatDayOfYear(d, p) {\n  return pad(1 + timeDay.count(timeYear(d), d), p, 3);\n}\n\nfunction formatMilliseconds(d, p) {\n  return pad(d.getMilliseconds(), p, 3);\n}\n\nfunction formatMicroseconds(d, p) {\n  return formatMilliseconds(d, p) + \"000\";\n}\n\nfunction formatMonthNumber(d, p) {\n  return pad(d.getMonth() + 1, p, 2);\n}\n\nfunction formatMinutes(d, p) {\n  return pad(d.getMinutes(), p, 2);\n}\n\nfunction formatSeconds(d, p) {\n  return pad(d.getSeconds(), p, 2);\n}\n\nfunction formatWeekdayNumberMonday(d) {\n  var day = d.getDay();\n  return day === 0 ? 7 : day;\n}\n\nfunction formatWeekNumberSunday(d, p) {\n  return pad(timeSunday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction dISO(d) {\n  var day = d.getDay();\n  return (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n}\n\nfunction formatWeekNumberISO(d, p) {\n  d = dISO(d);\n  return pad(timeThursday.count(timeYear(d), d) + (timeYear(d).getDay() === 4), p, 2);\n}\n\nfunction formatWeekdayNumberSunday(d) {\n  return d.getDay();\n}\n\nfunction formatWeekNumberMonday(d, p) {\n  return pad(timeMonday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction formatYear(d, p) {\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatYearISO(d, p) {\n  d = dISO(d);\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatFullYear(d, p) {\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatFullYearISO(d, p) {\n  var day = d.getDay();\n  d = (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatZone(d) {\n  var z = d.getTimezoneOffset();\n  return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n      + pad(z / 60 | 0, \"0\", 2)\n      + pad(z % 60, \"0\", 2);\n}\n\nfunction formatUTCDayOfMonth(d, p) {\n  return pad(d.getUTCDate(), p, 2);\n}\n\nfunction formatUTCHour24(d, p) {\n  return pad(d.getUTCHours(), p, 2);\n}\n\nfunction formatUTCHour12(d, p) {\n  return pad(d.getUTCHours() % 12 || 12, p, 2);\n}\n\nfunction formatUTCDayOfYear(d, p) {\n  return pad(1 + utcDay.count(utcYear(d), d), p, 3);\n}\n\nfunction formatUTCMilliseconds(d, p) {\n  return pad(d.getUTCMilliseconds(), p, 3);\n}\n\nfunction formatUTCMicroseconds(d, p) {\n  return formatUTCMilliseconds(d, p) + \"000\";\n}\n\nfunction formatUTCMonthNumber(d, p) {\n  return pad(d.getUTCMonth() + 1, p, 2);\n}\n\nfunction formatUTCMinutes(d, p) {\n  return pad(d.getUTCMinutes(), p, 2);\n}\n\nfunction formatUTCSeconds(d, p) {\n  return pad(d.getUTCSeconds(), p, 2);\n}\n\nfunction formatUTCWeekdayNumberMonday(d) {\n  var dow = d.getUTCDay();\n  return dow === 0 ? 7 : dow;\n}\n\nfunction formatUTCWeekNumberSunday(d, p) {\n  return pad(utcSunday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction UTCdISO(d) {\n  var day = d.getUTCDay();\n  return (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n}\n\nfunction formatUTCWeekNumberISO(d, p) {\n  d = UTCdISO(d);\n  return pad(utcThursday.count(utcYear(d), d) + (utcYear(d).getUTCDay() === 4), p, 2);\n}\n\nfunction formatUTCWeekdayNumberSunday(d) {\n  return d.getUTCDay();\n}\n\nfunction formatUTCWeekNumberMonday(d, p) {\n  return pad(utcMonday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction formatUTCYear(d, p) {\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCYearISO(d, p) {\n  d = UTCdISO(d);\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCFullYear(d, p) {\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCFullYearISO(d, p) {\n  var day = d.getUTCDay();\n  d = (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCZone() {\n  return \"+0000\";\n}\n\nfunction formatLiteralPercent() {\n  return \"%\";\n}\n\nfunction formatUnixTimestamp(d) {\n  return +d;\n}\n\nfunction formatUnixTimestampSeconds(d) {\n  return Math.floor(+d / 1000);\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var timeFormat;\nexport var timeParse;\nexport var utcFormat;\nexport var utcParse;\n\ndefaultLocale({\n  dateTime: \"%x, %X\",\n  date: \"%-m/%-d/%Y\",\n  time: \"%-I:%M:%S %p\",\n  periods: [\"AM\", \"PM\"],\n  days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n  shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n  shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  timeFormat = locale.format;\n  timeParse = locale.parse;\n  utcFormat = locale.utcFormat;\n  utcParse = locale.utcParse;\n  return locale;\n}\n","import {timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeTicks, timeTickInterval} from \"d3-time\";\nimport {timeFormat} from \"d3-time-format\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport nice from \"./nice.js\";\n\nfunction date(t) {\n  return new Date(t);\n}\n\nfunction number(t) {\n  return t instanceof Date ? +t : +new Date(+t);\n}\n\nexport function calendar(ticks, tickInterval, year, month, week, day, hour, minute, second, format) {\n  var scale = continuous(),\n      invert = scale.invert,\n      domain = scale.domain;\n\n  var formatMillisecond = format(\".%L\"),\n      formatSecond = format(\":%S\"),\n      formatMinute = format(\"%I:%M\"),\n      formatHour = format(\"%I %p\"),\n      formatDay = format(\"%a %d\"),\n      formatWeek = format(\"%b %d\"),\n      formatMonth = format(\"%B\"),\n      formatYear = format(\"%Y\");\n\n  function tickFormat(date) {\n    return (second(date) < date ? formatMillisecond\n        : minute(date) < date ? formatSecond\n        : hour(date) < date ? formatMinute\n        : day(date) < date ? formatHour\n        : month(date) < date ? (week(date) < date ? formatDay : formatWeek)\n        : year(date) < date ? formatMonth\n        : formatYear)(date);\n  }\n\n  scale.invert = function(y) {\n    return new Date(invert(y));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? domain(Array.from(_, number)) : domain().map(date);\n  };\n\n  scale.ticks = function(interval) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], interval == null ? 10 : interval);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    return specifier == null ? tickFormat : format(specifier);\n  };\n\n  scale.nice = function(interval) {\n    var d = domain();\n    if (!interval || typeof interval.range !== \"function\") interval = tickInterval(d[0], d[d.length - 1], interval == null ? 10 : interval);\n    return interval ? domain(nice(d, interval)) : scale;\n  };\n\n  scale.copy = function() {\n    return copy(scale, calendar(ticks, tickInterval, year, month, week, day, hour, minute, second, format));\n  };\n\n  return scale;\n}\n\nexport default function time() {\n  return initRange.apply(calendar(timeTicks, timeTickInterval, timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeFormat).domain([new Date(2000, 0, 1), new Date(2000, 0, 2)]), arguments);\n}\n","import {utcYear, utcMonth, utcWeek, utcDay, utcHour, utcMinute, utcSecond, utcTicks, utcTickInterval} from \"d3-time\";\nimport {utcFormat} from \"d3-time-format\";\nimport {calendar} from \"./time.js\";\nimport {initRange} from \"./init.js\";\n\nexport default function utcTime() {\n  return initRange.apply(calendar(utcTicks, utcTickInterval, utcYear, utcMonth, utcWeek, utcDay, utcHour, utcMinute, utcSecond, utcFormat).domain([Date.UTC(2000, 0, 1), Date.UTC(2000, 0, 2)]), arguments);\n}\n","import { extent, max, median, min, range as d3Range } from 'd3-array'\nimport { stack, stackOffsetNone } from 'd3-shape'\nimport {\n  scaleLinear,\n  scaleLog,\n  scaleTime,\n  scaleUtc,\n  scaleBand,\n  ScaleTime,\n  ScaleLinear,\n  ScaleBand,\n} from 'd3-scale'\n\nimport {\n  Axis,\n  AxisBand,\n  AxisBandOptions,\n  AxisLinear,\n  AxisLinearOptions,\n  AxisOptions,\n  AxisTime,\n  AxisTimeOptions,\n  BuildAxisOptions,\n  Datum,\n  GridDimensions,\n  ResolvedAxisOptions,\n  Series,\n  StackDatum,\n} from '../types'\n\nfunction defaultAxisOptions<TDatum>(\n  options: BuildAxisOptions<TDatum>\n): ResolvedAxisOptions<AxisOptions<TDatum>> {\n  return {\n    ...options,\n    elementType: options.elementType ?? 'line',\n    minTickPaddingForRotation: options.minTickPaddingForRotation ?? 10,\n    tickLabelRotationDeg: options.tickLabelRotationDeg ?? 60,\n    innerBandPadding: options.innerBandPadding ?? 0.5,\n    outerBandPadding: options.outerBandPadding ?? 0.2,\n    innerSeriesBandPadding: options.innerSeriesBandPadding ?? 0.2,\n    outerSeriesBandPadding: options.outerSeriesBandPadding ?? 0,\n    show: options.show ?? true,\n    stacked: options.stacked ?? false,\n    shouldNice: options.shouldNice ?? true,\n  }\n}\n\nexport default function buildAxisLinear<TDatum>(\n  isPrimary: boolean,\n  userOptions: BuildAxisOptions<TDatum>,\n  series: Series<TDatum>[],\n  allDatums: Datum<TDatum>[],\n  gridDimensions: GridDimensions,\n  width: number,\n  height: number\n): Axis<TDatum> {\n  const options = defaultAxisOptions(userOptions)\n\n  if (!options.position) {\n    throw new Error(`Chart axes must have a valid 'position' property`)\n  }\n\n  const isVertical = ['left', 'right'].indexOf(options.position) > -1\n\n  // Now we need to figure out the range\n  const range: [number, number] = isVertical\n    ? [gridDimensions.height, 0]\n    : [0, gridDimensions.width]\n\n  const outerRange: [number, number] = isVertical ? [height, 0] : [0, width]\n\n  // Give the scale a home\n  return options.scaleType === 'time' || options.scaleType === 'localTime'\n    ? buildTimeAxis(\n      isPrimary,\n      options,\n      series,\n      allDatums,\n      isVertical,\n      range,\n      outerRange\n    )\n    : options.scaleType === 'linear' || options.scaleType === 'log'\n      ? buildLinearAxis(\n        isPrimary,\n        options,\n        series,\n        allDatums,\n        isVertical,\n        range,\n        outerRange\n      )\n      : options.scaleType === 'band'\n        ? buildBandAxis(isPrimary, options, series, isVertical, range, outerRange)\n        : (() => {\n          throw new Error('Invalid scale type')\n        })()\n}\n\nfunction buildTimeAxis<TDatum>(\n  isPrimary: boolean,\n  options: ResolvedAxisOptions<AxisTimeOptions<TDatum>>,\n  series: Series<TDatum>[],\n  allDatums: Datum<TDatum>[],\n  isVertical: boolean,\n  range: [number, number],\n  outerRange: [number, number]\n): AxisTime<TDatum> {\n  const scaleFn = options.scaleType === 'localTime' ? scaleTime : scaleUtc\n\n  let isInvalid = false\n\n  series = isPrimary ? series : series\n    .filter(s => s.secondaryAxisId === options.id)\n\n  allDatums = isPrimary ? allDatums : allDatums.filter(d => d.secondaryAxisId === options.id)\n\n  // Now set the range\n  const scale = scaleFn(range)\n\n  let [minValue, maxValue] = extent(allDatums, datum => {\n    const value = options.getValue(datum.originalDatum)\n    datum[isPrimary ? 'primaryValue' : 'secondaryValue'] = value\n    return value\n  })\n\n  let shouldNice = options.shouldNice\n\n  // see https://stackoverflow.com/a/2831422\n  if (Object.prototype.toString.call(options.min) === '[object Date]') {\n    minValue = min([options.min as Date, minValue as Date])\n    shouldNice = false\n  }\n\n  if (Object.prototype.toString.call(options.max) === '[object Date]') {\n    maxValue = max([options.max as Date, maxValue as Date])\n    shouldNice = false\n  }\n\n  if (Object.prototype.toString.call(options.hardMin) === '[object Date]') {\n    minValue = options.hardMin\n    shouldNice = false\n  }\n\n  if (Object.prototype.toString.call(options.hardMax) === '[object Date]') {\n    maxValue = options.hardMax\n    shouldNice = false\n  }\n\n  if (minValue === undefined || maxValue === undefined) {\n    console.info('Invalid scale min/max', {\n      options,\n      series,\n      range,\n      values: allDatums.map(d =>\n        isPrimary ? d.primaryValue : d.secondaryValue\n      ),\n    })\n    isInvalid = true\n  }\n\n  // Set the domain\n  scale.domain([minValue as Date, maxValue as Date])\n\n  if (options.invert) {\n    scale.domain(Array.from(scale.domain()).reverse())\n  }\n\n  if (shouldNice) {\n    scale.nice()\n  }\n\n  const outerScale = scale.copy().range(outerRange)\n\n  // Supplementary band scale\n  const primaryBandScale = isPrimary\n    ? buildPrimaryBandScale(options, scale, series, range)\n    : undefined\n\n  const seriesBandScale = primaryBandScale\n    ? buildSeriesBandScale(options, primaryBandScale, series)\n    : undefined\n\n  const primaryBandWidth = primaryBandScale?.bandwidth()\n\n  if (options.padBandRange && primaryBandWidth) {\n    const bandStart = scale.invert(0)\n    const bandEnd = scale.invert(primaryBandWidth)\n    const diff = bandEnd.valueOf() - bandStart.valueOf()\n\n    scale.domain([\n      new Date(scale.domain()[0].valueOf() - diff / 2),\n      new Date(scale.domain()[1].valueOf() + diff / 2),\n    ])\n  }\n\n  const defaultFormat = scale.tickFormat()\n\n  const formatters = {} as AxisTime<TDatum>['formatters']\n\n  const scaleFormat = (value: Date) =>\n    options.formatters?.scale?.(value, { ...formatters, scale: undefined }) ??\n    defaultFormat(value)\n\n  const tooltipFormat = (value: Date) =>\n    options.formatters?.tooltip?.(value, {\n      ...formatters,\n      tooltip: undefined,\n    }) ?? scaleFormat(value)\n\n  const cursorFormat = (value: Date) =>\n    options.formatters?.cursor?.(value, { ...formatters, cursor: undefined }) ??\n    tooltipFormat(value)\n\n  Object.assign(formatters, {\n    default: defaultFormat,\n    scale: scaleFormat,\n    tooltip: tooltipFormat,\n    cursor: cursorFormat,\n  })\n\n  return {\n    ...options,\n    isInvalid,\n    axisFamily: 'time',\n    isVertical,\n    scale,\n    range,\n    outerScale,\n    primaryBandScale,\n    seriesBandScale,\n    formatters: formatters,\n  }\n}\n\nfunction buildLinearAxis<TDatum>(\n  isPrimary: boolean,\n  options: ResolvedAxisOptions<AxisLinearOptions<TDatum>>,\n  series: Series<TDatum>[],\n  allDatums: Datum<TDatum>[],\n  isVertical: boolean,\n  range: [number, number],\n  outerRange: [number, number]\n): AxisLinear<TDatum> {\n  const scale = options.scaleType === 'log' ? scaleLog() : scaleLinear()\n\n  let isInvalid = false\n\n  series = isPrimary ? series : series\n    .filter(s => s.secondaryAxisId === options.id)\n\n  allDatums = isPrimary ? allDatums : allDatums.filter(d => d.secondaryAxisId === options.id)\n\n  if (options.stacked) {\n    stackSeries(series, options)\n  }\n\n  let [minValue, maxValue] = options.stacked\n    ? extent(\n      series\n        .map(s =>\n          s.datums.map(datum => {\n            const value = options.getValue(datum.originalDatum)\n            datum[isPrimary ? 'primaryValue' : 'secondaryValue'] = value\n            return datum.stackData ?? []\n          })\n        )\n        .flat(2) as unknown as number[]\n    )\n    : extent(allDatums, datum => {\n      const value = options.getValue(datum.originalDatum)\n      datum[isPrimary ? 'primaryValue' : 'secondaryValue'] = value\n      return value\n    })\n\n  let shouldNice = options.shouldNice\n\n  if (typeof options.min === 'number') {\n    minValue = min([options.min, minValue as number])\n    shouldNice = false\n  }\n\n  if (typeof options.max === 'number') {\n    maxValue = max([options.max, maxValue as number])\n    shouldNice = false\n  }\n\n  if (\n    typeof options.minDomainLength === 'number' &&\n    !(minValue === undefined || maxValue === undefined)\n  ) {\n    const mid = median([minValue, maxValue])!\n    const top = mid + options.minDomainLength / 2\n    const bottom = mid - options.minDomainLength / 2\n    maxValue = Math.max(top, maxValue)\n    minValue = Math.min(bottom, minValue)\n  }\n\n  if (typeof options.hardMin === 'number') {\n    minValue = options.hardMin\n    shouldNice = false\n  }\n\n  if (typeof options.hardMax === 'number') {\n    maxValue = options.hardMax\n    shouldNice = false\n  }\n\n  if (minValue === undefined || maxValue === undefined) {\n    isInvalid = true\n    console.info('Invalid scale min/max', {\n      options,\n      series,\n      range,\n      values: allDatums.map(d =>\n        isPrimary ? d.primaryValue : d.secondaryValue\n      ),\n    })\n    minValue = minValue ?? 0\n    maxValue = maxValue ?? 0\n    // throw new Error('Invalid scale min/max'\n  }\n\n  // Set the domain\n  scale.domain([minValue, maxValue])\n\n  if (options.invert) {\n    scale.domain(Array.from(scale.domain()).reverse())\n  }\n\n  scale.range(range)\n\n  if (shouldNice) {\n    scale.nice()\n  }\n\n  const outerScale = scale.copy().range(outerRange)\n\n  const primaryBandScale = isPrimary\n    ? buildPrimaryBandScale(options, scale, series, range)\n    : undefined\n\n  const seriesBandScale = primaryBandScale\n    ? buildSeriesBandScale(options, primaryBandScale, series)\n    : undefined\n\n  const defaultFormat = scale.tickFormat()\n\n  const formatters = {} as AxisLinear<TDatum>['formatters']\n\n  const scaleFormat = (value: number) =>\n    options.formatters?.scale?.(value, { ...formatters, scale: undefined }) ??\n    defaultFormat(value)\n\n  const tooltipFormat = (value: number) =>\n    options.formatters?.tooltip?.(value, {\n      ...formatters,\n      tooltip: undefined,\n    }) ?? scaleFormat(value)\n\n  const cursorFormat = (value: number) =>\n    options.formatters?.cursor?.(value, { ...formatters, cursor: undefined }) ??\n    tooltipFormat(value)\n\n  Object.assign(formatters, {\n    default: defaultFormat,\n    scale: scaleFormat,\n    tooltip: tooltipFormat,\n    cursor: cursorFormat,\n  })\n\n  return {\n    ...options,\n    isInvalid,\n    axisFamily: 'linear',\n    isVertical,\n    scale,\n    range,\n    outerScale,\n    primaryBandScale,\n    seriesBandScale,\n    formatters,\n  }\n}\n\nfunction buildBandAxis<TDatum>(\n  isPrimary: boolean,\n  options: ResolvedAxisOptions<AxisBandOptions<TDatum>>,\n  series: Series<TDatum>[],\n  isVertical: boolean,\n  range: [number, number],\n  outerRange: [number, number]\n): AxisBand<TDatum> {\n  series = series.filter(d => d.secondaryAxisId === options.id)\n\n  let isInvalid = false\n\n  const domain = Array.from(\n    new Set(\n      series\n        .map(d => d.datums)\n        .flat()\n        .map(datum => {\n          const value = options.getValue(datum.originalDatum)\n          datum[isPrimary ? 'primaryValue' : 'secondaryValue'] = value\n          return value\n        })\n    )\n  )\n\n  const scale = scaleBand(domain, range)\n    .round(false)\n    .paddingOuter(options.outerBandPadding ?? 0)\n    .paddingInner(options.innerBandPadding ?? 0)\n\n  // Invert if necessary\n  if (options.invert) {\n    scale.domain(Array.from(scale.domain()).reverse())\n  }\n\n  const outerScale = scale.copy().range(outerRange)\n\n  const primaryBandScale = scale\n\n  const seriesBandScale = buildSeriesBandScale(\n    options,\n    primaryBandScale,\n    series\n  )\n\n  const defaultFormat = (d: { toString: () => string }) => d\n\n  const formatters = {} as AxisBand<TDatum>['formatters']\n\n  const scaleFormat = (value: number) =>\n    options.formatters?.scale?.(value, { ...formatters, scale: undefined }) ??\n    defaultFormat(value)\n\n  const tooltipFormat = (value: number) =>\n    options.formatters?.tooltip?.(value, {\n      ...formatters,\n      tooltip: undefined,\n    }) ?? scaleFormat(value)\n\n  const cursorFormat = (value: number) =>\n    options.formatters?.cursor?.(value, { ...formatters, cursor: undefined }) ??\n    tooltipFormat(value)\n\n  Object.assign(formatters, {\n    default: defaultFormat,\n    scale: scaleFormat,\n    tooltip: tooltipFormat,\n    cursor: cursorFormat,\n  })\n\n  return {\n    ...options,\n    isInvalid,\n    axisFamily: 'band',\n    isVertical,\n    scale,\n    range,\n    outerScale,\n    formatters,\n    primaryBandScale,\n    seriesBandScale,\n  }\n}\n\n//\n\nfunction stackSeries<TDatum>(\n  series: Series<TDatum>[],\n  axisOptions: AxisOptions<TDatum>\n) {\n  const seriesIndices = Object.keys(series)\n  const stacker = stack()\n    .keys(seriesIndices)\n    .value((_, seriesIndex, index) => {\n      const originalDatum =\n        series[Number(seriesIndex)]?.datums[index]?.originalDatum\n\n      const val =\n        typeof originalDatum !== 'undefined'\n          ? axisOptions.getValue(originalDatum)\n          : 0\n\n      if (typeof val === 'undefined' || val === null) {\n        return 0\n      }\n\n      return val\n    })\n    .offset(axisOptions.stackOffset ?? stackOffsetNone)\n\n  const stacked = stacker(\n    Array.from({\n      length: series.sort((a, b) => b.datums.length - a.datums.length)[0]\n        .datums.length,\n    })\n  )\n\n  for (let sIndex = 0; sIndex < stacked.length; sIndex++) {\n    const s = stacked[sIndex]\n\n    for (let i = 0; i < s.length; i++) {\n      const datum = s[i]\n\n      if (series[sIndex].datums[i]) {\n        // @ts-ignore\n        datum.data = series[sIndex].datums[i]\n\n        series[sIndex].datums[i].stackData =\n          datum as unknown as StackDatum<TDatum>\n      }\n    }\n  }\n}\n\nfunction buildPrimaryBandScale<TDatum>(\n  options: ResolvedAxisOptions<AxisOptions<TDatum>>,\n  scale: ScaleTime<number, number, never> | ScaleLinear<number, number, never>,\n  series: Series<TDatum>[],\n  range: [number, number]\n) {\n  // Find the two closest points along axis\n\n  let impliedBandWidth: number = Math.max(...range)\n\n  for (let i = 0; i < series.length; i++) {\n    const serie = series[i]\n\n    for (let j = 0; j < serie.datums.length; j++) {\n      const d1 = serie.datums[j]\n      const one = scale(d1.primaryValue ?? NaN)\n\n      for (let k = 0; k < serie.datums.length; k++) {\n        const d2 = serie.datums[k]\n        const two = scale(d2.primaryValue ?? NaN)\n\n        if (one === two) {\n          continue\n        }\n\n        const diff = Math.abs(Math.max(one, two) - Math.min(one, two))\n\n        if (diff < impliedBandWidth) {\n          impliedBandWidth = diff\n        }\n      }\n    }\n  }\n\n  const bandRange = Math.max(...range)\n\n  const bandDomain = d3Range(bandRange / impliedBandWidth)\n\n  const primaryBandScale = scaleBand(bandDomain, range)\n    .round(false)\n    .paddingOuter(options.outerBandPadding ?? 0)\n    .paddingInner(options.innerBandPadding ?? 0)\n\n  return primaryBandScale\n}\n\nfunction buildSeriesBandScale<TDatum>(\n  options: ResolvedAxisOptions<AxisOptions<TDatum>>,\n  primaryBandScale: ScaleBand<number>,\n  series: Series<TDatum>[]\n) {\n  const bandDomain = d3Range(series.length)\n\n  const seriesBandScale = scaleBand(bandDomain, [\n    0,\n    primaryBandScale.bandwidth(),\n  ])\n    .round(false)\n    .paddingOuter(\n      options.outerSeriesBandPadding ??\n      (options.outerBandPadding ? options.outerBandPadding / 2 : 0)\n    )\n    .paddingInner(\n      options.innerSeriesBandPadding ??\n      (options.innerBandPadding ? options.innerBandPadding / 2 : 0)\n    )\n\n  const scale = (seriesIndex: number) =>\n    seriesBandScale(series.find(d => d.index === seriesIndex)!?.indexPerAxis)\n\n  return Object.assign(scale, seriesBandScale)\n}\n","import quantile from \"./quantile.js\";\n\nexport default function(values, valueof) {\n  return quantile(values, 0.5, valueof);\n}\n","import React, { MutableRefObject } from 'react'\n\nimport useIsomorphicLayoutEffect from '../hooks/useIsomorphicLayoutEffect'\nimport { Axis, AxisDimension, GridDimensions, Position } from '../types'\nimport useChartContext from '../utils/chartContext'\n\nconst getElBox = (el: Element) => {\n  var rect = el.getBoundingClientRect()\n  return {\n    top: Math.round(rect.top),\n    right: Math.round(rect.right),\n    bottom: Math.round(rect.bottom),\n    left: Math.round(rect.left),\n    width: Math.round(rect.width),\n    height: Math.round(rect.height),\n    x: Math.round(rect.x),\n    y: Math.round(rect.y),\n  }\n}\n\nexport default function useMeasure<TDatum>({\n  axis,\n  elRef,\n  gridDimensions,\n  setShowRotated,\n}: {\n  axis: Axis<TDatum>\n  elRef: MutableRefObject<SVGGElement | null>\n  gridDimensions: GridDimensions\n  showRotated: boolean\n  setShowRotated: (value: boolean) => void\n}) {\n  const { axisDimensionsState } = useChartContext<TDatum>()\n\n  const [axisDimensions, setAxisDimensions] = axisDimensionsState\n\n  const axisDimension = React.useMemo(() => {\n    return axisDimensions[axis.position as Position]?.[axis.id!]\n  }, [axisDimensions, axis.position, axis.id])\n\n  // const isLooping = useIsLooping()\n\n  const measureRotation = React.useCallback(() => {\n    if (!elRef.current) {\n      return\n    }\n\n    let gridSize = !axis.isVertical\n      ? gridDimensions.width\n      : gridDimensions.height\n\n    const staticLabelDims = Array.from(\n      elRef.current.querySelectorAll('.Axis-Group.outer .tickLabel')\n    ).map(el => getElBox(el))\n\n    // Determine the largest labels on the axis\n    let widestLabel: typeof staticLabelDims[number] | undefined\n\n    staticLabelDims.forEach(label => {\n      let resolvedLabel = widestLabel ?? { width: 0 }\n      if (label.width > 0 && label.width > resolvedLabel.width) {\n        widestLabel = label\n      }\n    })\n\n    let smallestTickGap = gridSize\n\n    if (staticLabelDims.length > 1) {\n      staticLabelDims.forEach((current, i) => {\n        const prev = staticLabelDims[i - 1]\n\n        if (prev) {\n          smallestTickGap = Math.min(\n            smallestTickGap,\n            axis.isVertical ? current.top - prev.top : current.left - prev.left\n          )\n        }\n      })\n    }\n\n    const shouldRotate =\n      (widestLabel?.width || 0) + axis.minTickPaddingForRotation >\n      smallestTickGap\n\n    // if (!isLooping) {\n    // Rotate ticks for non-time horizontal axes\n    if (!axis.isVertical) {\n      setShowRotated(shouldRotate)\n    }\n    // }\n  }, [\n    elRef,\n    axis.isVertical,\n    axis.minTickPaddingForRotation,\n    gridDimensions.width,\n    gridDimensions.height,\n    setShowRotated,\n  ])\n\n  const measureDimensions = React.useCallback(() => {\n    if (!elRef.current) {\n      if (axisDimension) {\n        // If the entire axis is hidden, then we need to remove the axis dimensions\n        setAxisDimensions(old => {\n          const newAxes = { ...(old[axis.position] ?? {}) }\n\n          delete newAxes[axis.id!]\n\n          return {\n            ...old,\n            [axis.position]: newAxes,\n          }\n        })\n      }\n      return\n    }\n\n    const newDimensions: AxisDimension = {\n      width: 0,\n      height: 0,\n      paddingTop: 0,\n      paddingBottom: 0,\n      paddingLeft: 0,\n      paddingRight: 0,\n    }\n\n    const currentEl = elRef.current\n\n    const axisEl = currentEl.querySelector(`.Axis-Group.inner .domainAndTicks`)\n    const domainEl = currentEl.querySelector(`.Axis-Group.inner .domain`)\n\n    if (!axisEl || !domainEl) {\n      return\n    }\n\n    const axisDims = getElBox(axisEl)\n    const domainDims = getElBox(domainEl)\n\n    if (!axisDims || !domainDims) {\n      return\n    }\n\n    // Axis overflow measurements\n    if (!axis.isVertical) {\n      newDimensions.paddingLeft = Math.round(\n        Math.max(0, domainDims.left - axisDims?.left)\n      )\n\n      newDimensions.paddingRight = Math.round(\n        Math.max(0, axisDims?.right - domainDims.right)\n      )\n\n      newDimensions.height = axisDims?.height\n    } else {\n      newDimensions.paddingTop = Math.round(\n        Math.max(0, domainDims.top - axisDims?.top)\n      )\n\n      newDimensions.paddingBottom = Math.round(\n        Math.max(0, axisDims?.bottom - domainDims.bottom)\n      )\n\n      newDimensions.width = axisDims?.width\n    }\n\n    // Only update the axisDimensions if something has changed\n    if (\n      // !isLooping &&\n      !axisDimensions ||\n      !axisDimension ||\n      Object.keys(newDimensions).some(key => {\n        // @ts-ignore\n        return newDimensions[key] !== axisDimension[key]\n      })\n    ) {\n      setAxisDimensions(old => ({\n        ...old,\n        [axis.position]: {\n          ...(old[axis.position] ?? {}),\n          [axis.id!]: newDimensions,\n        },\n      }))\n    }\n  }, [\n    axis.id,\n    axis.isVertical,\n    axis.position,\n    axisDimension,\n    axisDimensions,\n    elRef,\n    setAxisDimensions,\n  ])\n\n  // Measure after if needed\n  useIsomorphicLayoutEffect(() => {\n    // setTimeout(() => {\n    window.requestAnimationFrame(() => {\n      measureRotation()\n      measureDimensions()\n    })\n  }, [measureRotation])\n\n  // useIsomorphicLayoutEffect(() => {\n  //   // setTimeout(() => {\n  //   window.requestAnimationFrame(() => {\n  //   })\n  // }, [measureRotation])\n}\n","import React from 'react'\n\nimport { Axis, AxisLinear } from '../types'\nimport { translate } from '../utils/Utils'\nimport useChartContext from '../utils/chartContext'\n//\nimport useMeasure from './AxisLinear.useMeasure'\n\nexport default function AxisLinearComp<TDatum>(axis: Axis<TDatum>) {\n  const [showRotated, setShowRotated] = React.useState(false)\n  const { getOptions, gridDimensions, width, height } =\n    useChartContext<TDatum>()\n\n  const { dark, showDebugAxes } = getOptions()\n\n  const elRef = React.useRef<SVGGElement>(null)\n\n  useMeasure({\n    axis,\n    elRef,\n    gridDimensions,\n    showRotated,\n    setShowRotated,\n  })\n\n  const renderAxis = (isOuter: boolean) => {\n    const isRotated = !isOuter && showRotated\n\n    const scale = isOuter ? axis.outerScale : axis.scale\n    const [rangeStart, rangeEnd] = scale.range()\n\n    const getTicks = () => {\n      const anyAxis = axis as AxisLinear<TDatum>\n\n      if ((anyAxis as AxisLinear<TDatum>).outerScale.ticks!) {\n        if (typeof anyAxis.tickCount === 'number') {\n          return anyAxis.outerScale.ticks(anyAxis.tickCount)\n        }\n\n        const autoSpacing = anyAxis.isVertical ? 40 : 80\n        const range = anyAxis.outerScale.range()\n        const num = Math.abs(range[1] - range[0]) / autoSpacing\n\n        return anyAxis.outerScale.ticks(num)\n      }\n\n      return anyAxis.outerScale.domain()\n    }\n\n    const resolvedHeight = isOuter ? height : gridDimensions.height\n    const resolvedWidth = isOuter ? width : gridDimensions.width\n\n    const [lineFrom, lineTo] =\n      axis.position === 'left'\n        ? [\n            { x: 0, y: rangeStart },\n            { x: 0, y: rangeEnd },\n          ]\n        : axis.position === 'right'\n        ? [\n            { x: resolvedWidth, y: rangeStart },\n            { x: resolvedWidth, y: rangeEnd },\n          ]\n        : axis.position === 'top'\n        ? [\n            { x: rangeStart, y: 0 },\n            { x: rangeEnd, y: 0 },\n          ]\n        : [\n            { x: rangeStart, y: resolvedHeight },\n            { x: rangeEnd, y: resolvedHeight },\n          ]\n\n    const ticks = getTicks().map(tick => {\n      const px = getTickPx(scale, tick)\n\n      const [from, to, gridTo] =\n        axis.position === 'left'\n          ? [\n              { x: 0, y: px },\n              { x: -8, y: px },\n              { x: resolvedWidth, y: px },\n            ]\n          : axis.position === 'right'\n          ? [\n              { x: resolvedWidth, y: px },\n              { x: resolvedWidth + 8, y: px },\n              { x: 0, y: px },\n            ]\n          : axis.position === 'top'\n          ? [\n              { x: px, y: 0 },\n              { x: px, y: -8 },\n              { x: px, y: resolvedHeight },\n            ]\n          : [\n              { x: px, y: resolvedHeight },\n              { x: px, y: resolvedHeight + 8 },\n              { x: px, y: 0 },\n            ]\n\n      return {\n        value: tick,\n        from,\n        to,\n        gridTo,\n      }\n    })\n\n    return (\n      <g\n        key={`Axis-Group ${isOuter ? 'outer' : 'inner'}`}\n        className={`Axis-Group ${isOuter ? 'outer' : 'inner'}`}\n        style={{\n          transform: isOuter\n            ? undefined\n            : translate(gridDimensions.left, gridDimensions.top),\n        }}\n      >\n        <g\n          className={`Axis`}\n          style={{\n            ...(isOuter\n              ? {\n                  opacity: showDebugAxes ? 0.5 : 0,\n                  pointerEvents: 'none',\n                }\n              : {\n                  opacity: 1,\n                  pointerEvents: 'all',\n                }),\n          }}\n        >\n          <g className=\"domainAndTicks\">\n            <line\n              className=\"domain\"\n              x1={lineFrom.x}\n              y1={lineFrom.y}\n              x2={lineTo.x}\n              y2={lineTo.y}\n              stroke={dark ? 'rgba(255,255,255, .2)' : 'rgba(0,0,0, .2)'}\n            />\n            {ticks.map((tick, i) => {\n              let { x: tickLabelX, y: tickLabelY } = tick.to\n\n              if (axis.position === 'top') {\n                tickLabelY -= 5\n              } else if (axis.position === 'bottom') {\n                tickLabelY += 5\n              } else if (axis.position === 'left') {\n                tickLabelX -= 5\n              } else if (axis.position === 'right') {\n                tickLabelX += 5\n              }\n\n              return (\n                <g key={`vx-tick-${tick}-${i}`} className={'tick'}>\n                  {!isOuter ? (\n                    <line\n                      x1={tick.from.x}\n                      y1={tick.from.y}\n                      x2={tick.to.x}\n                      y2={tick.to.y}\n                      stroke={\n                        dark ? 'rgba(255,255,255, .2)' : 'rgba(0,0,0, .2)'\n                      }\n                    />\n                  ) : null}\n                  <text\n                    className=\"tickLabel\"\n                    style={{\n                      fontSize: 10,\n                      fill: dark ? 'rgba(255,255,255, .7)' : 'rgba(0,0,0, .7)',\n                      dominantBaseline: isRotated\n                        ? 'central'\n                        : axis.position === 'bottom'\n                        ? 'hanging'\n                        : axis.position === 'top'\n                        ? 'alphabetic'\n                        : 'central',\n                      textAnchor: isRotated\n                        ? 'end'\n                        : axis.position === 'right'\n                        ? 'start'\n                        : axis.position === 'left'\n                        ? 'end'\n                        : 'middle',\n                    }}\n                    transform={`translate(${tickLabelX}, ${tickLabelY}) rotate(${\n                      isRotated ? (axis.position === 'top' ? 60 : -60) : 0\n                    })`}\n                  >\n                    {(axis as AxisLinear<any>).formatters.scale(\n                      tick.value as number\n                    )}\n                  </text>\n                </g>\n              )\n            })}\n          </g>\n          <g className=\"grid\">\n            {ticks.map((tick, i) => {\n              return (\n                <g key={`vx-tick-${tick}-${i}`} className={'tick'}>\n                  {(axis.showGrid ?? true) && !isOuter ? (\n                    <line\n                      x1={tick.from.x}\n                      y1={tick.from.y}\n                      x2={tick.gridTo.x}\n                      y2={tick.gridTo.y}\n                      stroke={\n                        dark ? 'rgba(255,255,255, .05)' : 'rgba(0,0,0, .05)'\n                      }\n                    />\n                  ) : null}\n                </g>\n              )\n            })}\n          </g>\n        </g>\n      </g>\n    )\n  }\n\n  return axis.show ? (\n    <g ref={elRef}>\n      {renderAxis(false)}\n      {renderAxis(true)}\n    </g>\n  ) : null\n}\n\nfunction getTickPx<TDatum>(scale: Axis<TDatum>['scale'], value: any) {\n  let px = scale(value) ?? NaN\n\n  // @ts-ignore\n  if (scale.bandwidth) {\n    // @ts-ignore\n    return px + scale.bandwidth() / 2\n  }\n\n  return px\n}\n","import React from 'react'\n\nimport useIsomorphicLayoutEffect from './useIsomorphicLayoutEffect'\n\nexport default function usePrevious<T>(val: T) {\n  const ref = React.useRef<T>()\n\n  useIsomorphicLayoutEffect(() => {\n    ref.current = val\n  }, [val])\n\n  return ref.current\n}\n","import React from 'react'\n\nexport default function useLatestWhen<T>(obj: T, when: boolean = true) {\n  const ref = React.useRef<T | null>(when ? obj : null)\n\n  if (when) {\n    ref.current = obj\n  }\n\n  return ref.current\n}\n","import * as React from 'react'\n\nimport useIsomorphicLayoutEffect from './useIsomorphicLayoutEffect'\n\nexport default function usePortalElement() {\n  const [portalEl, setPortalEl] = React.useState<HTMLDivElement | null>()\n\n  useIsomorphicLayoutEffect(() => {\n    if (!portalEl) {\n      let element = document.getElementById(\n        'react-charts-portal'\n      ) as HTMLDivElement\n\n      if (!element) {\n        element = document.createElement('div')\n\n        element.setAttribute('id', 'react-charts-portal')\n\n        Object.assign(element.style, {\n          pointerEvents: 'none',\n          position: 'fixed',\n          left: 0,\n          right: 0,\n          top: 0,\n          bottom: 0,\n          'z-index': 99999999999,\n        })\n\n        document.body.append(element)\n      }\n\n      setPortalEl(element)\n    }\n  })\n\n  return portalEl\n}\n","var props = [\"bottom\", \"height\", \"left\", \"right\", \"top\", \"width\"];\n\nvar rectChanged = function rectChanged(a, b) {\n  if (a === void 0) {\n    a = {};\n  }\n\n  if (b === void 0) {\n    b = {};\n  }\n\n  return props.some(function (prop) {\n    return a[prop] !== b[prop];\n  });\n};\n\nvar observedNodes = /*#__PURE__*/new Map();\nvar rafId;\n\nvar run = function run() {\n  var changedStates = [];\n  observedNodes.forEach(function (state, node) {\n    var newRect = node.getBoundingClientRect();\n\n    if (rectChanged(newRect, state.rect)) {\n      state.rect = newRect;\n      changedStates.push(state);\n    }\n  });\n  changedStates.forEach(function (state) {\n    state.callbacks.forEach(function (cb) {\n      return cb(state.rect);\n    });\n  });\n  rafId = window.requestAnimationFrame(run);\n};\n\nfunction observeRect(node, cb) {\n  return {\n    observe: function observe() {\n      var wasEmpty = observedNodes.size === 0;\n\n      if (observedNodes.has(node)) {\n        observedNodes.get(node).callbacks.push(cb);\n      } else {\n        observedNodes.set(node, {\n          rect: undefined,\n          hasRectChanged: false,\n          callbacks: [cb]\n        });\n      }\n\n      if (wasEmpty) run();\n    },\n    unobserve: function unobserve() {\n      var state = observedNodes.get(node);\n\n      if (state) {\n        // Remove the callback\n        var index = state.callbacks.indexOf(cb);\n        if (index >= 0) state.callbacks.splice(index, 1); // Remove the node reference\n\n        if (!state.callbacks.length) observedNodes[\"delete\"](node); // Stop the loop\n\n        if (!observedNodes.size) cancelAnimationFrame(rafId);\n      }\n    }\n  };\n}\n\nexport default observeRect;\n//# sourceMappingURL=observe-rect.esm.js.map\n","import observeRect from '@reach/observe-rect'\nimport React from 'react'\n\nimport useIsomorphicLayoutEffect from './useIsomorphicLayoutEffect'\n\nexport type HasBoundingClientRect = {\n  getBoundingClientRect: () => DOMRect\n}\n\nexport default function useRect(\n  node: HasBoundingClientRect | null | undefined,\n  enabled: boolean\n) {\n  const [element, setElement] = React.useState(node)\n\n  let [rect, setRect] = React.useState<DOMRect>({\n    width: 0,\n    height: 0,\n  } as DOMRect)\n\n  const rectRef = React.useRef(rect)\n\n  rectRef.current = rect\n\n  useIsomorphicLayoutEffect(() => {\n    if (node !== element) {\n      setElement(node)\n    }\n  })\n\n  useIsomorphicLayoutEffect(() => {\n    if (enabled && element) {\n      setRect(element.getBoundingClientRect())\n    }\n  }, [element, enabled])\n\n  React.useEffect(() => {\n    if (!element || !enabled) {\n      return\n    }\n\n    const observer = observeRect(element as Element, (newRect: DOMRect) => {\n      setRect(newRect)\n    })\n\n    observer.observe()\n\n    return () => {\n      observer.unobserve()\n    }\n  }, [element, enabled])\n\n  // const resolvedRect = React.useMemo(() => {\n  //   if (!element || !(element as Element).tagName) {\n  //     return rect\n  //   }\n\n  //   const styles = window.getComputedStyle(element as Element)\n\n  //   return {\n  //     x: rect.x,\n  //     y: rect.y,\n  //     width:\n  //       rect.width -\n  //       parseInt(styles.borderLeftWidth) -\n  //       parseInt(styles.borderRightWidth),\n  //     height:\n  //       rect.height -\n  //       parseInt(styles.borderTopWidth) -\n  //       parseInt(styles.borderBottomWidth),\n  //     top: rect.top,\n  //     right: rect.right,\n  //     bottom: rect.bottom,\n  //     left: rect.left,\n  //   }\n  // }, [element, rect])\n\n  return rect\n}\n","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","// Super fast physics simulations for JavaScript\n// Copyright 2014 Ralph Thomas\n// Licensed under the Apache License, Version 2.0\n// https://github.com/iamralpht/gravitas.js\n\n// Adapted to TypeScript and customized by Tanner Linsley (@tannerlinsley)\n\ntype Solution = {\n  x: (num: number) => number\n  dx: (num: number) => number\n}\n\nconst epsilon = 0.001\n\nfunction almostEqual(a: number, b: number) {\n  if (Number.isNaN(a) && Number.isNaN(b)) {\n    return true\n  }\n  return a > b - epsilon && a < b + epsilon\n}\n\nfunction almostZero(a: number) {\n  return almostEqual(a, 0)\n}\n\nexport class Spring {\n  private _m: number\n  private _k: number\n  private _c: number\n  private _solution: null | Solution\n  private _startTime: number\n  endPosition: number\n\n  constructor(\n    init: number,\n    mass: number,\n    springConstant: number,\n    damping: number\n  ) {\n    this._m = mass\n    this._k = springConstant\n    this._c = damping\n    this._solution = null\n    this.endPosition = init\n    this._startTime = 0\n  }\n\n  x(dt?: number) {\n    if (dt === undefined) {\n      dt = (new Date().getTime() - this._startTime) / 1000.0\n    }\n    return this._solution\n      ? this.endPosition + this._solution.x(dt)\n      : this.endPosition\n  }\n\n  private dx(dt?: number) {\n    if (dt === undefined) {\n      dt = (new Date().getTime() - this._startTime) / 1000.0\n    }\n    return this._solution ? this._solution.dx(dt) : 0\n  }\n\n  setEnd(x: number) {\n    const t = new Date().getTime()\n\n    let velocity = 0\n    let position = this.endPosition\n    if (this._solution) {\n      // Don't whack incoming velocity.\n      if (almostZero(velocity))\n        velocity = this._solution.dx((t - this._startTime) / 1000.0)\n      position = this._solution.x((t - this._startTime) / 1000.0)\n      if (almostZero(velocity)) velocity = 0\n      if (almostZero(position)) position = 0\n      position += this.endPosition\n    }\n    if (this._solution && almostZero(position - x) && almostZero(velocity)) {\n      return\n    }\n    this.endPosition = x\n    this._solution = this._solve(position - this.endPosition, velocity)\n    this._startTime = t\n  }\n\n  snap(x: number) {\n    this._startTime = new Date().getTime()\n    this.endPosition = x\n    this._solution = {\n      x() {\n        return 0\n      },\n      dx() {\n        return 0\n      },\n    }\n  }\n\n  done() {\n    return almostEqual(this.x(), this.endPosition) && almostZero(this.dx())\n  }\n\n  // reconfigure(mass: number, springConstant: number, damping: number) {\n  //   this._m = mass\n  //   this._k = springConstant\n  //   this._c = damping\n\n  //   if (this.done()) {\n  //     return\n  //   }\n  //   this._solution = this._solve(this.x() - this.endPosition, this.dx())\n  //   this._startTime = new Date().getTime()\n  // }\n\n  // springConstant() {\n  //   return this._k\n  // }\n\n  // damping() {\n  //   return this._c\n  // }\n\n  private _solve(initial: number, velocity: number): Solution {\n    const c = this._c\n    const m = this._m\n    const k = this._k\n    // Solve the quadratic equation; root = (-c +/- sqrt(c^2 - 4mk)) / 2m.\n    const cmk = c * c - 4 * m * k\n    if (cmk === 0) {\n      // The spring is critically damped.\n      // x = (c1 + c2*t) * e ^(-c/2m)*t\n      const r = -c / (2 * m)\n      const c1 = initial\n      const c2 = velocity / (r * initial)\n      return {\n        x(t) {\n          return (c1 + c2 * t) * Math.pow(Math.E, r * t)\n        },\n        dx(t) {\n          const pow = Math.pow(Math.E, r * t)\n          return r * (c1 + c2 * t) * pow + c2 * pow\n        },\n      }\n    } else if (cmk > 0) {\n      // The spring is overdamped; no bounces.\n      // x = c1*e^(r1*t) + c2*e^(r2t)\n      // Need to find r1 and r2, the roots, then solve c1 and c2.\n      const r1 = (-c - Math.sqrt(cmk)) / (2 * m)\n      const r2 = (-c + Math.sqrt(cmk)) / (2 * m)\n      const c2 = (velocity - r1 * initial) / (r2 - r1)\n      const c1 = initial - c2\n\n      return {\n        x(t) {\n          return c1 * Math.pow(Math.E, r1 * t) + c2 * Math.pow(Math.E, r2 * t)\n        },\n        dx(t) {\n          return (\n            c1 * r1 * Math.pow(Math.E, r1 * t) +\n            c2 * r2 * Math.pow(Math.E, r2 * t)\n          )\n        },\n      }\n    } else {\n      // The spring is underdamped, it has imaginary roots.\n      // r = -(c / 2*m) +- w*i\n      // w = sqrt(4mk - c^2) / 2m\n      // x = (e^-(c/2m)t) * (c1 * cos(wt) + c2 * sin(wt))\n      const w = Math.sqrt(4 * m * k - c * c) / (2 * m)\n      const r = -((c / 2) * m)\n      const c1 = initial\n      const c2 = (velocity - r * initial) / w\n\n      return {\n        x(t) {\n          return (\n            Math.pow(Math.E, r * t) *\n            (c1 * Math.cos(w * t) + c2 * Math.sin(w * t))\n          )\n        },\n        dx(t) {\n          const power = Math.pow(Math.E, r * t)\n          const cos = Math.cos(w * t)\n          const sin = Math.sin(w * t)\n          return (\n            power * (c2 * w * cos - c1 * w * sin) +\n            r * power * (c2 * sin + c1 * cos)\n          )\n        },\n      }\n    }\n  }\n}\n","import React from 'react'\nimport { Spring } from '../utils/spring'\nimport useGetLatest from './useGetLatest'\n\nexport function useSpring(\n  value: number,\n  config: [number, number, number],\n  cb: (x: number) => void,\n  immediate?: boolean,\n  debug?: boolean\n) {\n  const springRef = React.useRef(new Spring(value, ...config))\n  const getValue = useGetLatest(value)\n\n  const [startRaf, stopRaf] = useRaf(() => {\n    cb(springRef.current.x())\n    return springRef.current.done()\n  })\n\n  // Immediate\n  React.useEffect(() => {\n    if (immediate) {\n      springRef.current.snap(getValue())\n      startRaf()\n      return\n    }\n    springRef.current.setEnd(value)\n    startRaf()\n  }, [debug, getValue, immediate, startRaf, stopRaf, value])\n\n  React.useEffect(() => {\n    return () => {\n      stopRaf()\n    }\n  }, [stopRaf])\n\n  return springRef.current\n}\n\nexport function useRaf(callback: () => any) {\n  const raf = React.useRef<number | null>(null)\n  const rafCallback = React.useRef(callback)\n  rafCallback.current = callback\n  const tick = React.useCallback(() => {\n    if (rafCallback.current()) return\n    raf.current = requestAnimationFrame(tick)\n  }, [])\n\n  return [\n    React.useMemo(() => tick, [tick]),\n    React.useMemo(\n      () => () => raf.current && cancelAnimationFrame(raf.current),\n      []\n    ),\n  ]\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport * as TSTB from 'ts-toolbelt'\n\nimport usePrevious from '../hooks/usePrevious'\nimport useLatestWhen from '../hooks/useLatestWhen'\nimport usePortalElement from '../hooks/usePortalElement'\nimport { AxisTime, CursorOptions, Datum } from '../types'\nimport { translate } from '../utils/Utils'\n//\nimport useChartContext from '../utils/chartContext'\nimport useRect from '../hooks/useRect'\nimport { useSpring } from '../hooks/useSpring'\nimport useGetLatest from '../hooks/useGetLatest'\n\ntype ResolvedCursorOptions = TSTB.Object.Required<\n  CursorOptions,\n  'show' | 'showLine' | 'showLabel'\n>\n\n//\n\nconst getLineBackgroundColor = (dark: boolean, bandWidth: number) =>\n  dark\n    ? `rgba(255,255,255,${bandWidth > 4 ? 0.15 : 0.3})`\n    : `rgba(0, 26, 39, ${bandWidth > 4 ? 0.15 : 0.3})`\n\nconst getBackgroundColor = (dark?: boolean) =>\n  dark ? 'rgba(255,255,255,.9)' : 'rgba(0, 26, 39, 0.9)'\n\nfunction defaultCursor(options: CursorOptions): ResolvedCursorOptions {\n  return {\n    ...options,\n    show: options.show ?? true,\n    showLine: options.showLine ?? true,\n    showLabel: options.showLabel ?? true,\n  }\n}\n\nexport default function Cursors<TDatum>() {\n  const { getOptions } = useChartContext<TDatum>()\n\n  let primaryOptions = getOptions().primaryCursor ?? true\n  let secondaryOptions = getOptions().secondaryCursor ?? true\n\n  const resolvedPrimaryOptions = React.useMemo(\n    () =>\n      defaultCursor(\n        !primaryOptions\n          ? { show: false }\n          : typeof primaryOptions === 'boolean'\n          ? {}\n          : primaryOptions\n      ),\n    [primaryOptions]\n  )\n\n  const resolvedSecondaryOptions = React.useMemo(\n    () =>\n      defaultCursor(\n        !secondaryOptions\n          ? { show: false }\n          : typeof secondaryOptions === 'boolean'\n          ? {}\n          : secondaryOptions\n      ),\n    [secondaryOptions]\n  )\n\n  return (\n    <>\n      <Cursor primary options={resolvedPrimaryOptions} />\n      <Cursor options={resolvedSecondaryOptions} />\n    </>\n  )\n}\n\nfunction Cursor<TDatum>(props: {\n  primary?: boolean\n  options: ResolvedCursorOptions\n}) {\n  const {\n    getOptions,\n    svgRef,\n    gridDimensions,\n    focusedDatumState,\n    primaryAxis,\n    secondaryAxes,\n  } = useChartContext<TDatum>()\n\n  const getTooltipOptions = useGetLatest(props.options)\n\n  const [focusedDatum] = focusedDatumState\n  const latestFocusedDatum = useLatestWhen(focusedDatum, !!focusedDatum)\n\n  const secondaryAxis =\n    secondaryAxes.find(d => d.id === latestFocusedDatum?.secondaryAxisId) ??\n    secondaryAxes[0]\n\n  const axis = props.primary ? primaryAxis : secondaryAxis\n\n  const siblingAxis = props.primary ? secondaryAxis : primaryAxis\n\n  const resolveValue = (d: Datum<TDatum> | null) =>\n    d\n      ? axis.stacked\n        ? d.stackData?.[1]\n        : props.primary\n        ? d.primaryValue\n        : d.secondaryValue\n      : undefined\n\n  const datumValue = resolveValue(focusedDatum)\n\n  React.useEffect(() => {\n    getTooltipOptions()?.onChange?.(datumValue)\n  }, [getTooltipOptions, datumValue])\n\n  const value = props.options.value ?? datumValue\n\n  const latestPropsValue = useLatestWhen(\n    props.options.value,\n    props.options.value != null\n  )\n\n  const latestDatumValue = useLatestWhen(\n    resolveValue(latestFocusedDatum),\n    resolveValue(latestFocusedDatum) != null\n  )\n\n  const latestValue = latestPropsValue ?? latestDatumValue\n\n  // Get the sibling range\n  const siblingRange = siblingAxis.scale.range()\n\n  let x\n  let y\n  let x1\n  let x2\n  let y1\n  let y2\n  let alignPctX\n  let alignPctY\n\n  const bandWidth = axis.axisFamily === 'band' ? axis.scale.bandwidth() : 1\n\n  const show = typeof value !== 'undefined' && !Number.isNaN(value)\n\n  let px = axis.scale(value)\n\n  // Vertical alignment\n  if (axis.isVertical) {\n    y = px\n    y1 = (y ?? 0) - 1\n    y2 = (y ?? 0) + bandWidth\n    if (axis.position === 'left') {\n      x1 = siblingRange[0]\n      x2 = siblingRange[1]\n    } else {\n      x1 = siblingRange[1]\n      x2 = siblingRange[0]\n    }\n  } else {\n    x = px\n    x1 = (x ?? 0) - 1\n    x2 = (x ?? 0) + bandWidth\n    if (axis.position === 'top') {\n      y1 = siblingRange[0]\n      y2 = siblingRange[1]\n    } else {\n      y1 = siblingRange[1]\n      y2 = siblingRange[0]\n    }\n  }\n\n  let lineStartX = Math.min(x1, x2)\n  let lineStartY = Math.min(y1, y2)\n  let lineEndX = Math.max(x1, x2)\n  let lineEndY = Math.max(y1, y2)\n  let lineHeight = Math.max(lineEndY - lineStartY, 0)\n  let lineWidth = Math.max(lineEndX - lineStartX, 0)\n\n  let bubbleX\n  let bubbleY\n\n  // Bubble placement\n  if (axis.isVertical) {\n    if (axis.position === 'left') {\n      bubbleX = lineStartX\n    } else {\n      bubbleX = lineEndX\n    }\n\n    bubbleY = lineStartY + lineHeight / 2\n  } else {\n    if (axis.position === 'top') {\n      bubbleY = lineStartY\n    } else {\n      bubbleY = lineEndY\n    }\n\n    bubbleX = lineStartX + lineWidth / 2\n  }\n\n  // Bubble anchoring\n  if (axis.isVertical) {\n    alignPctY = -50\n    if (axis.position === 'left') {\n      alignPctX = -100\n    } else {\n      alignPctX = 0\n    }\n  } else {\n    alignPctX = -50\n    if (axis.position === 'top') {\n      alignPctY = -100\n    } else {\n      alignPctY = 0\n    }\n  }\n\n  const formattedValue = (axis as AxisTime<any>).formatters.cursor(latestValue)\n\n  const svgRect = useRect(svgRef.current, show)\n\n  const lineRef = React.useRef<HTMLDivElement | null>(null)\n  const bubbleRef = React.useRef<HTMLDivElement | null>(null)\n\n  const latestLineStartX = useLatestWhen(lineStartX, px != null)\n  const latestLineStartY = useLatestWhen(lineStartY, px != null)\n  const latestBubbleX = useLatestWhen(bubbleX, px != null)\n  const latestBubbleY = useLatestWhen(bubbleY, px != null)\n\n  const previousTruePx = usePrevious(px)\n  const immediate = previousTruePx == null && px !== null\n\n  lineStartX = (px != null ? lineStartX : latestLineStartX) ?? NaN\n  lineStartY = (px != null ? lineStartY : latestLineStartY) ?? NaN\n  bubbleX = (px != null ? bubbleX : latestBubbleX) ?? NaN\n  bubbleY = (px != null ? bubbleY : latestBubbleY) ?? NaN\n\n  const lineXSpring = useSpring(\n    lineStartX,\n    [1, 210, 20],\n    () => {\n      if (lineRef.current) {\n        lineRef.current.style.transform = `translate(${lineXSpring.x()}px, ${lineYSpring.x()}px)`\n      }\n    },\n    immediate\n  )\n\n  const lineYSpring = useSpring(\n    lineStartY,\n    [1, 210, 20],\n    () => {\n      if (lineRef.current) {\n        lineRef.current.style.transform = `translate(${lineXSpring.x()}px, ${lineYSpring.x()}px)`\n      }\n    },\n    immediate\n  )\n\n  const bubbleXSpring = useSpring(\n    bubbleX,\n    [1, 210, 20],\n    () => {\n      if (bubbleRef.current) {\n        bubbleRef.current.style.transform = `translate(${bubbleXSpring.x()}px, ${bubbleYSpring.x()}px)`\n      }\n    },\n    immediate\n  )\n\n  const bubbleYSpring = useSpring(\n    bubbleY,\n    [1, 210, 20],\n    () => {\n      if (bubbleRef.current) {\n        bubbleRef.current.style.transform = `translate(${bubbleXSpring.x()}px, ${bubbleYSpring.x()}px)`\n      }\n    },\n    immediate\n  )\n\n  const portalEl = usePortalElement()\n\n  return portalEl\n    ? ReactDOM.createPortal(\n        <div\n          style={{\n            fontFamily: 'sans-serif',\n            pointerEvents: 'none',\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            transform: translate(\n              svgRect.left + gridDimensions.left,\n              svgRect.top + gridDimensions.top\n            ),\n            opacity: show ? 1 : 0,\n            transition: 'opacity .3s ease',\n          }}\n          className=\"Cursor\"\n        >\n          {/* Render the cursor line */}\n          {props.options.showLine ? (\n            <div\n              ref={lineRef}\n              style={{\n                width: `${lineWidth}px`,\n                height: `${lineHeight}px`,\n                position: 'absolute',\n                top: 0,\n                left: 0,\n                background: getLineBackgroundColor(\n                  getOptions().dark ?? false,\n                  bandWidth\n                ),\n              }}\n            />\n          ) : null}\n          {/* Render the cursor bubble */}\n          {props.options.showLabel ? (\n            <div\n              ref={bubbleRef}\n              style={{\n                position: 'absolute',\n                top: 0,\n                left: 0,\n              }}\n            >\n              {/* Render the cursor label */}\n              <div\n                style={{\n                  padding: '5px',\n                  fontSize: '10px',\n                  background: getBackgroundColor(getOptions().dark),\n                  color: getBackgroundColor(!getOptions().dark),\n                  borderRadius: '3px',\n                  position: 'relative',\n                  transform: `translate3d(${alignPctX}%, ${alignPctY}%, 0)`,\n                  whiteSpace: 'nowrap',\n                }}\n              >\n                {formattedValue}\n              </div>\n            </div>\n          ) : null}\n        </div>,\n        portalEl\n      )\n    : null\n}\n","import React from 'react'\n\nimport useRect, { HasBoundingClientRect } from './useRect'\n\n//\n\n//\n\ntype AlignMode =\n  | 'center'\n  | 'start'\n  | 'end'\n  | 'top'\n  | 'right'\n  | 'bottom'\n  | 'left'\n\ntype Side = 'left' | 'right' | 'top' | 'bottom'\ntype SideOption = Side | `${Side} ${AlignMode}`\ntype SideAlign = [Side, AlignMode]\n\ntype StartKey = 'left' | 'top'\ntype LengthKey = 'width' | 'height'\n\ntype Dims = {\n  left: number\n  top: number\n  right: number\n  bottom: number\n  width: number\n  height: number\n}\n\n// These are the keys used internally to look up and measure\n// different sides of a bounding box within another\nconst sideSchemas = {\n  left: {\n    side: 'left',\n    startKey: 'left',\n    lengthKey: 'width',\n    crossStartKey: 'top',\n    crossLengthKey: 'height',\n    fromEnd: false,\n  },\n  right: {\n    side: 'right',\n    startKey: 'left',\n    lengthKey: 'width',\n    crossStartKey: 'top',\n    crossLengthKey: 'height',\n    fromEnd: true,\n  },\n  top: {\n    side: 'top',\n    startKey: 'top',\n    lengthKey: 'height',\n    crossStartKey: 'left',\n    crossLengthKey: 'width',\n    fromEnd: false,\n  },\n  bottom: {\n    side: 'bottom',\n    startKey: 'top',\n    lengthKey: 'height',\n    crossStartKey: 'left',\n    crossLengthKey: 'width',\n    fromEnd: true,\n  },\n} as const\n\n// This is the final Tootlip component. It's a render prop\n// that lets you attach handlers to elements, and render a tooltip\n// anchored to them in relation to the parent portal container (either the only\n// one defined or the one referenced by Id).\nexport function useAnchor(options: {\n  show: boolean\n  useLargest?: boolean\n  side: SideOption | SideOption[]\n  portalEl: HasBoundingClientRect | null | undefined\n  anchorEl: HasBoundingClientRect | null | undefined\n  tooltipEl: HasBoundingClientRect | null | undefined\n}) {\n  const portalDims = useRect(options.portalEl, options.show)\n  const anchorDims = useRect(options.anchorEl, options.show)\n  const tooltipDims = useRect(options.tooltipEl, options.show)\n\n  const sides = React.useMemo(() => {\n    const preSides = Array.isArray(options.side) ? options.side : [options.side]\n    return preSides.map(alignStr => {\n      const [side, align = 'center'] = alignStr.split(' ') as [Side, AlignMode]\n      const incompatibleSide = !['top', 'right', 'bottom', 'left'].find(\n        d => side === d\n      )\n\n      if (incompatibleSide) {\n        throw new Error(\n          `react-sticker: \"${side}\" is not a valid side! Must be one of ['top', 'right', 'bottom', 'left'].`\n        )\n      }\n\n      const incompatibleAlign = ![\n        'center',\n        'start',\n        'end',\n        'top',\n        'right',\n        'bottom',\n        'left',\n      ].find(d => align === d)\n\n      if (incompatibleAlign) {\n        throw new Error(\n          `react-sticker: \"${align}\" is not a valid side-alignment! Must be one of ['center', 'start', 'end', 'top', 'right', 'bottom', 'left'].`\n        )\n      }\n\n      return [side, align] as [Side, AlignMode]\n    })\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [JSON.stringify(options.side)])\n\n  // IF we have all of the dimensions needed to calculate\n  // fits, then calculate the fit\n  const ready = portalDims && tooltipDims && anchorDims\n\n  const fit = React.useMemo(\n    () =>\n      ready && options.show\n        ? fitOnBestSide({\n            portalDims,\n            tooltipDims,\n            anchorDims,\n            sides,\n            useLargest: options.useLargest,\n          })\n        : null,\n    [\n      anchorDims,\n      options.show,\n      options.useLargest,\n      portalDims,\n      ready,\n      sides,\n      tooltipDims,\n    ]\n  )\n\n  return {\n    fit,\n    style: {\n      position: 'absolute' as const,\n      visibility: ready ? ('visible' as const) : ('hidden' as const),\n      // The fit styles are applied here from the best fit\n      ...fit?.style,\n    },\n  }\n}\n\n// This function selects the best side for the tooltip by using\n// the ranked fits.\nfunction fitOnBestSide({\n  portalDims,\n  tooltipDims,\n  anchorDims,\n  sides,\n  useLargest,\n}: {\n  portalDims: Dims\n  tooltipDims: Dims\n  anchorDims: Dims\n  sides: SideAlign[]\n  useLargest?: boolean\n}) {\n  const fits = sides.map(([side, align]) =>\n    measureFit({\n      ...sideSchemas[side],\n      align,\n      portalDims,\n      tooltipDims,\n      anchorDims,\n    })\n  )\n\n  if (useLargest) {\n    fits.sort((a, b) => b.fitRatio - a.fitRatio)\n    return fits[0]\n  }\n\n  return fits.find(fit => fit.fitRatio >= 1) || fits[0]\n}\n\n// This function takes a side and bunch of calculated dimensions from\n// the portal, tooltip and target. Then it returns\n// the percentage fit and the style to achieve this specific fit\nfunction measureFit({\n  side,\n  align,\n  startKey,\n  lengthKey,\n  crossStartKey,\n  crossLengthKey,\n  fromEnd,\n  portalDims,\n  tooltipDims,\n  anchorDims,\n}: {\n  side: Side\n  align: AlignMode\n  startKey: StartKey\n  lengthKey: LengthKey\n  crossStartKey: StartKey\n  crossLengthKey: LengthKey\n  fromEnd: boolean\n  portalDims: Dims\n  tooltipDims: Dims\n  anchorDims: Dims\n}) {\n  const parentStart = portalDims[startKey]\n  const parentLength = portalDims[lengthKey]\n  const crossParentStart = portalDims[crossStartKey]\n  const crossParentLength = portalDims[crossLengthKey]\n  const anchorStart = anchorDims[startKey] - portalDims[startKey]\n  const anchorLength = anchorDims[lengthKey]\n  const crossAnchorStart = anchorDims[crossStartKey]\n  const crossAnchorLength = anchorDims[crossLengthKey]\n  const crossAnchorWidth = anchorDims[crossLengthKey]\n  const targetLength = tooltipDims[lengthKey]\n  const crossTargetLength = tooltipDims[crossLengthKey]\n\n  let targetStart: number\n  let fitRatio: number\n\n  if (!fromEnd) {\n    targetStart = anchorStart - targetLength\n    fitRatio = Math.min(anchorStart / targetLength)\n  } else {\n    targetStart = anchorStart + anchorLength\n    fitRatio = (parentLength - (anchorStart + anchorLength)) / targetLength\n  }\n\n  targetStart = Math.max(parentStart, Math.min(targetStart, parentLength))\n\n  let crossTargetStart: number\n\n  if (startKey === 'left') {\n    if (align === 'top') {\n      align = 'start'\n    } else if (align === 'bottom') {\n      align = 'end'\n    }\n  } else {\n    if (align === 'left') {\n      align = 'start'\n    } else if (align === 'right') {\n      align = 'end'\n    }\n  }\n\n  if (!['start', 'center', 'end'].includes(align)) {\n    align = 'center'\n  }\n\n  if (align === 'start') {\n    crossTargetStart = crossAnchorStart\n  } else if (align === 'end') {\n    crossTargetStart = crossAnchorStart + crossAnchorWidth - crossTargetLength\n  } else {\n    crossTargetStart =\n      crossAnchorStart + crossAnchorLength / 2 - crossTargetLength / 2\n  }\n\n  crossTargetStart = Math.max(\n    crossParentStart,\n    Math.min(crossTargetStart, crossParentLength - crossTargetLength)\n  )\n\n  return {\n    side,\n    align,\n    startKey,\n    lengthKey,\n    crossStartKey,\n    crossLengthKey,\n    fromEnd,\n    portalDims,\n    tooltipDims,\n    anchorDims,\n    fitRatio,\n    style: {\n      [startKey]: targetStart,\n      [crossStartKey]: crossTargetStart,\n    } as Record<StartKey, number>,\n  }\n}\n","import { sum } from 'd3-array'\nimport React, { CSSProperties } from 'react'\n\nimport { useAnchor } from '../hooks/useAnchor'\nimport useLatestWhen from '../hooks/useLatestWhen'\nimport {\n  Axis,\n  AxisLinear,\n  AxisTime,\n  Datum,\n  ResolvedChartOptions,\n} from '../types'\n\n//\n//\n\nconst showCount = 10\n\nconst triangleSize = 7\n\nconst getBackgroundColor = (dark?: boolean) =>\n  dark ? 'rgba(255,255,255,.9)' : 'rgba(0, 26, 39, 0.9)'\n\nexport type TooltipRendererProps<TDatum> = {\n  focusedDatum: Datum<TDatum> | null\n  getOptions: () => ResolvedChartOptions<TDatum>\n  primaryAxis: Axis<TDatum>\n  secondaryAxes: Axis<TDatum>[]\n  secondaryAxis: Axis<TDatum>\n  getDatumStyle: (datum: Datum<TDatum>) => CSSProperties\n  anchor: ReturnType<typeof useAnchor>\n}\n\nexport default function tooltipRenderer<TDatum>(\n  props: TooltipRendererProps<TDatum>\n) {\n  return <TooltipRenderer {...props} />\n}\n\nfunction TooltipRenderer<TDatum>(props: TooltipRendererProps<TDatum>) {\n  const latestFit = useLatestWhen(props.anchor.fit, !!props.anchor.fit)\n\n  if (!props.focusedDatum) {\n    return null\n  }\n\n  const {\n    primaryAxis,\n    secondaryAxis,\n    getDatumStyle,\n    focusedDatum,\n    secondaryAxes,\n  } = props\n\n  const { tooltip, dark } = props.getOptions()\n\n  const groupDatums = props.focusedDatum?.tooltipGroup ?? []\n\n  const resolvedShowCount = showCount % 2 === 0 ? showCount : showCount + 1\n  const length = groupDatums.length\n\n  // Get the focused series' index\n  const activeIndex = groupDatums.findIndex(d => d === focusedDatum)\n  // Get the start by going back half of the showCount\n  let start = activeIndex > -1 ? activeIndex - resolvedShowCount / 2 : 0\n  // Make sure it's at least 0\n  start = Math.max(start, 0)\n  // Use the start and add the showCount to get the end\n  let end = activeIndex > -1 ? start + resolvedShowCount : length\n  // Don't let the end go passed the length\n  end = Math.min(end, length)\n  // Double check we aren't clipping the start\n  start = Math.max(end - resolvedShowCount, 0)\n  // Slice the datums by start and end\n  const visibleSortedGroupDatums = groupDatums.slice(start, end)\n  // Detect if we have previous items\n  const hasPrevious = start > 0\n  // Or next items\n  const hasNext = end < length\n\n  const finalAlign = `${latestFit?.side}-${latestFit?.align}`\n\n  let arrowPosition\n  let triangleStyles\n\n  if (!arrowPosition) {\n    if (finalAlign === 'left-center') {\n      arrowPosition = 'right'\n    } else if (finalAlign === 'right-center') {\n      arrowPosition = 'left'\n    } else if (finalAlign === 'top-center') {\n      arrowPosition = 'bottom'\n    } else if (finalAlign === 'bottom-center') {\n      arrowPosition = 'top'\n    } else if (finalAlign === 'right-start') {\n      arrowPosition = 'bottomLeft'\n    } else if (finalAlign === 'right-end') {\n      arrowPosition = 'topLeft'\n    } else if (finalAlign === 'left-start') {\n      arrowPosition = 'bottomRight'\n    } else if (finalAlign === 'left-end') {\n      arrowPosition = 'topRight'\n    }\n  }\n\n  const backgroundColor = getBackgroundColor(dark)\n\n  if (arrowPosition === 'bottom') {\n    triangleStyles = {\n      top: '100%',\n      left: '50%',\n      transform: 'translate3d(-50%, 0%, 0)',\n      borderLeft: `${triangleSize * 0.8}px solid transparent`,\n      borderRight: `${triangleSize * 0.8}px solid transparent`,\n      borderTop: `${triangleSize}px solid ${backgroundColor}`,\n    }\n  } else if (arrowPosition === 'top') {\n    triangleStyles = {\n      top: '0%',\n      left: '50%',\n      transform: 'translate3d(-50%, -100%, 0)',\n      borderLeft: `${triangleSize * 0.8}px solid transparent`,\n      borderRight: `${triangleSize * 0.8}px solid transparent`,\n      borderBottom: `${triangleSize}px solid ${backgroundColor}`,\n    }\n  } else if (arrowPosition === 'right') {\n    triangleStyles = {\n      top: '50%',\n      left: '100%',\n      transform: 'translate3d(0%, -50%, 0)',\n      borderTop: `${triangleSize * 0.8}px solid transparent`,\n      borderBottom: `${triangleSize * 0.8}px solid transparent`,\n      borderLeft: `${triangleSize}px solid ${backgroundColor}`,\n    }\n  } else if (arrowPosition === 'left') {\n    triangleStyles = {\n      top: '50%',\n      left: '0%',\n      transform: 'translate3d(-100%, -50%, 0)',\n      borderTop: `${triangleSize * 0.8}px solid transparent`,\n      borderBottom: `${triangleSize * 0.8}px solid transparent`,\n      borderRight: `${triangleSize}px solid ${backgroundColor}`,\n    }\n  } else if (arrowPosition === 'topRight') {\n    triangleStyles = {\n      top: '0%',\n      left: '100%',\n      transform: 'translate3d(-50%, -50%, 0) rotate(-45deg)',\n      borderTop: `${triangleSize * 0.8}px solid transparent`,\n      borderBottom: `${triangleSize * 0.8}px solid transparent`,\n      borderLeft: `${triangleSize * 2}px solid ${backgroundColor}`,\n    }\n  } else if (arrowPosition === 'bottomRight') {\n    triangleStyles = {\n      top: '100%',\n      left: '100%',\n      transform: 'translate3d(-50%, -50%, 0) rotate(45deg)',\n      borderTop: `${triangleSize * 0.8}px solid transparent`,\n      borderBottom: `${triangleSize * 0.8}px solid transparent`,\n      borderLeft: `${triangleSize * 2}px solid ${backgroundColor}`,\n    }\n  } else if (arrowPosition === 'topLeft') {\n    triangleStyles = {\n      top: '0%',\n      left: '0%',\n      transform: 'translate3d(-50%, -50%, 0) rotate(45deg)',\n      borderTop: `${triangleSize * 0.8}px solid transparent`,\n      borderBottom: `${triangleSize * 0.8}px solid transparent`,\n      borderRight: `${triangleSize * 2}px solid ${backgroundColor}`,\n    }\n  } else if (arrowPosition === 'bottomLeft') {\n    triangleStyles = {\n      top: '100%',\n      left: '0%',\n      transform: 'translate3d(-50%, -50%, 0) rotate(-45deg)',\n      borderTop: `${triangleSize * 0.8}px solid transparent`,\n      borderBottom: `${triangleSize * 0.8}px solid transparent`,\n      borderRight: `${triangleSize * 2}px solid ${backgroundColor}`,\n    }\n  } else {\n    triangleStyles = {\n      opacity: 0,\n    }\n  }\n\n  return (\n    <div\n      style={{\n        position: 'relative',\n        fontSize: '10px',\n        padding: '5px',\n        background: getBackgroundColor(dark),\n        color: dark ? 'black' : 'white',\n        borderRadius: '3px',\n      }}\n    >\n      <div\n        style={{\n          position: 'absolute',\n          width: 0,\n          height: 0,\n          ...triangleStyles,\n        }}\n      />\n      <div>\n        <div\n          style={{\n            marginBottom: '3px',\n            textAlign: 'center',\n          }}\n        >\n          {tooltip.groupingMode === 'series' ? (\n            <strong>{focusedDatum.seriesLabel}</strong>\n          ) : tooltip.groupingMode === 'secondary' ? (\n            <strong>\n              {(secondaryAxis as AxisTime<any>).formatters.tooltip(\n                focusedDatum.secondaryValue\n              )}\n            </strong>\n          ) : (\n            <strong>\n              {(primaryAxis as AxisTime<any>).formatters.tooltip(\n                focusedDatum.primaryValue\n              )}\n            </strong>\n          )}\n        </div>\n        <table\n          style={{\n            whiteSpace: 'nowrap',\n          }}\n        >\n          <tbody>\n            {hasPrevious ? (\n              <tr\n                style={{\n                  opacity: 0.8,\n                }}\n              >\n                <td />\n                <td>...</td>\n                <td />\n              </tr>\n            ) : null}\n            {visibleSortedGroupDatums.map((sortedDatum, i) => {\n              const active = sortedDatum === focusedDatum\n\n              const datumSecondaryAxis = secondaryAxes.find(\n                d => d.id === sortedDatum.secondaryAxisId\n              )\n\n              return (\n                <tr\n                  key={i}\n                  style={{\n                    opacity: active ? 1 : 0.8,\n                    fontWeight: active ? 'bold' : undefined,\n                  }}\n                >\n                  <td\n                    style={{\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                    }}\n                  >\n                    <svg width=\"14\" height=\"14\">\n                      <circle\n                        cx=\"7\"\n                        cy=\"7\"\n                        r=\"5\"\n                        style={{\n                          ...getDatumStyle(sortedDatum),\n                          stroke: dark ? 'black' : 'white',\n                          strokeWidth: active ? 2 : 1,\n                        }}\n                      />\n                    </svg>\n                  </td>\n                  {tooltip.groupingMode === 'series' ? (\n                    <React.Fragment>\n                      <td>\n                        {(primaryAxis as AxisTime<any>).formatters.tooltip(\n                          sortedDatum.primaryValue\n                        )}\n                        : &nbsp;\n                      </td>\n                      <td\n                        style={{\n                          textAlign: 'right',\n                        }}\n                      >\n                        {(\n                          datumSecondaryAxis as AxisTime<any>\n                        ).formatters.tooltip(sortedDatum.secondaryValue)}\n                      </td>\n                    </React.Fragment>\n                  ) : tooltip.groupingMode === 'secondary' ? (\n                    <React.Fragment>\n                      <td>{sortedDatum.seriesLabel}: &nbsp;</td>\n                      <td\n                        style={{\n                          textAlign: 'right',\n                        }}\n                      >\n                        {(primaryAxis as AxisTime<any>).formatters.tooltip(\n                          sortedDatum.primaryValue\n                        )}\n                      </td>\n                    </React.Fragment>\n                  ) : (\n                    <React.Fragment>\n                      <td>{sortedDatum.seriesLabel}: &nbsp;</td>\n                      <td\n                        style={{\n                          textAlign: 'right',\n                        }}\n                      >\n                        {(\n                          datumSecondaryAxis as AxisTime<any>\n                        ).formatters.tooltip(sortedDatum.secondaryValue)}\n                      </td>\n                    </React.Fragment>\n                  )}\n                </tr>\n              )\n            })}\n            {hasNext ? (\n              <tr\n                style={{\n                  opacity: 0.8,\n                }}\n              >\n                <td />\n                <td>...</td>\n                <td />\n              </tr>\n            ) : null}\n            {(focusedDatum.tooltipGroup ?? []).length > 1\n              ? props.secondaryAxes\n                  .filter(d => d.stacked)\n                  .map((secondaryAxis, i) => {\n                    return (\n                      <tr key={`${secondaryAxis.id}_${i}`}>\n                        <td\n                          style={{\n                            paddingTop: '5px',\n                          }}\n                        >\n                          <div\n                            style={{\n                              width: '12px',\n                              height: '12px',\n                              backgroundColor: dark\n                                ? 'rgba(0, 26, 39, 0.3)'\n                                : 'rgba(255,255,255,.2)',\n                              borderRadius: '50px',\n                            }}\n                          />\n                        </td>\n                        <td\n                          style={{\n                            paddingTop: '5px',\n                          }}\n                        >\n                          {props.secondaryAxes.length > 1\n                            ? secondaryAxis.id ?? `Axis ${i + 1} `\n                            : ''}\n                          Total: &nbsp;\n                        </td>\n                        <td\n                          style={{\n                            paddingTop: '5px',\n                          }}\n                        >\n                          {/* {secondaryAxis.format(\n                  [...focusedDatum.group].reverse()[0].totalValue,\n                  -1\n                )} */}\n                          {(secondaryAxis as AxisLinear<any>).formatters.scale(\n                            sum(\n                              focusedDatum.tooltipGroup ?? [],\n                              d => d.secondaryValue\n                            )\n                          )}\n                        </td>\n                      </tr>\n                    )\n                  })\n              : null}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport { useAnchor } from '../hooks/useAnchor'\nimport useLatestWhen from '../hooks/useLatestWhen'\nimport usePortalElement from '../hooks/usePortalElement'\nimport usePrevious from '../hooks/usePrevious'\nimport { Datum, ResolvedTooltipOptions, TooltipOptions } from '../types'\n//\nimport useChartContext from '../utils/chartContext'\nimport TooltipRenderer from './TooltipRenderer'\nimport useRect from '../hooks/useRect'\nimport { useSpring } from '../hooks/useSpring'\n\n//\n\nexport function defaultTooltip<TDatum>(\n  options: boolean | TooltipOptions<TDatum> = {}\n): ResolvedTooltipOptions<TDatum> {\n  if (options === true) {\n    options = { show: true }\n  } else if (options === false) {\n    options = { show: false }\n  }\n\n  return {\n    show: true,\n    ...options,\n    align: options.align ?? 'auto',\n    alignPriority: options.alignPriority ?? [\n      'right',\n      'topRight',\n      'bottomRight',\n      'left',\n      'topLeft',\n      'bottomLeft',\n      'top',\n      'bottom',\n    ],\n    padding: options.padding ?? 5,\n    arrowPadding: options.arrowPadding ?? 7,\n    // anchor: options.anchor ?? 'closest',\n    render: options.render ?? TooltipRenderer,\n  }\n}\n\nexport default function Tooltip<TDatum>(): React.ReactPortal | null {\n  const {\n    focusedDatumState,\n    getOptions,\n    primaryAxis,\n    secondaryAxes,\n    getDatumStatusStyle,\n    svgRef,\n  } = useChartContext<TDatum>()\n\n  const [focusedDatum] = focusedDatumState\n  const latestFocusedDatum = useLatestWhen(focusedDatum, !!focusedDatum)\n\n  const secondaryAxis =\n    secondaryAxes.find(d => d.id === latestFocusedDatum?.secondaryAxisId) ??\n    secondaryAxes[0]\n\n  const portalEl = usePortalElement()\n\n  const [tooltipEl, setTooltipEl] = React.useState<HTMLDivElement | null>()\n\n  const svgRect = useRect(svgRef.current, !!focusedDatum?.element)\n\n  const anchorEl = React.useMemo(() => {\n    const anchorRect =\n      latestFocusedDatum?.element?.getBoundingClientRect() ?? null\n\n    if (!anchorRect) {\n      return null\n    }\n\n    if (!svgRect) return\n\n    const translateX = anchorRect.left ?? 0\n    const translateY = anchorRect.top ?? 0\n    const width = anchorRect.width ?? 0\n    const height = anchorRect.height ?? 0\n\n    const box = {\n      x: translateY,\n      y: translateX,\n      top: translateY,\n      left: translateX,\n      bottom: translateY + width,\n      right: translateX + height,\n      width: width,\n      height: height,\n      toJSON: () => ({} as DOMRect),\n    }\n\n    box.toJSON = () => box\n\n    return {\n      getBoundingClientRect: () => {\n        return box\n      },\n    }\n  }, [latestFocusedDatum?.element, svgRect])\n\n  const anchor = useAnchor({\n    show: !!focusedDatum,\n    portalEl,\n    anchorEl,\n    tooltipEl,\n    side: ['right', 'left', 'top', 'bottom'],\n  })\n\n  const previousAnchor = usePrevious(anchor)\n  const latestStableAnchor = useLatestWhen(anchor, !!anchor.fit) ?? anchor\n\n  const { visibility, ...anchorStyle } = latestStableAnchor.style\n\n  const tooltipRef = React.useRef<HTMLDivElement | null>(null)\n\n  const immediate = Number.isNaN(previousAnchor?.style.left)\n\n  const tooltipXSpring = useSpring(\n    anchorStyle.left || 0,\n    [1, 210, 30],\n    () => {\n      if (tooltipRef.current) {\n        tooltipRef.current.style.transform = `translate(${tooltipXSpring.x()}px, ${tooltipYSpring.x()}px)`\n      }\n    },\n    immediate\n  )\n\n  const tooltipYSpring = useSpring(\n    anchorStyle.top || 0,\n    [1, 210, 30],\n    () => {\n      if (tooltipRef.current) {\n        tooltipRef.current.style.transform = `translate(${tooltipXSpring.x()}px, ${tooltipYSpring.x()}px)`\n      }\n    },\n    immediate\n  )\n\n  // const springProps = useSpring({\n  //   ...anchorStyle,\n  //   left: anchorStyle.left || 0,\n  //   top: anchorStyle.top || 0,\n  //   config: { mass: 1, tension: 210, friction: 30 },\n  //   immediate: key => {\n  //     if (['left', 'top'].includes(key)) {\n  //       return Number.isNaN(previousAnchor?.style.left)\n  //     }\n\n  //     return false\n  //   },\n  // })\n\n  const show = getOptions().tooltip.show\n\n  const latestFit = useLatestWhen(anchor.fit, !!anchor.fit)\n\n  return show && portalEl\n    ? ReactDOM.createPortal(\n        <div\n          ref={tooltipRef}\n          style={{\n            position: anchorStyle.position,\n            opacity: !!focusedDatum ? 1 : 0,\n            transition: 'opacity .3s ease',\n          }}\n        >\n          <div\n            ref={el => setTooltipEl(el)}\n            style={{\n              fontFamily: 'sans-serif',\n              ...(latestFit?.startKey === 'left'\n                ? {\n                    padding: '0 10px',\n                  }\n                : {\n                    padding: '10px 0',\n                  }),\n            }}\n          >\n            {getOptions().tooltip.render({\n              getOptions,\n              focusedDatum: latestFocusedDatum,\n              primaryAxis,\n              secondaryAxes,\n              secondaryAxis,\n              getDatumStyle: (datum: Datum<TDatum>) =>\n                getDatumStatusStyle(datum, focusedDatum),\n              anchor,\n            })}\n          </div>\n        </div>,\n        portalEl\n      )\n    : null\n}\n","\nconst EPSILON = Math.pow(2, -52);\nconst EDGE_STACK = new Uint32Array(512);\n\nexport default class Delaunator {\n\n    static from(points, getX = defaultGetX, getY = defaultGetY) {\n        const n = points.length;\n        const coords = new Float64Array(n * 2);\n\n        for (let i = 0; i < n; i++) {\n            const p = points[i];\n            coords[2 * i] = getX(p);\n            coords[2 * i + 1] = getY(p);\n        }\n\n        return new Delaunator(coords);\n    }\n\n    constructor(coords) {\n        const n = coords.length >> 1;\n        if (n > 0 && typeof coords[0] !== 'number') throw new Error('Expected coords to contain numbers.');\n\n        this.coords = coords;\n\n        // arrays that will store the triangulation graph\n        const maxTriangles = Math.max(2 * n - 5, 0);\n        this._triangles = new Uint32Array(maxTriangles * 3);\n        this._halfedges = new Int32Array(maxTriangles * 3);\n\n        // temporary arrays for tracking the edges of the advancing convex hull\n        this._hashSize = Math.ceil(Math.sqrt(n));\n        this._hullPrev = new Uint32Array(n); // edge to prev edge\n        this._hullNext = new Uint32Array(n); // edge to next edge\n        this._hullTri = new Uint32Array(n); // edge to adjacent triangle\n        this._hullHash = new Int32Array(this._hashSize).fill(-1); // angular edge hash\n\n        // temporary arrays for sorting points\n        this._ids = new Uint32Array(n);\n        this._dists = new Float64Array(n);\n\n        this.update();\n    }\n\n    update() {\n        const {coords, _hullPrev: hullPrev, _hullNext: hullNext, _hullTri: hullTri, _hullHash: hullHash} =  this;\n        const n = coords.length >> 1;\n\n        // populate an array of point indices; calculate input data bbox\n        let minX = Infinity;\n        let minY = Infinity;\n        let maxX = -Infinity;\n        let maxY = -Infinity;\n\n        for (let i = 0; i < n; i++) {\n            const x = coords[2 * i];\n            const y = coords[2 * i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n            this._ids[i] = i;\n        }\n        const cx = (minX + maxX) / 2;\n        const cy = (minY + maxY) / 2;\n\n        let minDist = Infinity;\n        let i0, i1, i2;\n\n        // pick a seed point close to the center\n        for (let i = 0; i < n; i++) {\n            const d = dist(cx, cy, coords[2 * i], coords[2 * i + 1]);\n            if (d < minDist) {\n                i0 = i;\n                minDist = d;\n            }\n        }\n        const i0x = coords[2 * i0];\n        const i0y = coords[2 * i0 + 1];\n\n        minDist = Infinity;\n\n        // find the point closest to the seed\n        for (let i = 0; i < n; i++) {\n            if (i === i0) continue;\n            const d = dist(i0x, i0y, coords[2 * i], coords[2 * i + 1]);\n            if (d < minDist && d > 0) {\n                i1 = i;\n                minDist = d;\n            }\n        }\n        let i1x = coords[2 * i1];\n        let i1y = coords[2 * i1 + 1];\n\n        let minRadius = Infinity;\n\n        // find the third point which forms the smallest circumcircle with the first two\n        for (let i = 0; i < n; i++) {\n            if (i === i0 || i === i1) continue;\n            const r = circumradius(i0x, i0y, i1x, i1y, coords[2 * i], coords[2 * i + 1]);\n            if (r < minRadius) {\n                i2 = i;\n                minRadius = r;\n            }\n        }\n        let i2x = coords[2 * i2];\n        let i2y = coords[2 * i2 + 1];\n\n        if (minRadius === Infinity) {\n            // order collinear points by dx (or dy if all x are identical)\n            // and return the list as a hull\n            for (let i = 0; i < n; i++) {\n                this._dists[i] = (coords[2 * i] - coords[0]) || (coords[2 * i + 1] - coords[1]);\n            }\n            quicksort(this._ids, this._dists, 0, n - 1);\n            const hull = new Uint32Array(n);\n            let j = 0;\n            for (let i = 0, d0 = -Infinity; i < n; i++) {\n                const id = this._ids[i];\n                if (this._dists[id] > d0) {\n                    hull[j++] = id;\n                    d0 = this._dists[id];\n                }\n            }\n            this.hull = hull.subarray(0, j);\n            this.triangles = new Uint32Array(0);\n            this.halfedges = new Uint32Array(0);\n            return;\n        }\n\n        // swap the order of the seed points for counter-clockwise orientation\n        if (orient(i0x, i0y, i1x, i1y, i2x, i2y)) {\n            const i = i1;\n            const x = i1x;\n            const y = i1y;\n            i1 = i2;\n            i1x = i2x;\n            i1y = i2y;\n            i2 = i;\n            i2x = x;\n            i2y = y;\n        }\n\n        const center = circumcenter(i0x, i0y, i1x, i1y, i2x, i2y);\n        this._cx = center.x;\n        this._cy = center.y;\n\n        for (let i = 0; i < n; i++) {\n            this._dists[i] = dist(coords[2 * i], coords[2 * i + 1], center.x, center.y);\n        }\n\n        // sort the points by distance from the seed triangle circumcenter\n        quicksort(this._ids, this._dists, 0, n - 1);\n\n        // set up the seed triangle as the starting hull\n        this._hullStart = i0;\n        let hullSize = 3;\n\n        hullNext[i0] = hullPrev[i2] = i1;\n        hullNext[i1] = hullPrev[i0] = i2;\n        hullNext[i2] = hullPrev[i1] = i0;\n\n        hullTri[i0] = 0;\n        hullTri[i1] = 1;\n        hullTri[i2] = 2;\n\n        hullHash.fill(-1);\n        hullHash[this._hashKey(i0x, i0y)] = i0;\n        hullHash[this._hashKey(i1x, i1y)] = i1;\n        hullHash[this._hashKey(i2x, i2y)] = i2;\n\n        this.trianglesLen = 0;\n        this._addTriangle(i0, i1, i2, -1, -1, -1);\n\n        for (let k = 0, xp, yp; k < this._ids.length; k++) {\n            const i = this._ids[k];\n            const x = coords[2 * i];\n            const y = coords[2 * i + 1];\n\n            // skip near-duplicate points\n            if (k > 0 && Math.abs(x - xp) <= EPSILON && Math.abs(y - yp) <= EPSILON) continue;\n            xp = x;\n            yp = y;\n\n            // skip seed triangle points\n            if (i === i0 || i === i1 || i === i2) continue;\n\n            // find a visible edge on the convex hull using edge hash\n            let start = 0;\n            for (let j = 0, key = this._hashKey(x, y); j < this._hashSize; j++) {\n                start = hullHash[(key + j) % this._hashSize];\n                if (start !== -1 && start !== hullNext[start]) break;\n            }\n\n            start = hullPrev[start];\n            let e = start, q;\n            while (q = hullNext[e], !orient(x, y, coords[2 * e], coords[2 * e + 1], coords[2 * q], coords[2 * q + 1])) {\n                e = q;\n                if (e === start) {\n                    e = -1;\n                    break;\n                }\n            }\n            if (e === -1) continue; // likely a near-duplicate point; skip it\n\n            // add the first triangle from the point\n            let t = this._addTriangle(e, i, hullNext[e], -1, -1, hullTri[e]);\n\n            // recursively flip triangles from the point until they satisfy the Delaunay condition\n            hullTri[i] = this._legalize(t + 2);\n            hullTri[e] = t; // keep track of boundary triangles on the hull\n            hullSize++;\n\n            // walk forward through the hull, adding more triangles and flipping recursively\n            let n = hullNext[e];\n            while (q = hullNext[n], orient(x, y, coords[2 * n], coords[2 * n + 1], coords[2 * q], coords[2 * q + 1])) {\n                t = this._addTriangle(n, i, q, hullTri[i], -1, hullTri[n]);\n                hullTri[i] = this._legalize(t + 2);\n                hullNext[n] = n; // mark as removed\n                hullSize--;\n                n = q;\n            }\n\n            // walk backward from the other side, adding more triangles and flipping\n            if (e === start) {\n                while (q = hullPrev[e], orient(x, y, coords[2 * q], coords[2 * q + 1], coords[2 * e], coords[2 * e + 1])) {\n                    t = this._addTriangle(q, i, e, -1, hullTri[e], hullTri[q]);\n                    this._legalize(t + 2);\n                    hullTri[q] = t;\n                    hullNext[e] = e; // mark as removed\n                    hullSize--;\n                    e = q;\n                }\n            }\n\n            // update the hull indices\n            this._hullStart = hullPrev[i] = e;\n            hullNext[e] = hullPrev[n] = i;\n            hullNext[i] = n;\n\n            // save the two new edges in the hash table\n            hullHash[this._hashKey(x, y)] = i;\n            hullHash[this._hashKey(coords[2 * e], coords[2 * e + 1])] = e;\n        }\n\n        this.hull = new Uint32Array(hullSize);\n        for (let i = 0, e = this._hullStart; i < hullSize; i++) {\n            this.hull[i] = e;\n            e = hullNext[e];\n        }\n\n        // trim typed triangle mesh arrays\n        this.triangles = this._triangles.subarray(0, this.trianglesLen);\n        this.halfedges = this._halfedges.subarray(0, this.trianglesLen);\n    }\n\n    _hashKey(x, y) {\n        return Math.floor(pseudoAngle(x - this._cx, y - this._cy) * this._hashSize) % this._hashSize;\n    }\n\n    _legalize(a) {\n        const {_triangles: triangles, _halfedges: halfedges, coords} = this;\n\n        let i = 0;\n        let ar = 0;\n\n        // recursion eliminated with a fixed-size stack\n        while (true) {\n            const b = halfedges[a];\n\n            /* if the pair of triangles doesn't satisfy the Delaunay condition\n             * (p1 is inside the circumcircle of [p0, pl, pr]), flip them,\n             * then do the same check/flip recursively for the new pair of triangles\n             *\n             *           pl                    pl\n             *          /||\\                  /  \\\n             *       al/ || \\bl            al/    \\a\n             *        /  ||  \\              /      \\\n             *       /  a||b  \\    flip    /___ar___\\\n             *     p0\\   ||   /p1   =>   p0\\---bl---/p1\n             *        \\  ||  /              \\      /\n             *       ar\\ || /br             b\\    /br\n             *          \\||/                  \\  /\n             *           pr                    pr\n             */\n            const a0 = a - a % 3;\n            ar = a0 + (a + 2) % 3;\n\n            if (b === -1) { // convex hull edge\n                if (i === 0) break;\n                a = EDGE_STACK[--i];\n                continue;\n            }\n\n            const b0 = b - b % 3;\n            const al = a0 + (a + 1) % 3;\n            const bl = b0 + (b + 2) % 3;\n\n            const p0 = triangles[ar];\n            const pr = triangles[a];\n            const pl = triangles[al];\n            const p1 = triangles[bl];\n\n            const illegal = inCircle(\n                coords[2 * p0], coords[2 * p0 + 1],\n                coords[2 * pr], coords[2 * pr + 1],\n                coords[2 * pl], coords[2 * pl + 1],\n                coords[2 * p1], coords[2 * p1 + 1]);\n\n            if (illegal) {\n                triangles[a] = p1;\n                triangles[b] = p0;\n\n                const hbl = halfedges[bl];\n\n                // edge swapped on the other side of the hull (rare); fix the halfedge reference\n                if (hbl === -1) {\n                    let e = this._hullStart;\n                    do {\n                        if (this._hullTri[e] === bl) {\n                            this._hullTri[e] = a;\n                            break;\n                        }\n                        e = this._hullPrev[e];\n                    } while (e !== this._hullStart);\n                }\n                this._link(a, hbl);\n                this._link(b, halfedges[ar]);\n                this._link(ar, bl);\n\n                const br = b0 + (b + 1) % 3;\n\n                // don't worry about hitting the cap: it can only happen on extremely degenerate input\n                if (i < EDGE_STACK.length) {\n                    EDGE_STACK[i++] = br;\n                }\n            } else {\n                if (i === 0) break;\n                a = EDGE_STACK[--i];\n            }\n        }\n\n        return ar;\n    }\n\n    _link(a, b) {\n        this._halfedges[a] = b;\n        if (b !== -1) this._halfedges[b] = a;\n    }\n\n    // add a new triangle given vertex indices and adjacent half-edge ids\n    _addTriangle(i0, i1, i2, a, b, c) {\n        const t = this.trianglesLen;\n\n        this._triangles[t] = i0;\n        this._triangles[t + 1] = i1;\n        this._triangles[t + 2] = i2;\n\n        this._link(t, a);\n        this._link(t + 1, b);\n        this._link(t + 2, c);\n\n        this.trianglesLen += 3;\n\n        return t;\n    }\n}\n\n// monotonically increases with real angle, but doesn't need expensive trigonometry\nfunction pseudoAngle(dx, dy) {\n    const p = dx / (Math.abs(dx) + Math.abs(dy));\n    return (dy > 0 ? 3 - p : 1 + p) / 4; // [0..1]\n}\n\nfunction dist(ax, ay, bx, by) {\n    const dx = ax - bx;\n    const dy = ay - by;\n    return dx * dx + dy * dy;\n}\n\n// return 2d orientation sign if we're confident in it through J. Shewchuk's error bound check\nfunction orientIfSure(px, py, rx, ry, qx, qy) {\n    const l = (ry - py) * (qx - px);\n    const r = (rx - px) * (qy - py);\n    return Math.abs(l - r) >= 3.3306690738754716e-16 * Math.abs(l + r) ? l - r : 0;\n}\n\n// a more robust orientation test that's stable in a given triangle (to fix robustness issues)\nfunction orient(rx, ry, qx, qy, px, py) {\n    const sign = orientIfSure(px, py, rx, ry, qx, qy) ||\n    orientIfSure(rx, ry, qx, qy, px, py) ||\n    orientIfSure(qx, qy, px, py, rx, ry);\n    return sign < 0;\n}\n\nfunction inCircle(ax, ay, bx, by, cx, cy, px, py) {\n    const dx = ax - px;\n    const dy = ay - py;\n    const ex = bx - px;\n    const ey = by - py;\n    const fx = cx - px;\n    const fy = cy - py;\n\n    const ap = dx * dx + dy * dy;\n    const bp = ex * ex + ey * ey;\n    const cp = fx * fx + fy * fy;\n\n    return dx * (ey * cp - bp * fy) -\n           dy * (ex * cp - bp * fx) +\n           ap * (ex * fy - ey * fx) < 0;\n}\n\nfunction circumradius(ax, ay, bx, by, cx, cy) {\n    const dx = bx - ax;\n    const dy = by - ay;\n    const ex = cx - ax;\n    const ey = cy - ay;\n\n    const bl = dx * dx + dy * dy;\n    const cl = ex * ex + ey * ey;\n    const d = 0.5 / (dx * ey - dy * ex);\n\n    const x = (ey * bl - dy * cl) * d;\n    const y = (dx * cl - ex * bl) * d;\n\n    return x * x + y * y;\n}\n\nfunction circumcenter(ax, ay, bx, by, cx, cy) {\n    const dx = bx - ax;\n    const dy = by - ay;\n    const ex = cx - ax;\n    const ey = cy - ay;\n\n    const bl = dx * dx + dy * dy;\n    const cl = ex * ex + ey * ey;\n    const d = 0.5 / (dx * ey - dy * ex);\n\n    const x = ax + (ey * bl - dy * cl) * d;\n    const y = ay + (dx * cl - ex * bl) * d;\n\n    return {x, y};\n}\n\nfunction quicksort(ids, dists, left, right) {\n    if (right - left <= 20) {\n        for (let i = left + 1; i <= right; i++) {\n            const temp = ids[i];\n            const tempDist = dists[temp];\n            let j = i - 1;\n            while (j >= left && dists[ids[j]] > tempDist) ids[j + 1] = ids[j--];\n            ids[j + 1] = temp;\n        }\n    } else {\n        const median = (left + right) >> 1;\n        let i = left + 1;\n        let j = right;\n        swap(ids, median, i);\n        if (dists[ids[left]] > dists[ids[right]]) swap(ids, left, right);\n        if (dists[ids[i]] > dists[ids[right]]) swap(ids, i, right);\n        if (dists[ids[left]] > dists[ids[i]]) swap(ids, left, i);\n\n        const temp = ids[i];\n        const tempDist = dists[temp];\n        while (true) {\n            do i++; while (dists[ids[i]] < tempDist);\n            do j--; while (dists[ids[j]] > tempDist);\n            if (j < i) break;\n            swap(ids, i, j);\n        }\n        ids[left + 1] = ids[j];\n        ids[j] = temp;\n\n        if (right - i + 1 >= j - left) {\n            quicksort(ids, dists, i, right);\n            quicksort(ids, dists, left, j - 1);\n        } else {\n            quicksort(ids, dists, left, j - 1);\n            quicksort(ids, dists, i, right);\n        }\n    }\n}\n\nfunction swap(arr, i, j) {\n    const tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n\nfunction defaultGetX(p) {\n    return p[0];\n}\nfunction defaultGetY(p) {\n    return p[1];\n}\n","const epsilon = 1e-6;\n\nexport default class Path {\n  constructor() {\n    this._x0 = this._y0 = // start of current subpath\n    this._x1 = this._y1 = null; // end of current subpath\n    this._ = \"\";\n  }\n  moveTo(x, y) {\n    this._ += `M${this._x0 = this._x1 = +x},${this._y0 = this._y1 = +y}`;\n  }\n  closePath() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  }\n  lineTo(x, y) {\n    this._ += `L${this._x1 = +x},${this._y1 = +y}`;\n  }\n  arc(x, y, r) {\n    x = +x, y = +y, r = +r;\n    const x0 = x + r;\n    const y0 = y;\n    if (r < 0) throw new Error(\"negative radius\");\n    if (this._x1 === null) this._ += `M${x0},${y0}`;\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) this._ += \"L\" + x0 + \",\" + y0;\n    if (!r) return;\n    this._ += `A${r},${r},0,1,1,${x - r},${y}A${r},${r},0,1,1,${this._x1 = x0},${this._y1 = y0}`;\n  }\n  rect(x, y, w, h) {\n    this._ += `M${this._x0 = this._x1 = +x},${this._y0 = this._y1 = +y}h${+w}v${+h}h${-w}Z`;\n  }\n  value() {\n    return this._ || null;\n  }\n}\n","export default class Polygon {\n  constructor() {\n    this._ = [];\n  }\n  moveTo(x, y) {\n    this._.push([x, y]);\n  }\n  closePath() {\n    this._.push(this._[0].slice());\n  }\n  lineTo(x, y) {\n    this._.push([x, y]);\n  }\n  value() {\n    return this._.length ? this._ : null;\n  }\n}\n","import Path from \"./path.js\";\nimport Polygon from \"./polygon.js\";\n\nexport default class Voronoi {\n  constructor(delaunay, [xmin, ymin, xmax, ymax] = [0, 0, 960, 500]) {\n    if (!((xmax = +xmax) >= (xmin = +xmin)) || !((ymax = +ymax) >= (ymin = +ymin))) throw new Error(\"invalid bounds\");\n    this.delaunay = delaunay;\n    this._circumcenters = new Float64Array(delaunay.points.length * 2);\n    this.vectors = new Float64Array(delaunay.points.length * 2);\n    this.xmax = xmax, this.xmin = xmin;\n    this.ymax = ymax, this.ymin = ymin;\n    this._init();\n  }\n  update() {\n    this.delaunay.update();\n    this._init();\n    return this;\n  }\n  _init() {\n    const {delaunay: {points, hull, triangles}, vectors} = this;\n\n    // Compute circumcenters.\n    const circumcenters = this.circumcenters = this._circumcenters.subarray(0, triangles.length / 3 * 2);\n    for (let i = 0, j = 0, n = triangles.length, x, y; i < n; i += 3, j += 2) {\n      const t1 = triangles[i] * 2;\n      const t2 = triangles[i + 1] * 2;\n      const t3 = triangles[i + 2] * 2;\n      const x1 = points[t1];\n      const y1 = points[t1 + 1];\n      const x2 = points[t2];\n      const y2 = points[t2 + 1];\n      const x3 = points[t3];\n      const y3 = points[t3 + 1];\n\n      const dx = x2 - x1;\n      const dy = y2 - y1;\n      const ex = x3 - x1;\n      const ey = y3 - y1;\n      const bl = dx * dx + dy * dy;\n      const cl = ex * ex + ey * ey;\n      const ab = (dx * ey - dy * ex) * 2;\n\n      if (!ab) {\n        // degenerate case (collinear diagram)\n        x = (x1 + x3) / 2 - 1e8 * ey;\n        y = (y1 + y3) / 2 + 1e8 * ex;\n      }\n      else if (Math.abs(ab) < 1e-8) {\n        // almost equal points (degenerate triangle)\n        x = (x1 + x3) / 2;\n        y = (y1 + y3) / 2;\n      } else {\n        const d = 1 / ab;\n        x = x1 + (ey * bl - dy * cl) * d;\n        y = y1 + (dx * cl - ex * bl) * d;\n      }\n      circumcenters[j] = x;\n      circumcenters[j + 1] = y;\n    }\n\n    // Compute exterior cell rays.\n    let h = hull[hull.length - 1];\n    let p0, p1 = h * 4;\n    let x0, x1 = points[2 * h];\n    let y0, y1 = points[2 * h + 1];\n    vectors.fill(0);\n    for (let i = 0; i < hull.length; ++i) {\n      h = hull[i];\n      p0 = p1, x0 = x1, y0 = y1;\n      p1 = h * 4, x1 = points[2 * h], y1 = points[2 * h + 1];\n      vectors[p0 + 2] = vectors[p1] = y0 - y1;\n      vectors[p0 + 3] = vectors[p1 + 1] = x1 - x0;\n    }\n  }\n  render(context) {\n    const buffer = context == null ? context = new Path : undefined;\n    const {delaunay: {halfedges, inedges, hull}, circumcenters, vectors} = this;\n    if (hull.length <= 1) return null;\n    for (let i = 0, n = halfedges.length; i < n; ++i) {\n      const j = halfedges[i];\n      if (j < i) continue;\n      const ti = Math.floor(i / 3) * 2;\n      const tj = Math.floor(j / 3) * 2;\n      const xi = circumcenters[ti];\n      const yi = circumcenters[ti + 1];\n      const xj = circumcenters[tj];\n      const yj = circumcenters[tj + 1];\n      this._renderSegment(xi, yi, xj, yj, context);\n    }\n    let h0, h1 = hull[hull.length - 1];\n    for (let i = 0; i < hull.length; ++i) {\n      h0 = h1, h1 = hull[i];\n      const t = Math.floor(inedges[h1] / 3) * 2;\n      const x = circumcenters[t];\n      const y = circumcenters[t + 1];\n      const v = h0 * 4;\n      const p = this._project(x, y, vectors[v + 2], vectors[v + 3]);\n      if (p) this._renderSegment(x, y, p[0], p[1], context);\n    }\n    return buffer && buffer.value();\n  }\n  renderBounds(context) {\n    const buffer = context == null ? context = new Path : undefined;\n    context.rect(this.xmin, this.ymin, this.xmax - this.xmin, this.ymax - this.ymin);\n    return buffer && buffer.value();\n  }\n  renderCell(i, context) {\n    const buffer = context == null ? context = new Path : undefined;\n    const points = this._clip(i);\n    if (points === null || !points.length) return;\n    context.moveTo(points[0], points[1]);\n    let n = points.length;\n    while (points[0] === points[n-2] && points[1] === points[n-1] && n > 1) n -= 2;\n    for (let i = 2; i < n; i += 2) {\n      if (points[i] !== points[i-2] || points[i+1] !== points[i-1])\n        context.lineTo(points[i], points[i + 1]);\n    }\n    context.closePath();\n    return buffer && buffer.value();\n  }\n  *cellPolygons() {\n    const {delaunay: {points}} = this;\n    for (let i = 0, n = points.length / 2; i < n; ++i) {\n      const cell = this.cellPolygon(i);\n      if (cell) cell.index = i, yield cell;\n    }\n  }\n  cellPolygon(i) {\n    const polygon = new Polygon;\n    this.renderCell(i, polygon);\n    return polygon.value();\n  }\n  _renderSegment(x0, y0, x1, y1, context) {\n    let S;\n    const c0 = this._regioncode(x0, y0);\n    const c1 = this._regioncode(x1, y1);\n    if (c0 === 0 && c1 === 0) {\n      context.moveTo(x0, y0);\n      context.lineTo(x1, y1);\n    } else if (S = this._clipSegment(x0, y0, x1, y1, c0, c1)) {\n      context.moveTo(S[0], S[1]);\n      context.lineTo(S[2], S[3]);\n    }\n  }\n  contains(i, x, y) {\n    if ((x = +x, x !== x) || (y = +y, y !== y)) return false;\n    return this.delaunay._step(i, x, y) === i;\n  }\n  *neighbors(i) {\n    const ci = this._clip(i);\n    if (ci) for (const j of this.delaunay.neighbors(i)) {\n      const cj = this._clip(j);\n      // find the common edge\n      if (cj) loop: for (let ai = 0, li = ci.length; ai < li; ai += 2) {\n        for (let aj = 0, lj = cj.length; aj < lj; aj += 2) {\n          if (ci[ai] == cj[aj]\n          && ci[ai + 1] == cj[aj + 1]\n          && ci[(ai + 2) % li] == cj[(aj + lj - 2) % lj]\n          && ci[(ai + 3) % li] == cj[(aj + lj - 1) % lj]\n          ) {\n            yield j;\n            break loop;\n          }\n        }\n      }\n    }\n  }\n  _cell(i) {\n    const {circumcenters, delaunay: {inedges, halfedges, triangles}} = this;\n    const e0 = inedges[i];\n    if (e0 === -1) return null; // coincident point\n    const points = [];\n    let e = e0;\n    do {\n      const t = Math.floor(e / 3);\n      points.push(circumcenters[t * 2], circumcenters[t * 2 + 1]);\n      e = e % 3 === 2 ? e - 2 : e + 1;\n      if (triangles[e] !== i) break; // bad triangulation\n      e = halfedges[e];\n    } while (e !== e0 && e !== -1);\n    return points;\n  }\n  _clip(i) {\n    // degenerate case (1 valid point: return the box)\n    if (i === 0 && this.delaunay.hull.length === 1) {\n      return [this.xmax, this.ymin, this.xmax, this.ymax, this.xmin, this.ymax, this.xmin, this.ymin];\n    }\n    const points = this._cell(i);\n    if (points === null) return null;\n    const {vectors: V} = this;\n    const v = i * 4;\n    return V[v] || V[v + 1]\n        ? this._clipInfinite(i, points, V[v], V[v + 1], V[v + 2], V[v + 3])\n        : this._clipFinite(i, points);\n  }\n  _clipFinite(i, points) {\n    const n = points.length;\n    let P = null;\n    let x0, y0, x1 = points[n - 2], y1 = points[n - 1];\n    let c0, c1 = this._regioncode(x1, y1);\n    let e0, e1;\n    for (let j = 0; j < n; j += 2) {\n      x0 = x1, y0 = y1, x1 = points[j], y1 = points[j + 1];\n      c0 = c1, c1 = this._regioncode(x1, y1);\n      if (c0 === 0 && c1 === 0) {\n        e0 = e1, e1 = 0;\n        if (P) P.push(x1, y1);\n        else P = [x1, y1];\n      } else {\n        let S, sx0, sy0, sx1, sy1;\n        if (c0 === 0) {\n          if ((S = this._clipSegment(x0, y0, x1, y1, c0, c1)) === null) continue;\n          [sx0, sy0, sx1, sy1] = S;\n        } else {\n          if ((S = this._clipSegment(x1, y1, x0, y0, c1, c0)) === null) continue;\n          [sx1, sy1, sx0, sy0] = S;\n          e0 = e1, e1 = this._edgecode(sx0, sy0);\n          if (e0 && e1) this._edge(i, e0, e1, P, P.length);\n          if (P) P.push(sx0, sy0);\n          else P = [sx0, sy0];\n        }\n        e0 = e1, e1 = this._edgecode(sx1, sy1);\n        if (e0 && e1) this._edge(i, e0, e1, P, P.length);\n        if (P) P.push(sx1, sy1);\n        else P = [sx1, sy1];\n      }\n    }\n    if (P) {\n      e0 = e1, e1 = this._edgecode(P[0], P[1]);\n      if (e0 && e1) this._edge(i, e0, e1, P, P.length);\n    } else if (this.contains(i, (this.xmin + this.xmax) / 2, (this.ymin + this.ymax) / 2)) {\n      return [this.xmax, this.ymin, this.xmax, this.ymax, this.xmin, this.ymax, this.xmin, this.ymin];\n    }\n    return P;\n  }\n  _clipSegment(x0, y0, x1, y1, c0, c1) {\n    while (true) {\n      if (c0 === 0 && c1 === 0) return [x0, y0, x1, y1];\n      if (c0 & c1) return null;\n      let x, y, c = c0 || c1;\n      if (c & 0b1000) x = x0 + (x1 - x0) * (this.ymax - y0) / (y1 - y0), y = this.ymax;\n      else if (c & 0b0100) x = x0 + (x1 - x0) * (this.ymin - y0) / (y1 - y0), y = this.ymin;\n      else if (c & 0b0010) y = y0 + (y1 - y0) * (this.xmax - x0) / (x1 - x0), x = this.xmax;\n      else y = y0 + (y1 - y0) * (this.xmin - x0) / (x1 - x0), x = this.xmin;\n      if (c0) x0 = x, y0 = y, c0 = this._regioncode(x0, y0);\n      else x1 = x, y1 = y, c1 = this._regioncode(x1, y1);\n    }\n  }\n  _clipInfinite(i, points, vx0, vy0, vxn, vyn) {\n    let P = Array.from(points), p;\n    if (p = this._project(P[0], P[1], vx0, vy0)) P.unshift(p[0], p[1]);\n    if (p = this._project(P[P.length - 2], P[P.length - 1], vxn, vyn)) P.push(p[0], p[1]);\n    if (P = this._clipFinite(i, P)) {\n      for (let j = 0, n = P.length, c0, c1 = this._edgecode(P[n - 2], P[n - 1]); j < n; j += 2) {\n        c0 = c1, c1 = this._edgecode(P[j], P[j + 1]);\n        if (c0 && c1) j = this._edge(i, c0, c1, P, j), n = P.length;\n      }\n    } else if (this.contains(i, (this.xmin + this.xmax) / 2, (this.ymin + this.ymax) / 2)) {\n      P = [this.xmin, this.ymin, this.xmax, this.ymin, this.xmax, this.ymax, this.xmin, this.ymax];\n    }\n    return P;\n  }\n  _edge(i, e0, e1, P, j) {\n    while (e0 !== e1) {\n      let x, y;\n      switch (e0) {\n        case 0b0101: e0 = 0b0100; continue; // top-left\n        case 0b0100: e0 = 0b0110, x = this.xmax, y = this.ymin; break; // top\n        case 0b0110: e0 = 0b0010; continue; // top-right\n        case 0b0010: e0 = 0b1010, x = this.xmax, y = this.ymax; break; // right\n        case 0b1010: e0 = 0b1000; continue; // bottom-right\n        case 0b1000: e0 = 0b1001, x = this.xmin, y = this.ymax; break; // bottom\n        case 0b1001: e0 = 0b0001; continue; // bottom-left\n        case 0b0001: e0 = 0b0101, x = this.xmin, y = this.ymin; break; // left\n      }\n      if ((P[j] !== x || P[j + 1] !== y) && this.contains(i, x, y)) {\n        P.splice(j, 0, x, y), j += 2;\n      }\n    }\n    if (P.length > 4) {\n      for (let i = 0; i < P.length; i+= 2) {\n        const j = (i + 2) % P.length, k = (i + 4) % P.length;\n        if (P[i] === P[j] && P[j] === P[k]\n        || P[i + 1] === P[j + 1] && P[j + 1] === P[k + 1])\n          P.splice(j, 2), i -= 2;\n      }\n    }\n    return j;\n  }\n  _project(x0, y0, vx, vy) {\n    let t = Infinity, c, x, y;\n    if (vy < 0) { // top\n      if (y0 <= this.ymin) return null;\n      if ((c = (this.ymin - y0) / vy) < t) y = this.ymin, x = x0 + (t = c) * vx;\n    } else if (vy > 0) { // bottom\n      if (y0 >= this.ymax) return null;\n      if ((c = (this.ymax - y0) / vy) < t) y = this.ymax, x = x0 + (t = c) * vx;\n    }\n    if (vx > 0) { // right\n      if (x0 >= this.xmax) return null;\n      if ((c = (this.xmax - x0) / vx) < t) x = this.xmax, y = y0 + (t = c) * vy;\n    } else if (vx < 0) { // left\n      if (x0 <= this.xmin) return null;\n      if ((c = (this.xmin - x0) / vx) < t) x = this.xmin, y = y0 + (t = c) * vy;\n    }\n    return [x, y];\n  }\n  _edgecode(x, y) {\n    return (x === this.xmin ? 0b0001\n        : x === this.xmax ? 0b0010 : 0b0000)\n        | (y === this.ymin ? 0b0100\n        : y === this.ymax ? 0b1000 : 0b0000);\n  }\n  _regioncode(x, y) {\n    return (x < this.xmin ? 0b0001\n        : x > this.xmax ? 0b0010 : 0b0000)\n        | (y < this.ymin ? 0b0100\n        : y > this.ymax ? 0b1000 : 0b0000);\n  }\n}\n","import Delaunator from \"delaunator\";\nimport Path from \"./path.js\";\nimport Polygon from \"./polygon.js\";\nimport Voronoi from \"./voronoi.js\";\n\nconst tau = 2 * Math.PI, pow = Math.pow;\n\nfunction pointX(p) {\n  return p[0];\n}\n\nfunction pointY(p) {\n  return p[1];\n}\n\n// A triangulation is collinear if all its triangles have a non-null area\nfunction collinear(d) {\n  const {triangles, coords} = d;\n  for (let i = 0; i < triangles.length; i += 3) {\n    const a = 2 * triangles[i],\n          b = 2 * triangles[i + 1],\n          c = 2 * triangles[i + 2],\n          cross = (coords[c] - coords[a]) * (coords[b + 1] - coords[a + 1])\n                - (coords[b] - coords[a]) * (coords[c + 1] - coords[a + 1]);\n    if (cross > 1e-10) return false;\n  }\n  return true;\n}\n\nfunction jitter(x, y, r) {\n  return [x + Math.sin(x + y) * r, y + Math.cos(x - y) * r];\n}\n\nexport default class Delaunay {\n  static from(points, fx = pointX, fy = pointY, that) {\n    return new Delaunay(\"length\" in points\n        ? flatArray(points, fx, fy, that)\n        : Float64Array.from(flatIterable(points, fx, fy, that)));\n  }\n  constructor(points) {\n    this._delaunator = new Delaunator(points);\n    this.inedges = new Int32Array(points.length / 2);\n    this._hullIndex = new Int32Array(points.length / 2);\n    this.points = this._delaunator.coords;\n    this._init();\n  }\n  update() {\n    this._delaunator.update();\n    this._init();\n    return this;\n  }\n  _init() {\n    const d = this._delaunator, points = this.points;\n\n    // check for collinear\n    if (d.hull && d.hull.length > 2 && collinear(d)) {\n      this.collinear = Int32Array.from({length: points.length/2}, (_,i) => i)\n        .sort((i, j) => points[2 * i] - points[2 * j] || points[2 * i + 1] - points[2 * j + 1]); // for exact neighbors\n      const e = this.collinear[0], f = this.collinear[this.collinear.length - 1],\n        bounds = [ points[2 * e], points[2 * e + 1], points[2 * f], points[2 * f + 1] ],\n        r = 1e-8 * Math.hypot(bounds[3] - bounds[1], bounds[2] - bounds[0]);\n      for (let i = 0, n = points.length / 2; i < n; ++i) {\n        const p = jitter(points[2 * i], points[2 * i + 1], r);\n        points[2 * i] = p[0];\n        points[2 * i + 1] = p[1];\n      }\n      this._delaunator = new Delaunator(points);\n    } else {\n      delete this.collinear;\n    }\n\n    const halfedges = this.halfedges = this._delaunator.halfedges;\n    const hull = this.hull = this._delaunator.hull;\n    const triangles = this.triangles = this._delaunator.triangles;\n    const inedges = this.inedges.fill(-1);\n    const hullIndex = this._hullIndex.fill(-1);\n\n    // Compute an index from each point to an (arbitrary) incoming halfedge\n    // Used to give the first neighbor of each point; for this reason,\n    // on the hull we give priority to exterior halfedges\n    for (let e = 0, n = halfedges.length; e < n; ++e) {\n      const p = triangles[e % 3 === 2 ? e - 2 : e + 1];\n      if (halfedges[e] === -1 || inedges[p] === -1) inedges[p] = e;\n    }\n    for (let i = 0, n = hull.length; i < n; ++i) {\n      hullIndex[hull[i]] = i;\n    }\n\n    // degenerate case: 1 or 2 (distinct) points\n    if (hull.length <= 2 && hull.length > 0) {\n      this.triangles = new Int32Array(3).fill(-1);\n      this.halfedges = new Int32Array(3).fill(-1);\n      this.triangles[0] = hull[0];\n      this.triangles[1] = hull[1];\n      this.triangles[2] = hull[1];\n      inedges[hull[0]] = 1;\n      if (hull.length === 2) inedges[hull[1]] = 0;\n    }\n  }\n  voronoi(bounds) {\n    return new Voronoi(this, bounds);\n  }\n  *neighbors(i) {\n    const {inedges, hull, _hullIndex, halfedges, triangles, collinear} = this;\n\n    // degenerate case with several collinear points\n    if (collinear) {\n      const l = collinear.indexOf(i);\n      if (l > 0) yield collinear[l - 1];\n      if (l < collinear.length - 1) yield collinear[l + 1];\n      return;\n    }\n\n    const e0 = inedges[i];\n    if (e0 === -1) return; // coincident point\n    let e = e0, p0 = -1;\n    do {\n      yield p0 = triangles[e];\n      e = e % 3 === 2 ? e - 2 : e + 1;\n      if (triangles[e] !== i) return; // bad triangulation\n      e = halfedges[e];\n      if (e === -1) {\n        const p = hull[(_hullIndex[i] + 1) % hull.length];\n        if (p !== p0) yield p;\n        return;\n      }\n    } while (e !== e0);\n  }\n  find(x, y, i = 0) {\n    if ((x = +x, x !== x) || (y = +y, y !== y)) return -1;\n    const i0 = i;\n    let c;\n    while ((c = this._step(i, x, y)) >= 0 && c !== i && c !== i0) i = c;\n    return c;\n  }\n  _step(i, x, y) {\n    const {inedges, hull, _hullIndex, halfedges, triangles, points} = this;\n    if (inedges[i] === -1 || !points.length) return (i + 1) % (points.length >> 1);\n    let c = i;\n    let dc = pow(x - points[i * 2], 2) + pow(y - points[i * 2 + 1], 2);\n    const e0 = inedges[i];\n    let e = e0;\n    do {\n      let t = triangles[e];\n      const dt = pow(x - points[t * 2], 2) + pow(y - points[t * 2 + 1], 2);\n      if (dt < dc) dc = dt, c = t;\n      e = e % 3 === 2 ? e - 2 : e + 1;\n      if (triangles[e] !== i) break; // bad triangulation\n      e = halfedges[e];\n      if (e === -1) {\n        e = hull[(_hullIndex[i] + 1) % hull.length];\n        if (e !== t) {\n          if (pow(x - points[e * 2], 2) + pow(y - points[e * 2 + 1], 2) < dc) return e;\n        }\n        break;\n      }\n    } while (e !== e0);\n    return c;\n  }\n  render(context) {\n    const buffer = context == null ? context = new Path : undefined;\n    const {points, halfedges, triangles} = this;\n    for (let i = 0, n = halfedges.length; i < n; ++i) {\n      const j = halfedges[i];\n      if (j < i) continue;\n      const ti = triangles[i] * 2;\n      const tj = triangles[j] * 2;\n      context.moveTo(points[ti], points[ti + 1]);\n      context.lineTo(points[tj], points[tj + 1]);\n    }\n    this.renderHull(context);\n    return buffer && buffer.value();\n  }\n  renderPoints(context, r = 2) {\n    const buffer = context == null ? context = new Path : undefined;\n    const {points} = this;\n    for (let i = 0, n = points.length; i < n; i += 2) {\n      const x = points[i], y = points[i + 1];\n      context.moveTo(x + r, y);\n      context.arc(x, y, r, 0, tau);\n    }\n    return buffer && buffer.value();\n  }\n  renderHull(context) {\n    const buffer = context == null ? context = new Path : undefined;\n    const {hull, points} = this;\n    const h = hull[0] * 2, n = hull.length;\n    context.moveTo(points[h], points[h + 1]);\n    for (let i = 1; i < n; ++i) {\n      const h = 2 * hull[i];\n      context.lineTo(points[h], points[h + 1]);\n    }\n    context.closePath();\n    return buffer && buffer.value();\n  }\n  hullPolygon() {\n    const polygon = new Polygon;\n    this.renderHull(polygon);\n    return polygon.value();\n  }\n  renderTriangle(i, context) {\n    const buffer = context == null ? context = new Path : undefined;\n    const {points, triangles} = this;\n    const t0 = triangles[i *= 3] * 2;\n    const t1 = triangles[i + 1] * 2;\n    const t2 = triangles[i + 2] * 2;\n    context.moveTo(points[t0], points[t0 + 1]);\n    context.lineTo(points[t1], points[t1 + 1]);\n    context.lineTo(points[t2], points[t2 + 1]);\n    context.closePath();\n    return buffer && buffer.value();\n  }\n  *trianglePolygons() {\n    const {triangles} = this;\n    for (let i = 0, n = triangles.length / 3; i < n; ++i) {\n      yield this.trianglePolygon(i);\n    }\n  }\n  trianglePolygon(i) {\n    const polygon = new Polygon;\n    this.renderTriangle(i, polygon);\n    return polygon.value();\n  }\n}\n\nfunction flatArray(points, fx, fy, that) {\n  const n = points.length;\n  const array = new Float64Array(n * 2);\n  for (let i = 0; i < n; ++i) {\n    const p = points[i];\n    array[i * 2] = fx.call(that, p, i, points);\n    array[i * 2 + 1] = fy.call(that, p, i, points);\n  }\n  return array;\n}\n\nfunction* flatIterable(points, fx, fy, that) {\n  let i = 0;\n  for (const p of points) {\n    yield fx.call(that, p, i, points);\n    yield fy.call(that, p, i, points);\n    ++i;\n  }\n}\n","import React from 'react'\nimport { Delaunay } from 'd3-delaunay'\n\n//\nimport { Axis, Datum } from '../types'\nimport { translate } from '../utils/Utils'\nimport useChartContext from '../utils/chartContext'\nimport { line } from 'd3-shape'\nimport { getPrimaryGroupLength, getPrimaryLength } from '../seriesTypes/Bar'\n\nexport default function Voronoi<TDatum>() {\n  const { getOptions, focusedDatumState, isInteractingState } =\n    useChartContext<TDatum>()\n\n  const [, setFocusedDatum] = focusedDatumState\n  const [isInteracting] = isInteractingState\n\n  const {\n    onFocusDatum,\n    onClickDatum,\n    tooltip,\n    primaryCursor,\n    secondaryCursor,\n    showVoronoi,\n    interactionMode,\n  } = getOptions()\n\n  const handleFocus = React.useCallback(\n    (datum: Datum<TDatum> | null) => {\n      getOptions().onFocusDatum?.(datum)\n      setFocusedDatum(datum)\n    },\n    [getOptions, setFocusedDatum]\n  )\n\n  const needsVoronoi =\n    isInteracting &&\n    (showVoronoi ||\n      onFocusDatum ||\n      onClickDatum ||\n      tooltip ||\n      primaryCursor ||\n      secondaryCursor)\n\n  if (!needsVoronoi) {\n    return null\n  }\n\n  const props = {\n    handleFocus,\n  }\n\n  if (interactionMode === 'closest') {\n    return <SingleVoronoi {...props} />\n  }\n\n  return <PrimaryVoronoi {...props} />\n}\n\nfunction PrimaryVoronoi<TDatum>({\n  handleFocus,\n}: {\n  handleFocus: (datum: Datum<TDatum> | null) => void\n}) {\n  const {\n    primaryAxis,\n    secondaryAxes,\n    getOptions,\n    gridDimensions,\n    datumsByInteractionGroup,\n  } = useChartContext<TDatum>()\n\n  const stackedVoronoi = secondaryAxes.length === 1 && secondaryAxes[0].stacked\n\n  const useBarPx = secondaryAxes.every(\n    d => d.elementType === 'bar' && !d.stacked\n  )\n\n  return React.useMemo(() => {\n    let preColumns = Array.from(datumsByInteractionGroup.entries())\n      .map(([_, datums]) => datums)\n      .filter(datums => {\n        const datum = datums[0]\n\n        if (!datum) {\n          return\n        }\n\n        const primaryValue = datum.primaryValue\n        return primaryValue !== 'undefined' && primaryValue !== null\n      })\n      .sort((a, b) => {\n        const aAxis = secondaryAxes.find(d => d.id === a[0].secondaryAxisId)!\n        const bAxis = secondaryAxes.find(d => d.id === b[0].secondaryAxisId)!\n\n        const aPx = getPrimary(a[0], primaryAxis, aAxis, useBarPx)\n        const bPx = getPrimary(b[0], primaryAxis, bAxis, useBarPx)\n\n        return aPx - bPx\n      })\n\n    if (primaryAxis.isVertical) {\n      preColumns.reverse()\n    }\n\n    const columns = preColumns.map((datums, i, all) => {\n      const datum = datums[0]\n\n      const prev = all[i - 1]\n      const next = all[i + 1]\n\n      const secondaryAxis = secondaryAxes.find(\n        d => d.id === datum.secondaryAxisId\n      )!\n      const primaryPx = getPrimary(datum, primaryAxis, secondaryAxis, useBarPx)\n\n      let range = primaryAxis?.scale.range() ?? [0, 0]\n\n      let [primaryStart, primaryEnd] = range\n\n      if (prev) {\n        const secondaryAxis = secondaryAxes.find(\n          d => d.id === prev[0].secondaryAxisId\n        )!\n        const prevPx = getPrimary(prev[0], primaryAxis, secondaryAxis, useBarPx)\n        primaryStart = primaryPx - (primaryPx - prevPx) / 2\n      }\n\n      if (next) {\n        const secondaryAxis = secondaryAxes.find(\n          d => d.id === next[0].secondaryAxisId\n        )!\n        const nextPx = getPrimary(next[0], primaryAxis, secondaryAxis, useBarPx)\n        primaryEnd = primaryPx + (nextPx - primaryPx) / 2\n      }\n\n      return {\n        primaryStart,\n        primaryEnd,\n        primaryPx,\n        datumBoundaries: datums\n          .filter(datum => {\n            const secondaryValue = datum.secondaryValue\n            return (\n              typeof secondaryValue !== 'undefined' && secondaryValue !== null\n            )\n          })\n          .map((datum, i, all) => {\n            const prev = all[i - 1]\n            const next = all[i + 1]\n\n            const secondaryAxis = secondaryAxes.find(\n              d => d.id === datum.secondaryAxisId\n            )\n\n            if (stackedVoronoi) {\n              let range = secondaryAxis?.scale.range() ?? [0, 0]\n\n              let stackData = [datum.stackData?.[0], datum.stackData?.[1]]\n\n              if (secondaryAxis?.isVertical) {\n                range.reverse()\n                stackData.reverse()\n              }\n\n              let [secondaryStart, secondaryEnd] = range\n\n              if (prev) {\n                secondaryStart =\n                  secondaryAxis?.scale(stackData[0] ?? NaN) ?? NaN\n              }\n\n              if (next) {\n                secondaryEnd = secondaryAxis?.scale(stackData[1] ?? NaN) ?? NaN\n              }\n\n              return {\n                secondaryStart,\n                secondaryEnd,\n                datum,\n              }\n            }\n\n            const value =\n              secondaryAxis?.scale(\n                secondaryAxis.stacked\n                  ? datum.stackData?.[1]\n                  : datum.secondaryValue\n              ) ?? NaN\n\n            let range = secondaryAxis?.scale.range() ?? [0, 0]\n\n            if (secondaryAxis?.isVertical) {\n              range.reverse()\n            }\n\n            let [secondaryStart, secondaryEnd] = range\n\n            if (prev) {\n              const prevAxis = secondaryAxes.find(\n                d => d.id === prev?.secondaryAxisId\n              )\n              const prevValue =\n                prevAxis?.scale(\n                  prevAxis.stacked ? prev.stackData?.[1] : prev.secondaryValue\n                ) ?? NaN\n              secondaryStart = value - (value - prevValue) / 2\n            }\n\n            if (next) {\n              const nextAxis = secondaryAxes.find(\n                d => d.id === next?.secondaryAxisId\n              )\n              const nextValue =\n                nextAxis?.scale(\n                  nextAxis.stacked ? next.stackData?.[1] : next.secondaryValue\n                ) ?? NaN\n              secondaryEnd = value + (nextValue - value) / 2\n            }\n\n            return {\n              secondaryStart,\n              secondaryEnd,\n              datum,\n            }\n          }),\n      }\n    })\n\n    return (\n      <g\n        {...{\n          onMouseLeave: () => handleFocus(null),\n          style: {\n            transform: translate(gridDimensions.left, gridDimensions.top),\n          },\n        }}\n      >\n        {columns.map((column, i) => {\n          return (\n            <g key={`${column.primaryPx}_${i}`}>\n              {column.datumBoundaries.map((datumBoundary, i) => {\n                const x1 = !primaryAxis.isVertical\n                  ? column.primaryStart\n                  : datumBoundary.secondaryStart\n                const x2 = !primaryAxis.isVertical\n                  ? column.primaryEnd\n                  : datumBoundary.secondaryEnd\n                const y1 = !primaryAxis.isVertical\n                  ? datumBoundary.secondaryStart\n                  : column.primaryStart\n                const y2 = !primaryAxis.isVertical\n                  ? datumBoundary.secondaryEnd\n                  : column.primaryEnd\n\n                const x = Math.min(x1, x2)\n                const y = Math.min(y1, y2)\n                const xEnd = Math.max(x1, x2)\n                const yEnd = Math.max(y1, y2)\n\n                const height = Math.max(yEnd - y, 0)\n                const width = Math.max(xEnd - x, 0)\n\n                return (\n                  <rect\n                    {...{\n                      key: i,\n                      x,\n                      y,\n                      width,\n                      height,\n                      className: 'action-voronoi',\n                      onMouseEnter: () => handleFocus(datumBoundary.datum),\n                      style: {\n                        fill: getOptions().dark\n                          ? '#ffffff33'\n                          : 'rgba(0,0,0,0.2)',\n                        strokeWidth: 1,\n                        stroke: getOptions().dark ? 'white' : 'black',\n                        opacity: getOptions().showVoronoi ? 1 : 0,\n                      },\n                    }}\n                  />\n                )\n              })}\n            </g>\n          )\n        })}\n      </g>\n    )\n  }, [\n    datumsByInteractionGroup,\n    primaryAxis,\n    gridDimensions.left,\n    gridDimensions.top,\n    secondaryAxes,\n    useBarPx,\n    stackedVoronoi,\n    handleFocus,\n    getOptions,\n  ])\n}\n\nconst delaunayLineFn = line()\n\nfunction SingleVoronoi<TDatum>({\n  handleFocus,\n}: {\n  handleFocus: (datum: Datum<TDatum> | null) => void\n}) {\n  const {\n    primaryAxis,\n    series,\n    secondaryAxes,\n    getOptions,\n    gridDimensions,\n    // datumsByInteractionGroup,\n  } = useChartContext<TDatum>()\n\n  let polygons = null\n\n  const voronoiData: { x: number; y: number; datum: Datum<TDatum> }[] = []\n\n  const useBarPx = secondaryAxes.every(\n    d => d.elementType === 'bar' && !d.stacked\n  )\n\n  series.forEach(serie => {\n    serie.datums\n      .filter(datum => {\n        const primaryValue = datum.primaryValue\n        const secondaryValue = datum.secondaryValue\n        return (\n          primaryValue !== 'undefined' &&\n          primaryValue !== null &&\n          secondaryValue !== 'undefined' &&\n          secondaryValue !== null\n        )\n      })\n      .forEach(datum => {\n        const secondaryAxis = secondaryAxes.find(\n          d => d.id === datum.secondaryAxisId\n        )\n        const x = getX(datum, primaryAxis, secondaryAxis!, useBarPx)\n        const y = getY(datum, primaryAxis, secondaryAxis!, useBarPx)\n\n        if (\n          typeof x !== 'number' ||\n          typeof y !== 'number' ||\n          Number.isNaN(y) ||\n          Number.isNaN(x)\n        ) {\n          return\n        }\n\n        voronoiData.push({\n          x,\n          y,\n          datum,\n        })\n      })\n  })\n\n  const delaunay = Delaunay.from(\n    voronoiData,\n    d => Math.max(d.x, 0),\n    d => Math.max(d.y, 0)\n  )\n\n  const voronoi = delaunay.voronoi([\n    0,\n    0,\n    gridDimensions.width,\n    gridDimensions.height,\n  ])\n\n  polygons = voronoi.cellPolygons()\n\n  polygons = Array.from(polygons)\n\n  return (\n    <g\n      {...{\n        onMouseLeave: () => handleFocus(null),\n        style: {\n          transform: translate(gridDimensions.left, gridDimensions.top),\n        },\n      }}\n    >\n      {polygons.map((points, i) => {\n        const index = points.index\n        const datum = voronoiData[index].datum\n        const path = delaunayLineFn(points as any) || undefined\n        return (\n          <path\n            {...{\n              key: i,\n              d: path,\n              className: 'action-voronoi',\n              onMouseEnter: () => handleFocus(datum),\n              style: {\n                fill: getOptions().dark ? '#ffffff33' : 'rgba(0,0,0,0.2)',\n                strokeWidth: 1,\n                stroke: getOptions().dark ? 'white' : 'black',\n                opacity: getOptions().showVoronoi ? 1 : 0,\n              },\n            }}\n          />\n        )\n      })}\n    </g>\n  )\n}\n\nfunction getX<TDatum>(\n  datum: Datum<TDatum>,\n  primaryAxis: Axis<TDatum>,\n  secondaryAxis: Axis<TDatum>,\n  useBarPx: boolean\n): number {\n  return primaryAxis.isVertical\n    ? getSecondary(datum, secondaryAxis)\n    : getPrimary(datum, primaryAxis, secondaryAxis, useBarPx)\n}\n\nfunction getY<TDatum>(\n  datum: Datum<TDatum>,\n  primaryAxis: Axis<TDatum>,\n  secondaryAxis: Axis<TDatum>,\n  useBarPx: boolean\n): number {\n  return primaryAxis.isVertical\n    ? getPrimary(datum, primaryAxis, secondaryAxis, useBarPx)\n    : getSecondary(datum, secondaryAxis)\n}\n\nfunction getPrimary<TDatum>(\n  datum: Datum<TDatum>,\n  primaryAxis: Axis<TDatum>,\n  secondaryAxis: Axis<TDatum>,\n  useBarPx: boolean\n): number {\n  let primary = primaryAxis.scale(datum.primaryValue) ?? NaN\n\n  if (useBarPx && secondaryAxis.elementType === 'bar') {\n    if (!secondaryAxis.stacked) {\n      primary += primaryAxis.seriesBandScale!(datum.seriesIndex) ?? NaN\n      primary += getPrimaryLength(datum, primaryAxis, secondaryAxis) / 2\n    } else {\n      primary += getPrimaryGroupLength(datum, primaryAxis) / 2\n    }\n  }\n\n  return primary\n}\n\nfunction getSecondary<TDatum>(\n  datum: Datum<TDatum>,\n  secondaryAxis: Axis<TDatum>\n): number {\n  if (secondaryAxis.stacked) {\n    return secondaryAxis.scale(datum.stackData?.[1] ?? NaN) ?? NaN\n  }\n\n  return secondaryAxis.scale(datum.secondaryValue) ?? NaN\n}\n","import { groups, sort, sum } from 'd3-array'\nimport React, { ComponentPropsWithoutRef } from 'react'\n\nimport useGetLatest from '../hooks/useGetLatest'\nimport useIsomorphicLayoutEffect from '../hooks/useIsomorphicLayoutEffect'\nimport Bar, { getPrimary } from '../seriesTypes/Bar'\nimport Line from '../seriesTypes/Line'\n//\nimport {\n  Axis,\n  AxisDimensions,\n  AxisOptions,\n  AxisOptionsWithScaleType,\n  BuildAxisOptions,\n  ChartContextValue,\n  ChartOptions,\n  Datum,\n  GridDimensions,\n  RequiredChartOptions,\n  Series,\n  UserSerie,\n} from '../types'\nimport {\n  materializeStyles,\n  getSeriesStatus,\n  getDatumStatus,\n} from '../utils/Utils'\nimport buildAxisLinear from '../utils/buildAxis.linear'\nimport { ChartContextProvider } from '../utils/chartContext'\nimport AxisLinear from './AxisLinear'\n// import Brush from './Brush'\nimport Cursors from './Cursors'\nimport Tooltip, { defaultTooltip } from './Tooltip'\nimport Voronoi from './Voronoi'\n\n//\n\n//\n\nconst defaultColorScheme = [\n  '#0f83ab',\n  '#faa43a',\n  '#fd6868',\n  '#53cfc9',\n  '#a2d925',\n  '#decf3f',\n  '#734fe9',\n  '#cd82ad',\n  '#006d92',\n  '#de7c00',\n  '#f33232',\n  '#3f9a80',\n  '#53c200',\n  '#d7af00',\n  '#4c26c9',\n  '#d44d99',\n]\n\nconst defaultPadding = 5\n\nfunction defaultChartOptions<TDatum>(\n  options: ChartOptions<TDatum>\n): RequiredChartOptions<TDatum> {\n  return {\n    ...options,\n    initialWidth: options.initialWidth ?? 300,\n    initialHeight: options.initialHeight ?? 200,\n    getSeriesOrder:\n      options.getSeriesOrder ?? ((series: Series<TDatum>[]) => series),\n    interactionMode: options.interactionMode ?? 'primary',\n    showVoronoi: options.showVoronoi ?? false,\n    defaultColors: options.defaultColors ?? defaultColorScheme,\n    useIntersectionObserver: options.useIntersectionObserver ?? true,\n    intersectionObserverRootMargin:\n      options.intersectionObserverRootMargin ?? '1000px',\n    primaryCursor: options.primaryCursor ?? true,\n    secondaryCursor: options.secondaryCursor ?? true,\n    padding: options.padding ?? defaultPadding,\n  }\n}\n\nexport function Chart<TDatum>({\n  options: userOptions,\n  className,\n  style = {},\n  ...rest\n}: ComponentPropsWithoutRef<'div'> & { options: ChartOptions<TDatum> }) {\n  const options = defaultChartOptions(userOptions)\n  const [chartElement, setContainerElement] =\n    React.useState<HTMLDivElement | null>(null)\n\n  const containerEl = chartElement?.parentElement\n\n  const nearestScrollableParent = React.useMemo(() => {\n    const run = (el?: Element | null): Element | null => {\n      if (!el) {\n        return null\n      }\n\n      const grandParent = el.parentElement\n\n      if (!grandParent) {\n        return null\n      }\n\n      if (grandParent.scrollHeight > grandParent.clientHeight) {\n        const { overflow } = window.getComputedStyle(grandParent)\n\n        if (overflow.includes('scroll') || overflow.includes('auto')) {\n          return grandParent\n        }\n      }\n\n      return run(grandParent)\n    }\n\n    return run(containerEl)\n  }, [containerEl])\n\n  const [{ width, height }, setDims] = React.useState({\n    width: options.initialWidth,\n    height: options.initialHeight,\n  })\n\n  useIsomorphicLayoutEffect(() => {\n    if (containerEl) {\n      const computed = window.getComputedStyle(containerEl)\n\n      if (!['relative', 'absolute', 'fixed'].includes(computed.position)) {\n        containerEl.style.position = 'relative'\n      }\n    }\n  }, [containerEl])\n\n  React.useEffect(() => {\n    if (!containerEl) {\n      return\n    }\n\n    const observer = new ResizeObserver(() => {\n      const rect = containerEl?.getBoundingClientRect()\n      const styles = window.getComputedStyle(containerEl)\n\n      if (rect) {\n        setDims({\n          width:\n            rect.width -\n            parseInt(styles.borderLeftWidth) -\n            parseInt(styles.borderRightWidth),\n          height:\n            rect.height -\n            parseInt(styles.borderTopWidth) -\n            parseInt(styles.borderBottomWidth),\n        })\n      }\n    })\n\n    observer.observe(containerEl)\n\n    return () => {\n      observer.unobserve(containerEl)\n    }\n  }, [containerEl])\n\n  const [isIntersecting, setIsIntersecting] = React.useState(true)\n\n  React.useEffect(() => {\n    if (!containerEl || !options.useIntersectionObserver) return\n\n    let observer = new IntersectionObserver(\n      entries => {\n        for (let entry of entries) {\n          if (entry.isIntersecting) {\n            setIsIntersecting(true)\n          } else {\n            setIsIntersecting(false)\n          }\n        }\n      },\n      {\n        root: nearestScrollableParent,\n        rootMargin: options.intersectionObserverRootMargin,\n      }\n    )\n\n    observer.observe(containerEl)\n\n    return () => {\n      observer.unobserve(containerEl)\n    }\n  }, [\n    containerEl,\n    nearestScrollableParent,\n    options.intersectionObserverRootMargin,\n    options.useIntersectionObserver,\n  ])\n\n  return (\n    <div\n      ref={setContainerElement}\n      {...rest}\n      className={`ReactChart ${className || ''}`}\n      style={{\n        fontFamily: 'sans-serif',\n        ...style,\n        position: 'absolute',\n        width,\n        height,\n      }}\n    >\n      {isIntersecting ? (\n        <ChartInner options={options} {...{ width, height }} />\n      ) : null}\n    </div>\n  )\n}\n\nfunction ChartInner<TDatum>({\n  options,\n  width,\n  height,\n}: {\n  options: RequiredChartOptions<TDatum>\n  width: number\n  height: number\n}) {\n  if (!options.primaryAxis) {\n    throw new Error('A primaryAxis is required')\n  }\n\n  if (!options.secondaryAxes.length) {\n    throw new Error('At least one secondaryAxis is required')\n  }\n\n  const primaryAxisOptions = React.useMemo((): BuildAxisOptions<TDatum> => {\n    const firstValue = getFirstDefinedValue(options.primaryAxis, options.data)\n    const axisOptions = axisOptionsWithScaleType(\n      options.primaryAxis,\n      firstValue\n    )\n\n    return { position: 'bottom', ...axisOptions }\n  }, [options.data, options.primaryAxis])\n\n  const secondaryAxesOptions = React.useMemo(() => {\n    return options.secondaryAxes.map(\n      (secondaryAxis, i): BuildAxisOptions<TDatum> => {\n        const firstValue = getFirstDefinedValue(secondaryAxis, options.data)\n\n        const axisOptions = axisOptionsWithScaleType(secondaryAxis, firstValue)\n\n        if (!axisOptions.elementType) {\n          if (primaryAxisOptions.scaleType === 'band') {\n            axisOptions.elementType = 'bar'\n          } else if (axisOptions.stacked) {\n            axisOptions.elementType = 'area'\n          }\n        }\n\n        if (\n          typeof axisOptions.stacked === 'undefined' &&\n          axisOptions.elementType &&\n          ['area'].includes(axisOptions.elementType)\n        ) {\n          axisOptions.stacked = true\n        }\n\n        return {\n          position: !i ? 'left' : 'right',\n          ...axisOptions,\n        }\n      }\n    )\n  }, [options.data, options.secondaryAxes, primaryAxisOptions])\n\n  // Resolve Tooltip Option\n  const tooltipOptions = React.useMemo(() => {\n    const tooltipOptions = defaultTooltip(options?.tooltip)\n    tooltipOptions.groupingMode =\n      tooltipOptions.groupingMode ??\n      (() => {\n        if (options.interactionMode === 'closest') {\n          return 'single'\n        }\n        return 'primary'\n      })()\n\n    return tooltipOptions\n  }, [options.interactionMode, options?.tooltip])\n\n  options = {\n    ...options,\n    tooltip: tooltipOptions,\n  }\n\n  //\n\n  const svgRef = React.useRef<SVGSVGElement>(null)\n  const getOptions = useGetLatest({ ...options, tooltip: tooltipOptions })\n\n  const axisDimensionsState = React.useState<AxisDimensions>({\n    left: {},\n    right: {},\n    top: {},\n    bottom: {},\n  })\n\n  const [axisDimensions] = axisDimensionsState\n\n  const isInteractingState = React.useState<boolean>(false)\n  const [isInteracting] = isInteractingState\n\n  const focusedDatumState = React.useState<Datum<TDatum> | null>(null)\n  const [focusedDatum] = focusedDatumState\n\n  // useAtom<Datum<TDatum> | null>(focusedDatumAtom)\n\n  const gridDimensions = React.useMemo((): GridDimensions => {\n    const padding = {\n      left:\n        typeof options.padding === 'object'\n          ? options.padding.left ?? defaultPadding\n          : options.padding,\n      right:\n        typeof options.padding === 'object'\n          ? options.padding.right ?? defaultPadding\n          : options.padding,\n      bottom:\n        typeof options.padding === 'object'\n          ? options.padding.bottom ?? defaultPadding\n          : options.padding,\n      top:\n        typeof options.padding === 'object'\n          ? options.padding.top ?? defaultPadding\n          : options.padding,\n    }\n\n    const left =\n      padding.left +\n      Math.max(\n        sum(Object.values(axisDimensions.left), d => d.width),\n        sum(Object.values(axisDimensions.top), d => d.paddingLeft),\n        sum(Object.values(axisDimensions.bottom), d => d.paddingLeft)\n      )\n\n    const top =\n      padding.top +\n      Math.max(\n        sum(Object.values(axisDimensions.top), d => d.height),\n        sum(Object.values(axisDimensions.left), d => d.paddingTop),\n        sum(Object.values(axisDimensions.right), d => d.paddingTop)\n      )\n\n    const right =\n      padding.right +\n      Math.max(\n        sum(Object.values(axisDimensions.right), d => d.width),\n        sum(Object.values(axisDimensions.top), d => d.paddingRight),\n        sum(Object.values(axisDimensions.bottom), d => d.paddingRight)\n      )\n\n    const bottom =\n      padding.bottom +\n      Math.max(\n        sum(Object.values(axisDimensions.bottom), d => d.height),\n        sum(Object.values(axisDimensions.left), d => d.paddingBottom),\n        sum(Object.values(axisDimensions.right), d => d.paddingBottom)\n      )\n\n    const gridWidth = Math.max(0, width - left - right)\n    const gridHeight = Math.max(0, height - top - bottom)\n\n    return { left, top, right, bottom, width: gridWidth, height: gridHeight }\n  }, [\n    options.padding,\n    axisDimensions.left,\n    axisDimensions.top,\n    axisDimensions.bottom,\n    axisDimensions.right,\n    width,\n    height,\n  ])\n\n  const series = React.useMemo(() => {\n    const series: Series<TDatum>[] = []\n\n    const indicesByAxisId: Record<string, number> = {}\n\n    for (\n      let seriesIndex = 0;\n      seriesIndex < options.data.length;\n      seriesIndex++\n    ) {\n      const originalSeries = options.data[seriesIndex]\n      const seriesId = originalSeries.id ?? seriesIndex + ''\n      const seriesLabel = originalSeries.label ?? `Series ${seriesIndex + 1}`\n      const secondaryAxisId = originalSeries.secondaryAxisId\n      const originalDatums = originalSeries.data\n      const datums = []\n\n      indicesByAxisId[`${secondaryAxisId}`] =\n        indicesByAxisId[`${secondaryAxisId}`] ?? 0\n      const seriesIndexPerAxis = indicesByAxisId[`${secondaryAxisId}`]\n\n      indicesByAxisId[`${secondaryAxisId}`]++\n\n      for (\n        let datumIndex = 0;\n        datumIndex < originalDatums.length;\n        datumIndex++\n      ) {\n        const originalDatum = originalDatums[datumIndex]\n        datums[datumIndex] = {\n          originalSeries,\n          seriesIndex,\n          seriesIndexPerAxis,\n          seriesId,\n          seriesLabel,\n          secondaryAxisId,\n          index: datumIndex,\n          originalDatum,\n        }\n      }\n\n      series[seriesIndex] = {\n        originalSeries,\n        index: seriesIndex,\n        id: seriesId,\n        label: seriesLabel,\n        indexPerAxis: seriesIndexPerAxis,\n        secondaryAxisId,\n        datums,\n      }\n    }\n\n    return series\n  }, [options.data])\n\n  let allDatums = React.useMemo(() => {\n    return series.map(s => s.datums).flat(2)\n  }, [series])\n\n  const primaryAxis = React.useMemo(() => {\n    return buildAxisLinear<TDatum>(\n      true,\n      primaryAxisOptions,\n      series,\n      allDatums,\n      gridDimensions,\n      width,\n      height\n    )\n  }, [allDatums, gridDimensions, height, primaryAxisOptions, series, width])\n\n  const secondaryAxes = React.useMemo(() => {\n    return secondaryAxesOptions.map(secondaryAxis => {\n      return buildAxisLinear<TDatum>(\n        false,\n        secondaryAxis,\n        series,\n        allDatums,\n        gridDimensions,\n        width,\n        height\n      )\n    })\n  }, [allDatums, gridDimensions, height, secondaryAxesOptions, series, width])\n\n  const [datumsByInteractionGroup, datumsByTooltipGroup] = React.useMemo(() => {\n    if (!isInteracting) {\n      return [new Map(), new Map()]\n    }\n\n    const datumsByInteractionGroup = new Map<any, Datum<TDatum>[]>()\n    const datumsByTooltipGroup = new Map<any, Datum<TDatum>[]>()\n\n    const allBarAndNotStacked = secondaryAxes.every(\n      d => d.elementType === 'bar' && !d.stacked\n    )\n\n    let getInteractionPrimary = (datum: Datum<TDatum>) => {\n      if (allBarAndNotStacked) {\n        const secondaryAxis = secondaryAxes.find(\n          d => d.id === datum.secondaryAxisId\n        )!\n\n        if (secondaryAxis.elementType === 'bar' && !secondaryAxis.stacked) {\n          return getPrimary(datum, primaryAxis, secondaryAxis)\n        }\n      }\n\n      return datum.primaryValue\n    }\n\n    let getInteractionKey = (datum: Datum<TDatum>) =>\n      `${getInteractionPrimary(datum)}`\n    let getTooltipKey = (datum: Datum<TDatum>) => `${datum.primaryValue}`\n\n    if (options.interactionMode === 'closest') {\n      getInteractionKey = datum =>\n        `${getInteractionPrimary(datum)}_${datum.secondaryValue}`\n    }\n\n    if (tooltipOptions.groupingMode === 'single') {\n      getTooltipKey = datum => `${datum.primaryValue}_${datum.secondaryValue}`\n    } else if (tooltipOptions.groupingMode === 'secondary') {\n      getTooltipKey = datum => `${datum.secondaryValue}`\n    } else if (tooltipOptions.groupingMode === 'series') {\n      getTooltipKey = datum => `${datum.seriesIndex}`\n    }\n\n    allDatums.forEach(datum => {\n      const interactionKey = (getInteractionKey as Function)(datum)\n      const tooltipKey = (getTooltipKey as Function)(datum)\n\n      if (!datumsByInteractionGroup.has(interactionKey)) {\n        datumsByInteractionGroup.set(interactionKey, [])\n      }\n\n      if (!datumsByTooltipGroup.has(tooltipKey)) {\n        datumsByTooltipGroup.set(tooltipKey, [])\n      }\n\n      datumsByInteractionGroup.get(interactionKey)!.push(datum)\n      datumsByTooltipGroup.get(tooltipKey)!.push(datum)\n    })\n\n    datumsByInteractionGroup.forEach((value, key) => {\n      datumsByInteractionGroup.set(\n        key,\n        sortDatumsBySecondaryPx(value, secondaryAxes)\n      )\n    })\n\n    datumsByTooltipGroup.forEach((value, key) => {\n      datumsByTooltipGroup.set(\n        key,\n        sortDatumsBySecondaryPx(value, secondaryAxes)\n      )\n    })\n\n    allDatums.forEach(datum => {\n      const interactionKey = (getInteractionKey as Function)(datum)\n      const tooltipKey = (getTooltipKey as Function)(datum)\n      datum.interactiveGroup = datumsByInteractionGroup.get(interactionKey)\n      datum.tooltipGroup = datumsByTooltipGroup.get(tooltipKey)\n    })\n\n    return [datumsByInteractionGroup, datumsByTooltipGroup]\n  }, [\n    isInteracting,\n    allDatums,\n    options.interactionMode,\n    primaryAxis,\n    secondaryAxes,\n    tooltipOptions.groupingMode,\n  ])\n\n  const getSeriesStatusStyle = React.useCallback(\n    (series: Series<TDatum>, focusedDatum: Datum<TDatum> | null) => {\n      const base = {\n        color:\n          getOptions().defaultColors[\n            series.index % getOptions().defaultColors.length\n          ],\n      }\n\n      const status = getSeriesStatus(series, focusedDatum)\n      const statusStyles = getOptions().getSeriesStyle?.(series, status) ?? {}\n      series.style = materializeStyles(statusStyles, base)\n      return series.style\n    },\n    [getOptions]\n  )\n\n  const getDatumStatusStyle = React.useCallback(\n    (datum: Datum<TDatum>, focusedDatum: Datum<TDatum> | null) => {\n      const base = {\n        ...series[datum.seriesIndex]?.style,\n        color:\n          getOptions().defaultColors[\n            datum.seriesIndex % getOptions().defaultColors.length\n          ],\n      }\n\n      const status = getDatumStatus(datum as Datum<TDatum>, focusedDatum)\n      const statusStyles =\n        getOptions().getDatumStyle?.(datum as Datum<TDatum>, status) ?? {}\n\n      datum.style = materializeStyles(statusStyles, base)\n\n      return datum.style\n    },\n    [getOptions, series]\n  )\n\n  // Reverse the stack order for proper z-indexing\n  let orderedSeries = React.useMemo(() => {\n    const reversedSeries = [...series].reverse()\n\n    return getOptions().getSeriesOrder(reversedSeries)\n  }, [getOptions, series])\n\n  useIsomorphicLayoutEffect(() => {\n    if (\n      svgRef.current &&\n      svgRef.current.parentElement &&\n      !svgRef.current.parentElement.style.position\n    ) {\n      svgRef.current.parentElement.style.position = 'relative'\n    }\n  })\n\n  const contextValue: ChartContextValue<TDatum> = {\n    getOptions,\n    gridDimensions,\n    primaryAxis,\n    secondaryAxes,\n    series,\n    orderedSeries,\n    datumsByInteractionGroup,\n    datumsByTooltipGroup,\n    width,\n    height,\n    getSeriesStatusStyle,\n    getDatumStatusStyle,\n    axisDimensionsState,\n    focusedDatumState,\n    svgRef,\n    isInteractingState,\n  }\n\n  const seriesByAxisId = React.useMemo(\n    () =>\n      sort(\n        groups(orderedSeries, d => d.secondaryAxisId),\n        ([key]) => secondaryAxes.findIndex(axis => axis.id === key)\n      ),\n    [orderedSeries, secondaryAxes]\n  )\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  let getSeriesInfo = () => ({\n    primaryAxis,\n    secondaryAxes,\n    seriesByAxisId,\n  })\n\n  let getMemoizedSeriesInfo = React.useCallback(\n    () => ({\n      primaryAxis,\n      secondaryAxes,\n      seriesByAxisId,\n    }),\n    [primaryAxis, secondaryAxes, seriesByAxisId]\n  )\n\n  if (options.memoizeSeries) {\n    getSeriesInfo = getMemoizedSeriesInfo\n  }\n\n  const seriesEl = React.useMemo(() => {\n    const { primaryAxis, secondaryAxes, seriesByAxisId } = getSeriesInfo()\n    return seriesByAxisId.map(([axisId, series]) => {\n      const secondaryAxis = secondaryAxes.find(d => d.id === axisId)\n\n      if (!secondaryAxis) {\n        return null\n      }\n\n      const { elementType } = secondaryAxis\n      const Component = (() => {\n        if (\n          elementType === 'line' ||\n          elementType === 'bubble' ||\n          elementType === 'area'\n        ) {\n          return Line\n        }\n        if (elementType === 'bar') {\n          return Bar\n        }\n        throw new Error('Invalid elementType')\n      })()\n\n      if (primaryAxis.isInvalid || secondaryAxis.isInvalid) {\n        return null\n      }\n\n      return (\n        <Component\n          key={axisId ?? '__default__'}\n          primaryAxis={primaryAxis}\n          secondaryAxis={secondaryAxis}\n          series={series}\n        />\n      )\n    })\n  }, [getSeriesInfo])\n\n  return (\n    <ChartContextProvider value={useGetLatest(contextValue)}>\n      <div>\n        <svg\n          ref={svgRef}\n          style={{\n            width,\n            height,\n            overflow: options.brush ? 'hidden' : 'visible',\n          }}\n          onClick={e => options.onClickDatum?.(focusedDatum, e)}\n          onMouseEnter={() => {\n            isInteractingState[1](true)\n          }}\n          onMouseLeave={() => {\n            isInteractingState[1](false)\n          }}\n        >\n          <g className=\"axes\">\n            {[primaryAxis, ...secondaryAxes].map(axis => (\n              <AxisLinear key={[axis.position, axis.id].join('')} {...axis} />\n            ))}\n          </g>\n          <g\n            className=\"Series\"\n            style={{\n              pointerEvents: 'none',\n            }}\n          >\n            {seriesEl}\n          </g>\n          <Voronoi />\n          {options.renderSVG?.() ?? null}\n        </svg>\n        <Cursors />\n        <Tooltip />\n      </div>\n    </ChartContextProvider>\n  )\n}\n\nfunction getFirstDefinedValue<TDatum>(\n  options: AxisOptions<TDatum>,\n  data: UserSerie<TDatum>[]\n) {\n  let firstDefinedValue: Date | number | string | undefined\n\n  data.some(serie => {\n    return serie.data.some(originalDatum => {\n      const value = options.getValue(originalDatum)\n      if (value !== null && typeof value !== 'undefined') {\n        firstDefinedValue = value\n        return true\n      }\n    })\n  })\n\n  return firstDefinedValue\n}\n\nfunction axisOptionsWithScaleType<TDatum>(\n  options: AxisOptions<TDatum>,\n  firstValue: Date | number | string | undefined\n): AxisOptionsWithScaleType<TDatum> {\n  let scaleType = options.scaleType\n\n  if (!options.scaleType) {\n    if (typeof firstValue === 'number') {\n      scaleType = 'linear'\n    } else if (typeof (firstValue as Date)?.getMonth === 'function') {\n      scaleType = 'time'\n    } else if (\n      typeof firstValue === 'string' ||\n      typeof firstValue === 'boolean'\n    ) {\n      scaleType = 'band'\n    } else {\n      throw new Error('Invalid scale type: Unable to infer type from data')\n    }\n  }\n\n  return { ...options, scaleType } as AxisOptionsWithScaleType<TDatum>\n}\n\nfunction sortDatumsBySecondaryPx<TDatum>(\n  datums: Datum<TDatum>[],\n  secondaryAxes: Axis<TDatum>[]\n) {\n  return [...datums].sort((a, b) => {\n    const aAxis = secondaryAxes.find(d => d.id === a.secondaryAxisId)\n    const bAxis = secondaryAxes.find(d => d.id === b.secondaryAxisId)\n\n    const aPx =\n      aAxis?.scale(aAxis.stacked ? a.stackData?.[1] : a.secondaryValue) ?? NaN\n\n    const bPx =\n      bAxis?.scale(bAxis.stacked ? b.stackData?.[1] : b.secondaryValue) ?? NaN\n\n    return aPx - bPx\n  })\n}\n"],"names":["_arrayLikeToArray","arr","len","length","i","arr2","Array","_createForOfIteratorHelperLoose","o","allowArrayLike","it","Symbol","iterator","call","next","bind","isArray","minLen","arrayLikeToArray","n","Object","prototype","toString","slice","constructor","name","from","test","unsupportedIterableToArray","done","value","TypeError","_objectWithoutPropertiesLoose","source","excluded","key","target","sourceKeys","keys","indexOf","_extends","assign","arguments","hasOwnProperty","apply","this","a","b","NaN","f","delta","compare","left","x","lo","hi","mid","d","ascending","ascendingComparator","center","right","bisectRight","bisector","values","valueof","min","max","undefined","index","InternMap","Map","entries","keyof","defineProperties","_intern","_key","set","get","super","intern_get","has","intern_set","delete","intern_delete","valueOf","groups","map","reduce","regroup","group","push","nest","identity","sort","F","Uint32Array","j","c","e10","Math","sqrt","e5","e2","start","stop","count","reverse","ticks","step","tickIncrement","isFinite","r0","round","r1","power","floor","log","LN10","error","pow","tickStep","step0","abs","step1","quickselect","array","k","m","z","s","exp","sd","t","swap","quantile","p","Float64Array","numbers","i0","value0","subarray","ceil","range","sum","useGetLatest","obj","ref","React","useRef","getterRef","current","window","useLayoutEffect","useEffect","elementTypes","materializeStyles","style","defaults","stroke","color","fill","normalizeColor","type","translate","y","isDefined","num","Number","isNaN","chartContext","createContext","ChartContextProvider","children","Provider","useChartContext","useContext","BarComponent","primaryAxis","secondaryAxis","allSeries","series","getSeriesStatusStyle","getDatumStatusStyle","focusedDatumState","gridDimensions","focusedDatum","xAxis","isVertical","yAxis","transform","top","datums","datum","dataStyle","clampPxToAxis","getSecondaryStart","getPrimary","getRectX","getSecondaryLength","getPrimaryLength","getWidth","width","getSecondary","getRectY","getHeight","height","el","element","strokeWidth","rectangle","getPrimaryGroupLength","_datum","primaryBandScale","bandwidth","axisFamily","bandWidth","stacked","scale","seriesBandScale","minBandSize","maxBandSize","secondary","primary","primaryValue","seriesIndex","stackData","_datum$stackData","_datum$stackData2","secondaryValue","startPx","lengthPx","axis","safe","safeStart","pi","PI","tau","epsilon","tauEpsilon","Path","_x0","_y0","_x1","_y1","_","path","Linear","context","_context","defined","constant","curve","curveLinear","output","line","data","buffer","defined0","lineStart","lineEnd","point","pointX","pointY","order","s0","s1","stackValue","stackSeries","sign","slope3","that","x2","y2","h0","h1","slope2","h","t0","t1","x0","y0","x1","y1","dx","bezierCurveTo","MonotoneX","moveTo","closePath","lineTo","quadraticCurveTo","arcTo","r","x21","y21","x01","y01","l01_2","Error","x20","y20","l21_2","l20_2","l21","l01","l","tan","acos","t01","t21","arc","a0","a1","ccw","cos","dy","sin","cw","da","rect","w","areaStart","_line","areaEnd","_point","_t0","create","monotoneX","Line","areaPath","elementType","_x","_y2","areaFn","area","x0z","y0z","arealine","lineX0","lineY0","lineY1","lineX1","every","_y","lineFn","linePath","showDatumElements","opacity","radius","show","cx","getX","cy","getY","transition","circle","px","initRange","domain","implicit","ordinal","unknown","copy","band","ordinalRange","paddingInner","paddingOuter","align","rescale","sequence","rangeRound","padding","factory","extend","parent","definition","Color","darker","brighter","reI","reN","reP","reHex","reRgbInteger","RegExp","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","format","trim","toLowerCase","exec","parseInt","rgbn","Rgb","rgba","hsla","g","rgbConvert","rgb_formatHex","hex","rgb_formatRgb","Hsl","hslConvert","hsl2rgb","m1","m2","define","channels","displayable","formatHsl","gamma","nogamma","exponential","linear","rgbGamma","end","colorRgb","genericArray","nb","na","Date","setTime","reA","reB","am","bm","bs","bi","lastIndex","q","number","one","zero","join","string","date","ArrayBuffer","isView","DataView","isNumberArray","numberArray","object","unit","normalize","bimap","interpolate","d0","d1","polymap","bisect","clamp","transformer","untransform","piecewise","input","interpolateValue","invert","interpolateNumber","interpolateRound","u","continuous","formatDecimalParts","toExponential","coefficient","prefixExponent","re","formatSpecifier","specifier","match","FormatSpecifier","symbol","comma","precision","exponent","toFixed","toLocaleString","replace","toPrecision","formatRounded","toUpperCase","locale","formatPrefix","prefixes","grouping","thousands","substring","currencyPrefix","currency","currencySuffix","decimal","numerals","formatNumerals","String","percent","minus","nan","newFormat","formatTypes","prefix","suffix","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","out","i1","formatTrim","charCodeAt","Infinity","e","tickFormat","precisionPrefix","precisionRound","precisionFixed","linearish","nice","prestep","maxIter","interval","transformLog","transformExp","transformLogn","transformExpn","pow10","reflect","loggish","logs","pows","base","E","log10","log2","logp","powp","v","formatLocale","newInterval","floori","offseti","field","offset","previous","filter","millisecond","durationSecond","durationMinute","durationHour","durationDay","durationWeek","durationMonth","durationYear","second","getMilliseconds","getUTCSeconds","minute","getSeconds","getMinutes","hour","getHours","day","setHours","setDate","getDate","getTimezoneOffset","weekday","getDay","sunday","monday","thursday","month","setMonth","getMonth","getFullYear","year","setFullYear","utcMinute","setUTCSeconds","getUTCMinutes","utcHour","setUTCMinutes","getUTCHours","utcDay","setUTCHours","setUTCDate","getUTCDate","utcWeekday","getUTCDay","utcSunday","utcMonday","utcThursday","utcMonth","setUTCMonth","getUTCMonth","getUTCFullYear","utcYear","setUTCFullYear","ticker","week","tickIntervals","tickInterval","utcTicks","utcTickInterval","utcWeek","timeTicks","timeTickInterval","localDate","H","M","S","L","utcDate","UTC","newDate","timeFormat","utcFormat","pads","numberRe","percentRe","requoteRe","pad","requote","formatRe","names","formatLookup","parseWeekdayNumberSunday","parseWeekdayNumberMonday","parseWeekNumberSunday","U","parseWeekNumberISO","V","parseWeekNumberMonday","W","parseFullYear","parseYear","parseZone","Z","parseQuarter","parseMonthNumber","parseDayOfMonth","parseDayOfYear","parseHour24","parseMinutes","parseSeconds","parseMilliseconds","parseMicroseconds","parseLiteralPercent","parseUnixTimestamp","Q","parseUnixTimestampSeconds","formatDayOfMonth","formatHour24","formatHour12","formatDayOfYear","timeDay","timeYear","formatMilliseconds","formatMicroseconds","formatMonthNumber","formatMinutes","formatSeconds","formatWeekdayNumberMonday","formatWeekNumberSunday","timeSunday","dISO","timeThursday","formatWeekNumberISO","formatWeekdayNumberSunday","formatWeekNumberMonday","timeMonday","formatYear","formatYearISO","formatFullYear","formatFullYearISO","formatZone","formatUTCDayOfMonth","formatUTCHour24","formatUTCHour12","formatUTCDayOfYear","formatUTCMilliseconds","getUTCMilliseconds","formatUTCMicroseconds","formatUTCMonthNumber","formatUTCMinutes","formatUTCSeconds","formatUTCWeekdayNumberMonday","dow","formatUTCWeekNumberSunday","UTCdISO","formatUTCWeekNumberISO","formatUTCWeekdayNumberSunday","formatUTCWeekNumberMonday","formatUTCYear","formatUTCYearISO","formatUTCFullYear","formatUTCFullYearISO","formatUTCZone","formatLiteralPercent","formatUnixTimestamp","formatUnixTimestampSeconds","calendar","formatMillisecond","formatSecond","formatMinute","formatHour","formatDay","formatWeek","formatMonth","time","timeMonth","timeWeek","timeHour","timeMinute","timeSecond","utcTime","utcSecond","buildAxisLinear","isPrimary","userOptions","allDatums","options","minTickPaddingForRotation","tickLabelRotationDeg","innerBandPadding","outerBandPadding","innerSeriesBandPadding","outerSeriesBandPadding","shouldNice","defaultAxisOptions","position","outerRange","scaleType","scaleFn","scaleTime","scaleUtc","isInvalid","secondaryAxisId","id","extent","getValue","originalDatum","minValue","maxValue","hardMin","hardMax","console","info","outerScale","buildPrimaryBandScale","buildSeriesBandScale","primaryBandWidth","padBandRange","bandStart","diff","defaultFormat","formatters","scaleFormat","_options$formatters","tooltipFormat","_options$formatters2","tooltip","cursorFormat","_options$formatters3","cursor","buildTimeAxis","scaleLog","scaleLinear","axisOptions","seriesIndices","orderNone","offsetNone","stack","oz","sz","_series$Number","_series$Number$datums","val","stackOffset","stackOffsetNone","stacker","sIndex","flat","minDomainLength","bottom","_options$formatters4","_options$formatters5","_options$formatters6","buildLinearAxis","scaleBand","Set","_options$formatters7","_options$formatters8","_options$formatters9","buildBandAxis","impliedBandWidth","serie","two","d3Range","find","_series$find","indexPerAxis","locale_dateTime","dateTime","locale_date","locale_time","locale_periods","periods","locale_weekdays","days","locale_shortWeekdays","shortDays","locale_months","months","locale_shortMonths","shortMonths","periodRe","periodLookup","weekdayRe","weekdayLookup","shortWeekdayRe","shortWeekdayLookup","monthRe","monthLookup","shortMonthRe","shortMonthLookup","formats","utcFormats","parses","parseSpecifier","charAt","newParse","parse","X","utcParse","defaultLocale","getElBox","getBoundingClientRect","AxisLinearComp","useState","showRotated","setShowRotated","getOptions","dark","showDebugAxes","elRef","axisDimensionsState","axisDimensions","setAxisDimensions","axisDimension","useMemo","_axisDimensions","measureRotation","useCallback","widestLabel","gridSize","staticLabelDims","querySelectorAll","forEach","label","resolvedLabel","smallestTickGap","prev","shouldRotate","measureDimensions","newDimensions","paddingTop","paddingBottom","paddingLeft","paddingRight","currentEl","axisEl","querySelector","domainEl","axisDims","domainDims","some","old","newAxes","useIsomorphicLayoutEffect","requestAnimationFrame","useMeasure","renderAxis","isOuter","isRotated","rangeStart","rangeEnd","resolvedHeight","resolvedWidth","lineFrom","anyAxis","tickCount","autoSpacing","getTicks","tick","getTickPx","to","gridTo","className","pointerEvents","tickLabelX","tickLabelY","fontSize","dominantBaseline","textAnchor","showGrid","usePrevious","useLatestWhen","when","usePortalElement","portalEl","setPortalEl","document","getElementById","createElement","setAttribute","body","append","rafId","props","observedNodes","run","changedStates","state","node","newRect","prop","cb","useRect","enabled","setElement","setRect","observer","observe","wasEmpty","hasRectChanged","callbacks","unobserve","size","cancelAnimationFrame","observeRect","_setPrototypeOf","setPrototypeOf","__proto__","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","_construct","Parent","args","Class","isNativeReflectConstruct","instance","Function","almostEqual","almostZero","Spring","init","mass","springConstant","damping","_m","_k","_c","_solution","endPosition","_startTime","dt","getTime","setEnd","velocity","_solve","snap","initial","cmk","c1","c2","r2","useSpring","config","immediate","debug","springRef","callback","raf","rafCallback","useRaf","startRaf","stopRaf","getLineBackgroundColor","getBackgroundColor","defaultCursor","showLine","showLabel","Cursors","primaryOptions","primaryCursor","secondaryOptions","secondaryCursor","resolvedPrimaryOptions","resolvedSecondaryOptions","Cursor","svgRef","secondaryAxes","getTooltipOptions","latestFocusedDatum","siblingAxis","resolveValue","_d$stackData","datumValue","onChange","alignPctX","alignPctY","latestPropsValue","latestDatumValue","latestValue","siblingRange","bubbleX","bubbleY","lineStartX","lineStartY","lineEndX","lineEndY","lineHeight","lineWidth","formattedValue","svgRect","lineRef","bubbleRef","latestLineStartX","latestLineStartY","latestBubbleX","latestBubbleY","lineXSpring","lineYSpring","bubbleXSpring","bubbleYSpring","ReactDOM","createPortal","fontFamily","background","borderRadius","whiteSpace","sideSchemas","side","startKey","lengthKey","crossStartKey","crossLengthKey","fromEnd","useAnchor","portalDims","anchorDims","anchorEl","tooltipDims","tooltipEl","sides","alignStr","split","JSON","stringify","ready","fit","useLargest","fits","targetStart","fitRatio","crossTargetStart","parentStart","parentLength","crossParentStart","crossParentLength","anchorStart","anchorLength","crossAnchorStart","crossAnchorLength","crossAnchorWidth","targetLength","crossTargetLength","includes","measureFit","fitOnBestSide","visibility","tooltipRenderer","TooltipRenderer","latestFit","anchor","getDatumStyle","groupDatums","_props$focusedDatum","tooltipGroup","activeIndex","findIndex","resolvedShowCount","arrowPosition","triangleStyles","visibleSortedGroupDatums","hasPrevious","hasNext","finalAlign","backgroundColor","borderLeft","borderRight","borderTop","triangleSize","borderBottom","marginBottom","textAlign","groupingMode","seriesLabel","sortedDatum","active","datumSecondaryAxis","fontWeight","display","alignItems","justifyContent","Fragment","Tooltip","setTooltipEl","anchorRect","_latestFocusedDatum$e2","translateX","translateY","box","toJSON","previousAnchor","anchorStyle","tooltipRef","tooltipXSpring","tooltipYSpring","render","EPSILON","EDGE_STACK","Delaunator","points","defaultGetX","defaultGetY","coords","maxTriangles","_triangles","_halfedges","Int32Array","_hashSize","_hullPrev","_hullNext","_hullTri","_hullHash","_ids","_dists","update","hullPrev","hullNext","hullTri","hullHash","minX","minY","maxX","maxY","i2","minDist","dist","i0x","i0y","i1x","i1y","minRadius","circumradius","i2x","i2y","quicksort","hull","triangles","halfedges","orient","ax","ay","bx","by","ex","ey","bl","cl","circumcenter","_cx","_cy","_hullStart","hullSize","_hashKey","trianglesLen","_addTriangle","xp","yp","_legalize","pseudoAngle","ar","b0","al","p0","pr","pl","p1","inCircle","hbl","_link","br","orientIfSure","py","rx","ry","qx","qy","fx","fy","bp","cp","ids","dists","temp","tempDist","tmp","Polygon","Voronoi","delaunay","xmin","ymin","xmax","ymax","_circumcenters","vectors","_init","circumcenters","t2","t3","x3","y3","ab","inedges","ti","tj","xi","yi","xj","yj","_renderSegment","_project","renderBounds","renderCell","_clip","cell","cellPolygon","polygon","c0","_regioncode","_clipSegment","contains","_step","ci","neighbors","cj","loop","ai","li","aj","lj","_cell","e0","_clipInfinite","_clipFinite","e1","P","sx0","sy0","sx1","sy1","_edgecode","_edge","vx0","vy0","vxn","vyn","unshift","splice","vx","vy","jitter","Delaunay","flatArray","flatIterable","_delaunator","_hullIndex","collinear","bounds","hypot","hullIndex","voronoi","dc","renderHull","renderPoints","hullPolygon","renderTriangle","trianglePolygon","isInteractingState","setFocusedDatum","isInteracting","onFocusDatum","onClickDatum","showVoronoi","interactionMode","handleFocus","SingleVoronoi","PrimaryVoronoi","datumsByInteractionGroup","stackedVoronoi","useBarPx","preColumns","aAxis","bAxis","columns","all","primaryPx","primaryStart","primaryEnd","datumBoundaries","secondaryStart","secondaryEnd","_datum$stackData3","prevAxis","_prev$stackData","nextAxis","_next$stackData","onMouseLeave","column","datumBoundary","xEnd","yEnd","onMouseEnter","delaunayLineFn","polygons","voronoiData","cellPolygons","_datum$stackData4","defaultColorScheme","ChartInner","primaryAxisOptions","firstValue","getFirstDefinedValue","axisOptionsWithScaleType","secondaryAxesOptions","tooltipOptions","alignPriority","arrowPadding","defaultTooltip","_options","_options2","indicesByAxisId","originalSeries","seriesId","originalDatums","seriesIndexPerAxis","datumIndex","datumsByTooltipGroup","allBarAndNotStacked","getInteractionPrimary","getInteractionKey","getTooltipKey","interactionKey","tooltipKey","sortDatumsBySecondaryPx","interactiveGroup","defaultColors","status","getSeriesStatus","statusStyles","getSeriesStyle","_getOptions$getSeries2","_series$datum$seriesI","_datum$tooltipGroup","groupDatum","getDatumStatus","_getOptions$getDatumS2","orderedSeries","reversedSeries","getSeriesOrder","parentElement","contextValue","seriesByAxisId","getSeriesInfo","getMemoizedSeriesInfo","memoizeSeries","seriesEl","axisId","Component","Bar","overflow","brush","onClick","AxisLinear","renderSVG","firstDefinedValue","_a$stackData","_b$stackData","rest","initialWidth","initialHeight","useIntersectionObserver","intersectionObserverRootMargin","defaultChartOptions","chartElement","setContainerElement","containerEl","nearestScrollableParent","grandParent","scrollHeight","clientHeight","getComputedStyle","setDims","computed","ResizeObserver","styles","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","isIntersecting","setIsIntersecting","IntersectionObserver","root","rootMargin"],"mappings":"osBAAe,SAASA,EAAkBC,EAAKC,IAClC,MAAPA,GAAeA,EAAMD,EAAIE,UAAQD,EAAMD,EAAIE,YAE1C,IAAIC,EAAI,EAAGC,EAAO,IAAIC,MAAMJ,GAAME,EAAIF,EAAKE,IAC9CC,EAAKD,GAAKH,EAAIG,UAGTC,ECNM,SAASE,EAAgCC,EAAGC,OACrDC,EAAuB,oBAAXC,QAA0BH,EAAEG,OAAOC,WAAaJ,EAAE,iBAC9DE,EAAI,OAAQA,EAAKA,EAAGG,KAAKL,IAAIM,KAAKC,KAAKL,MAEvCJ,MAAMU,QAAQR,KAAOE,ECJZ,SAAqCF,EAAGS,MAChDT,MACY,iBAANA,EAAgB,OAAOU,EAAiBV,EAAGS,OAClDE,EAAIC,OAAOC,UAAUC,SAAST,KAAKL,GAAGe,MAAM,GAAI,SAC1C,WAANJ,GAAkBX,EAAEgB,cAAaL,EAAIX,EAAEgB,YAAYC,MAC7C,QAANN,GAAqB,QAANA,EAAoBb,MAAMoB,KAAKlB,GACxC,cAANW,GAAqB,2CAA2CQ,KAAKR,GAAWD,EAAiBV,EAAGS,WDF1EW,CAA2BpB,KAAOC,GAAkBD,GAAyB,iBAAbA,EAAEL,OAAqB,CAC/GO,IAAIF,EAAIE,OACRN,EAAI,SACD,kBACDA,GAAKI,EAAEL,OAAe,CACxB0B,MAAM,GAED,CACLA,MAAM,EACNC,MAAOtB,EAAEJ,aAKT,IAAI2B,UAAU,yIEnBP,SAASC,EAA8BC,EAAQC,MAC9C,MAAVD,EAAgB,MAAO,OAGvBE,EAAK/B,EAFLgC,EAAS,GACTC,EAAajB,OAAOkB,KAAKL,OAGxB7B,EAAI,EAAGA,EAAIiC,EAAWlC,OAAQC,IACjC+B,EAAME,EAAWjC,GACb8B,EAASK,QAAQJ,IAAQ,IAC7BC,EAAOD,GAAOF,EAAOE,WAGhBC,ECZM,SAASI,WACtBA,EAAWpB,OAAOqB,QAAU,SAAUL,OAC/B,IAAIhC,EAAI,EAAGA,EAAIsC,UAAUvC,OAAQC,IAAK,KACrC6B,EAASS,UAAUtC,OAElB,IAAI+B,KAAOF,EACVb,OAAOC,UAAUsB,eAAe9B,KAAKoB,EAAQE,KAC/CC,EAAOD,GAAOF,EAAOE,WAKpBC,IAGOQ,MAAMC,KAAMH,WCff,WAASI,EAAGC,UAClBD,EAAIC,GAAK,EAAID,EAAIC,EAAI,EAAID,GAAKC,EAAI,EAAIC,ICChC,WAASC,OAClBC,EAAQD,EACRE,EAAUF,WAOLG,EAAKN,EAAGO,EAAGC,EAAIC,OACZ,MAAND,IAAYA,EAAK,GACX,MAANC,IAAYA,EAAKT,EAAE3C,QAChBmD,EAAKC,GAAI,OACRC,EAAOF,EAAKC,IAAQ,EACtBJ,EAAQL,EAAEU,GAAMH,GAAK,EAAGC,EAAKE,EAAM,EAClCD,EAAKC,SAELF,SAbQ,IAAbL,EAAE9C,SACJ+C,EAAQ,CAACO,EAAGJ,IAAMJ,EAAEQ,GAAKJ,EACzBF,EAmCJ,SAA6BF,SACpB,CAACQ,EAAGJ,IAAMK,EAAUT,EAAEQ,GAAIJ,GApCrBM,CAAoBV,IAgCzB,CAACG,KAAAA,EAAMQ,gBAPEd,EAAGO,EAAGC,EAAIC,GACd,MAAND,IAAYA,EAAK,GACX,MAANC,IAAYA,EAAKT,EAAE3C,cACjBC,EAAIgD,EAAKN,EAAGO,EAAGC,EAAIC,EAAK,UACvBnD,EAAIkD,GAAMJ,EAAMJ,EAAE1C,EAAI,GAAIiD,IAAMH,EAAMJ,EAAE1C,GAAIiD,GAAKjD,EAAI,EAAIA,GAG5CyD,eAlBPf,EAAGO,EAAGC,EAAIC,OACb,MAAND,IAAYA,EAAK,GACX,MAANC,IAAYA,EAAKT,EAAE3C,QAChBmD,EAAKC,GAAI,OACRC,EAAOF,EAAKC,IAAQ,EACtBJ,EAAQL,EAAEU,GAAMH,GAAK,EAAGE,EAAKC,EAC5BF,EAAKE,EAAM,SAEXF,IC1BX,MACaQ,EADWC,EAASL,GACUG,MCL5B,WAASG,EAAQC,OAC1BC,EACAC,UACYC,IAAZH,MACG,MAAMnC,KAASkC,EACL,MAATlC,SACUsC,IAARF,EACEpC,GAASA,IAAOoC,EAAMC,EAAMrC,IAE5BoC,EAAMpC,IAAOoC,EAAMpC,GACnBqC,EAAMrC,IAAOqC,EAAMrC,SAIxB,KACDuC,GAAS,MACR,IAAIvC,KAASkC,EACiC,OAA5ClC,EAAQmC,EAAQnC,IAASuC,EAAOL,WACvBI,IAARF,EACEpC,GAASA,IAAOoC,EAAMC,EAAMrC,IAE5BoC,EAAMpC,IAAOoC,EAAMpC,GACnBqC,EAAMrC,IAAOqC,EAAMrC,WAKxB,CAACoC,EAAKC,GDpBaJ,GEPb,SAASV,UACT,OAANA,EAAaL,KAAOK,KFMgBO,OGPtC,MAAMU,UAAkBC,IAC7B/C,YAAYgD,EAASrC,EAAMsC,cAEzBrD,OAAOsD,iBAAiB7B,KAAM,CAAC8B,QAAS,CAAC7C,MAAO,IAAIyC,KAAQK,KAAM,CAAC9C,MAAOK,KAC3D,MAAXqC,EAAiB,IAAK,MAAOrC,EAAKL,KAAU0C,EAAS3B,KAAKgC,IAAI1C,EAAKL,GAEzEgD,IAAI3C,UACK4C,MAAMD,IAAIE,EAAWnC,KAAMV,IAEpC8C,IAAI9C,UACK4C,MAAME,IAAID,EAAWnC,KAAMV,IAEpC0C,IAAI1C,EAAKL,UACAiD,MAAMF,IA6BjB,UAAoBF,QAACA,EAADC,KAAUA,GAAO9C,SAC7BK,EAAMyC,EAAK9C,UACb6C,EAAQM,IAAI9C,GAAawC,EAAQG,IAAI3C,IACzCwC,EAAQE,IAAI1C,EAAKL,GACVA,GAjCYoD,CAAWrC,KAAMV,GAAML,GAE1CqD,OAAOhD,UACE4C,MAAMI,OAiCjB,UAAuBR,QAACA,EAADC,KAAUA,GAAO9C,SAChCK,EAAMyC,EAAK9C,GACb6C,EAAQM,IAAI9C,KACdL,EAAQ6C,EAAQG,IAAIhD,GACpB6C,EAAQQ,OAAOhD,WAEVL,EAvCesD,CAAcvC,KAAMV,KAqB5C,SAAS6C,GAAWL,QAACA,EAADC,KAAUA,GAAO9C,SAC7BK,EAAMyC,EAAK9C,UACV6C,EAAQM,IAAI9C,GAAOwC,EAAQG,IAAI3C,GAAOL,EAmB/C,SAAS2C,EAAM3C,UACI,OAAVA,GAAmC,iBAAVA,EAAqBA,EAAMuD,UAAYvD,EC3D1D,WAASuB,UACfA,ECMF,SAASiC,EAAOtB,KAAW1B,UAyBlC,SAAc0B,EAAQuB,EAAKC,EAAQlD,UACzB,SAASmD,EAAQzB,EAAQ5D,MAC3BA,GAAKkC,EAAKnC,OAAQ,OAAOqF,EAAOxB,SAC9BsB,EAAS,IAAIhB,EACbG,EAAQnC,EAAKlC,SACfiE,GAAS,MACR,MAAMvC,KAASkC,EAAQ,OACpB7B,EAAMsC,EAAM3C,IAASuC,EAAOL,GAC5B0B,EAAQJ,EAAOR,IAAI3C,GACrBuD,EAAOA,EAAMC,KAAK7D,GACjBwD,EAAOT,IAAI1C,EAAK,CAACL,QAEnB,MAAOK,EAAK6B,KAAWsB,EAC1BA,EAAOT,IAAI1C,EAAKsD,EAAQzB,EAAQ5D,WAE3BmF,EAAID,GAdL,CAeLtB,EAAQ,GAxCJ4B,CAAK5B,EAAQ1D,MAAMoB,KAAMmE,EAAUvD,GCL7B,SAASwD,EAAK9B,KAAW+B,MACC,mBAA5B/B,EAAOrD,OAAOC,UAA0B,MAAM,IAAImB,UAAU,0BACvEiC,EAAS1D,MAAMoB,KAAKsC,OACff,EAAIS,GAAaqC,KACL,IAAb9C,EAAE9C,QAAgB4F,EAAE5F,OAAS,EAAG,OAC5BkE,EAAQ2B,YAAYtE,KAAKsC,GAAQ,CAACP,EAAGrD,IAAMA,WAC7C2F,EAAE5F,OAAS,GACb4F,EAAIA,EAAER,KAAItC,GAAKe,EAAOuB,IAAItC,KAC1BoB,EAAMyB,MAAK,CAAC1F,EAAG6F,SACR,MAAMhD,KAAK8C,EAAG,OACXG,EAAIxC,EAAUT,EAAE7C,GAAI6C,EAAEgD,OACxBC,EAAG,OAAOA,QAIlBjD,EAAIe,EAAOuB,IAAItC,GACfoB,EAAMyB,MAAK,CAAC1F,EAAG6F,IAAMvC,EAAUT,EAAE7C,GAAI6C,EAAEgD,OCnBrBhE,EDqBL+B,ECrBa1B,EDqBL+B,ECpBlB/D,MAAMoB,KAAKY,GAAMH,GAAOF,EAAOE,KADzB,IAASF,EAAQK,SDuBvB0B,EAAO8B,KAAK7C,GEvBrB,IAAIkD,EAAMC,KAAKC,KAAK,IAChBC,EAAKF,KAAKC,KAAK,IACfE,EAAKH,KAAKC,KAAK,GAEJ,WAASG,EAAOC,EAAMC,OAC/BC,EAEAxF,EACAyF,EACAC,EAHAzG,GAAK,KAKqBsG,GAASA,GAAzBF,GAASA,MAAvBC,GAAQA,IACcC,EAAQ,EAAG,MAAO,CAACF,OACrCG,EAAUF,EAAOD,KAAOrF,EAAIqF,EAAOA,EAAQC,EAAMA,EAAOtF,GACT,KAA9C0F,EAAOC,EAAcN,EAAOC,EAAMC,MAAkBK,SAASF,GAAO,MAAO,MAE5EA,EAAO,EAAG,KACRG,EAAKZ,KAAKa,MAAMT,EAAQK,GAAOK,EAAKd,KAAKa,MAAMR,EAAOI,OACtDG,EAAKH,EAAOL,KAASQ,EACrBE,EAAKL,EAAOJ,KAAQS,EACxBN,EAAQ,IAAItG,MAAMa,EAAI+F,EAAKF,EAAK,KACvB5G,EAAIe,GAAGyF,EAAMxG,IAAM4G,EAAK5G,GAAKyG,MACjC,CACLA,GAAQA,MACJG,EAAKZ,KAAKa,MAAMT,EAAQK,GAAOK,EAAKd,KAAKa,MAAMR,EAAOI,OACtDG,EAAKH,EAAOL,KAASQ,EACrBE,EAAKL,EAAOJ,KAAQS,EACxBN,EAAQ,IAAItG,MAAMa,EAAI+F,EAAKF,EAAK,KACvB5G,EAAIe,GAAGyF,EAAMxG,IAAM4G,EAAK5G,GAAKyG,SAGpCF,GAASC,EAAMD,UAEZC,EAGF,SAASE,EAAcN,EAAOC,EAAMC,OACrCG,GAAQJ,EAAOD,GAASJ,KAAKjC,IAAI,EAAGuC,GACpCS,EAAQf,KAAKgB,MAAMhB,KAAKiB,IAAIR,GAAQT,KAAKkB,MACzCC,EAAQV,EAAOT,KAAKoB,IAAI,GAAIL,UACzBA,GAAS,GACTI,GAASpB,EAAM,GAAKoB,GAASjB,EAAK,EAAIiB,GAAShB,EAAK,EAAI,GAAKH,KAAKoB,IAAI,GAAIL,IAC1Ef,KAAKoB,IAAI,IAAKL,IAAUI,GAASpB,EAAM,GAAKoB,GAASjB,EAAK,EAAIiB,GAAShB,EAAK,EAAI,GAGlF,SAASkB,EAASjB,EAAOC,EAAMC,OAChCgB,EAAQtB,KAAKuB,IAAIlB,EAAOD,GAASJ,KAAKjC,IAAI,EAAGuC,GAC7CkB,EAAQxB,KAAKoB,IAAI,GAAIpB,KAAKgB,MAAMhB,KAAKiB,IAAIK,GAAStB,KAAKkB,OACvDC,EAAQG,EAAQE,SAChBL,GAASpB,EAAKyB,GAAS,GAClBL,GAASjB,EAAIsB,GAAS,EACtBL,GAAShB,IAAIqB,GAAS,GACxBnB,EAAOD,GAASoB,EAAQA,ECpDlB,SAASzD,EAAIH,EAAQC,OAC9BE,UACYC,IAAZH,MACG,MAAMnC,KAASkC,EACL,MAATlC,IACIqC,EAAMrC,QAAkBsC,IAARD,GAAqBrC,GAASA,KACpDqC,EAAMrC,OAGL,KACDuC,GAAS,MACR,IAAIvC,KAASkC,EACiC,OAA5ClC,EAAQmC,EAAQnC,IAASuC,EAAOL,MAC7BG,EAAMrC,QAAkBsC,IAARD,GAAqBrC,GAASA,KACpDqC,EAAMrC,UAILqC,EClBM,SAASD,EAAIF,EAAQC,OAC9BC,UACYE,IAAZH,MACG,MAAMnC,KAASkC,EACL,MAATlC,IACIoC,EAAMpC,QAAkBsC,IAARF,GAAqBpC,GAASA,KACpDoC,EAAMpC,OAGL,KACDuC,GAAS,MACR,IAAIvC,KAASkC,EACiC,OAA5ClC,EAAQmC,EAAQnC,IAASuC,EAAOL,MAC7BE,EAAMpC,QAAkBsC,IAARF,GAAqBpC,GAASA,KACpDoC,EAAMpC,UAILoC,ECdM,SAAS2D,EAAYC,EAAOC,EAAG3E,EAAO,EAAGS,EAAQiE,EAAM3H,OAAS,EAAGgD,EAAUO,QACnFG,EAAQT,GAAM,IACfS,EAAQT,EAAO,IAAK,OAChBjC,EAAI0C,EAAQT,EAAO,EACnB4E,EAAID,EAAI3E,EAAO,EACf6E,EAAI7B,KAAKiB,IAAIlG,GACb+G,EAAI,GAAM9B,KAAK+B,IAAI,EAAIF,EAAI,GAC3BG,EAAK,GAAMhC,KAAKC,KAAK4B,EAAIC,GAAK/G,EAAI+G,GAAK/G,IAAM6G,EAAI7G,EAAI,EAAI,GAAK,EAAI,GAGxE0G,EAAYC,EAAOC,EAFH3B,KAAKjC,IAAIf,EAAMgD,KAAKgB,MAAMW,EAAIC,EAAIE,EAAI/G,EAAIiH,IACzChC,KAAKlC,IAAIL,EAAOuC,KAAKgB,MAAMW,GAAK5G,EAAI6G,GAAKE,EAAI/G,EAAIiH,IACzBjF,SAGrCkF,EAAIP,EAAMC,OACZ3H,EAAIgD,EACJ6C,EAAIpC,MAERyE,EAAKR,EAAO1E,EAAM2E,GACd5E,EAAQ2E,EAAMjE,GAAQwE,GAAK,GAAGC,EAAKR,EAAO1E,EAAMS,GAE7CzD,EAAI6F,GAAG,KACZqC,EAAKR,EAAO1H,EAAG6F,KAAM7F,IAAK6F,EACnB9C,EAAQ2E,EAAM1H,GAAIiI,GAAK,KAAKjI,OAC5B+C,EAAQ2E,EAAM7B,GAAIoC,GAAK,KAAKpC,EAGL,IAA5B9C,EAAQ2E,EAAM1E,GAAOiF,GAAUC,EAAKR,EAAO1E,EAAM6C,MAC9CA,EAAGqC,EAAKR,EAAO7B,EAAGpC,IAErBoC,GAAK8B,IAAG3E,EAAO6C,EAAI,GACnB8B,GAAK9B,IAAGpC,EAAQoC,EAAI,UAEnB6B,EAGT,SAASQ,EAAKR,EAAO1H,EAAG6F,SAChBoC,EAAIP,EAAM1H,GAChB0H,EAAM1H,GAAK0H,EAAM7B,GACjB6B,EAAM7B,GAAKoC,ECrCE,SAASE,EAASvE,EAAQwE,EAAGvE,MAEpC9C,GADN6C,EAASyE,aAAa/G,KVFjB,UAAkBsC,EAAQC,WACfG,IAAZH,MACG,IAAInC,KAASkC,EACH,MAATlC,IAAkBA,GAASA,IAAUA,UACjCA,OAGL,KACDuC,GAAS,MACR,IAAIvC,KAASkC,EACiC,OAA5ClC,EAAQmC,EAAQnC,IAASuC,EAAOL,MAAqBlC,GAASA,IAAUA,UACrEA,IUTe4G,CAAQ1E,EAAQC,KAC1B9D,YACZqI,GAAKA,IAAM,GAAKrH,EAAI,EAAG,OAAO+C,EAAIF,MACnCwE,GAAK,EAAG,OAAOrE,EAAIH,OACnB7C,EACAf,GAAKe,EAAI,GAAKqH,EACdG,EAAKvC,KAAKgB,MAAMhH,GAChBwI,EAASzE,EAAI0D,EAAY7D,EAAQ2E,GAAIE,SAAS,EAAGF,EAAK,WAEnDC,GADM1E,EAAIF,EAAO6E,SAASF,EAAK,IACZC,IAAWxI,EAAIuI,ICf5B,WAASnC,EAAOC,EAAMI,GACnCL,GAASA,EAAOC,GAAQA,EAAMI,GAAQ1F,EAAIuB,UAAUvC,QAAU,GAAKsG,EAAOD,EAAOA,EAAQ,EAAG,GAAKrF,EAAI,EAAI,GAAK0F,UAE1GzG,GAAK,EACLe,EAAoD,EAAhDiF,KAAKjC,IAAI,EAAGiC,KAAK0C,MAAMrC,EAAOD,GAASK,IAC3CkC,EAAQ,IAAIzI,MAAMa,KAEbf,EAAIe,GACX4H,EAAM3I,GAAKoG,EAAQpG,EAAIyG,SAGlBkC,ECXM,SAASC,EAAIhF,EAAQC,OAC9B+E,EAAM,UACM5E,IAAZH,MACG,IAAInC,KAASkC,GACZlC,GAASA,KACXkH,GAAOlH,OAGN,KACDuC,GAAS,MACR,IAAIvC,KAASkC,GACZlC,GAASmC,EAAQnC,IAASuC,EAAOL,MACnCgF,GAAOlH,UAINkH,ECdM,SAASC,EAAgBC,OAChCC,EAAMC,UAAMC,OAAUH,GACtBI,EAAYF,UAAMC,gBAExBF,EAAII,QAAUL,EACTI,EAAUC,UACbD,EAAUC,QAAU,kBAAMJ,EAAII,UAGzBD,EAAUC,cCTc,oBAAXC,OAClBJ,UAAMK,gBACNL,UAAMM,UCoCV,IAAMC,EAAe,CAAC,OAAQ,OAAQ,YAAa,UAE5C,SAASC,EACdC,EACAC,YADAD,IAAAA,EAAoC,aACpCC,IAAAA,EAAuC,IAEvCD,EAgBF,SACEA,EACAC,eAGKD,GACHE,OAAQF,EAAME,QAAUF,EAAMG,OAASF,EAASC,QAAUD,EAASE,MACnEC,KAAMJ,EAAMI,MAAQJ,EAAMG,OAASF,EAASG,MAAQH,EAASE,QAvBvDE,CAAeL,EAAOC,OACzB,IAAI1J,EAAI,EAAGA,EAAIuJ,EAAaxJ,OAAQC,IAAK,KACtC+J,EAAOR,EAAavJ,GACtByJ,EAAMM,IAASL,EAASK,KAC1BN,EAAMM,GAAQP,EAAkBC,EAAMM,GAAOL,WAG1CD,EAGF,SAASO,EAAU/G,EAAWgH,wBACbjE,KAAKa,MAAM5D,UAAS+C,KAAKa,MAAMoD,YAgBhD,SAASC,EAAUC,SACF,iBAARA,IAAqBC,OAAOC,MAAMF,GCtElD,IAAMG,EAAetB,EAAMuB,cAAmB,MAEvC,SAASC,SACd9I,IAAAA,MACA+I,IAAAA,gBAKOzB,gBAACsB,EAAaI,UAAShJ,MAAOA,EAAO+I,SAAUA,IAGzC,SAASE,WACf3B,EAAM4B,WAAWN,EAAjBtB,GCTM,SAAS6B,SACtBC,IAAAA,YACAC,IAAAA,cACQC,IAARC,SAWIN,IAJFO,IAAAA,qBACAC,IAAAA,oBACAC,IAAAA,kBACAC,IAAAA,eAGKC,EAAgBF,KAEjBG,EAAQT,EAAYU,WAAaT,EAAgBD,EACjDW,EAAQX,EAAYU,WAAaV,EAAcC,SAGnD/B,6BACES,MAAO,CACLiC,UAAW1B,EAAUqB,EAAerI,KAAMqI,EAAeM,OAG1DX,EAAU7F,KAAI,SAAC8F,EAAQjL,OAChByJ,EAAQyB,EAAqBD,EAAQK,UAGzCtC,6BAAGjH,aAAc/B,GACdiL,EAAOW,OAAOzG,KAAI,SAAC0G,EAAO7L,eACnB8L,EAAYX,EAAoBU,EAAOP,KAE1BS,WAuGjC,SACEF,EACAf,EACAC,UAEOD,EAAYU,WACfQ,EAAkBH,EAAOd,GACzBkB,EAAWJ,EAAOf,EAAaC,GA7GrBmB,CAASL,EAAOf,EAAaC,MAAkBnI,aAuC/D,SACEiJ,EACAf,EACAC,UAEOD,EAAYU,WACfW,EAAmBN,EAAOd,GAC1BqB,EAAiBP,EAAOf,EAAaC,GA7C3BsB,CAASR,EAAOf,EAAaC,MAAkBnI,IAC/C2I,GAHKtI,OAAGqJ,SAKUP,WA4GlC,SACEF,EACAf,EACAC,UAEOD,EAAYU,WACfS,EAAWJ,EAAOf,EAAaC,GAC/BwB,EAAaV,EAAOd,GAlHVyB,CAASX,EAAOf,EAAaC,MAAkBnI,aA4C/D,SACEiJ,EACAf,EACAC,UAEOD,EAAYU,WACfY,EAAiBP,EAAOf,EAAaC,GACrCoB,EAAmBN,EAAOd,GAlDhB0B,CAAUZ,EAAOf,EAAaC,MAAkBnI,IAChD6I,GAHKxB,OAAGyC,cAOR1D,gCAEID,IAAK,SAAA4D,GACHd,EAAMe,QAAUD,GAElB5K,IAAK/B,EACLiD,EAAAA,EACAgH,EAAAA,EACAqC,MAAAA,EACAI,OAAAA,EACAjD,SACEoD,YAAa,GACVpD,EACAA,EAAMqD,UACNhB,EACAA,EAAUgB,qBAiC5B,SAASC,EACdC,EACAlC,UAEO9E,KAAKjC,IAAI+G,EAAYmC,iBAAkBC,YAAa,GAGtD,SAASd,EACdY,EACAlC,EACAC,MAE+B,SAA3BD,EAAYqC,WAAuB,SAC/BC,EAAYrC,EAAcsC,QAC5BvC,EAAYwC,MAAMJ,YAClBpC,EAAYyC,gBAAgBL,mBAEzBlH,KAAKlC,IACVkC,KAAKjC,IAAIqJ,WAAWtC,EAAY0C,eAAe,YAC/C1C,EAAY2C,eAAe,iBAIxBzH,KAAKjC,IACVgH,EAAcsC,QACVvC,EAAYmC,iBAAkBC,YAC9BpC,EAAYyC,gBAAiBL,YACjC,GAIJ,SAASf,EACPN,EACAd,OAEM2C,EAAY,CAChB1B,EAAkBH,EAAOd,GACzBwB,EAAaV,EAAOd,WAGf/E,KAAKuB,IAAImG,EAAU,GAAKA,EAAU,IAuBpC,SAASzB,EACdJ,EACAf,EACAC,WAEI4C,WAAU7C,EAAYwC,MAAMzB,EAAM+B,iBAAiBhL,KAExB,SAA3BkI,EAAYqC,aACdQ,GAAWZ,EAAsBlB,EAAOf,GAAe,GAGpDC,EAAcsC,WACjBM,YAEI7C,EAA8ByC,gBAAgB1B,EAAMgC,gBAAgBjL,YAGnE+K,EAGT,SAAS3B,EACPH,EACAd,sBAEIA,EAAcsC,iBACTtC,EAAcuC,wBAAMzB,EAAMiC,kBAANC,EAAkB,MAAMnL,QAAQA,aAGtDmI,EAAcuC,MAAM,MAAM1K,IAGnC,SAAS2J,EACPV,EACAd,sBAEIA,EAAcsC,iBACTtC,EAAcuC,wBAAMzB,EAAMiC,kBAANE,EAAkB,MAAMpL,QAAQA,aAGtDmI,EAAcuC,MAAMzB,EAAMoC,mBAAmBrL,IAGtD,SAASmJ,EACPmC,EACAC,EACAC,OAEMzF,EAAQyF,EAAKd,MAAM3E,QAErByF,EAAK5C,YACP7C,EAAMpC,cAGF8H,EAAO,SAAClE,UAAgBnE,KAAKjC,IAAI4E,EAAM,GAAI3C,KAAKlC,IAAIqG,EAAKxB,EAAM,MAE/D2F,EAAYD,EAAKH,SAIhB,CAACI,EAHQD,EAAKH,EAAUC,GACFG,GC/N/B,MAAMC,EAAKvI,KAAKwI,GACZC,EAAM,EAAIF,EACVG,GAAU,KACVC,GAAaF,EAAMC,GAEvB,SAASE,UACFC,IAAMpM,KAAKqM,SACXC,IAAMtM,KAAKuM,IAAM,UACjBC,EAAI,GAGX,SAASC,YACA,IAAIN,GCZE,YAAS3L,UACf,kBACEA,GCAI,YAASA,SACF,iBAANA,GAAkB,WAAYA,EACxCA,EACA/C,MAAMoB,KAAK2B,GCLjB,SAASkM,GAAOC,QACTC,SAAWD,EA2BH,YAASA,UACf,IAAID,GAAOC,GC7Bb,SAASnM,GAAEmF,UACTA,EAAE,GAGJ,SAAS6B,GAAE7B,UACTA,EAAE,GCCI,YAASnF,EAAGgH,OACrBqF,EAAUC,IAAS,GACnBH,EAAU,KACVI,EAAQC,GACRC,EAAS,cAKJC,EAAKC,OACR5P,EAEAqD,EAEAwM,EAHA9O,GAAK6O,EAAOlI,GAAMkI,IAAO7P,OAEzB+P,GAAW,MAGA,MAAXV,IAAiBM,EAASF,EAAMK,EAASX,OAExClP,EAAI,EAAGA,GAAKe,IAAKf,IACdA,EAAIe,GAAKuO,EAAQjM,EAAIuM,EAAK5P,GAAIA,EAAG4P,MAAWE,KAC5CA,GAAYA,GAAUJ,EAAOK,YAC5BL,EAAOM,WAEVF,GAAUJ,EAAOO,OAAOhN,EAAEI,EAAGrD,EAAG4P,IAAQ3F,EAAE5G,EAAGrD,EAAG4P,OAGlDC,EAAQ,OAAOH,EAAS,KAAMG,EAAS,IAAM,YApBnD5M,EAAiB,mBAANA,EAAmBA,OAAWe,IAANf,EAAmBiN,GAASX,GAAStM,GACxEgH,EAAiB,mBAANA,EAAmBA,OAAWjG,IAANiG,EAAmBkG,GAASZ,GAAStF,GAsBxE0F,EAAK1M,EAAI,SAASgM,UACT3M,UAAUvC,QAAUkD,EAAiB,mBAANgM,EAAmBA,EAAIM,IAAUN,GAAIU,GAAQ1M,GAGrF0M,EAAK1F,EAAI,SAASgF,UACT3M,UAAUvC,QAAUkK,EAAiB,mBAANgF,EAAmBA,EAAIM,IAAUN,GAAIU,GAAQ1F,GAGrF0F,EAAKL,QAAU,SAASL,UACf3M,UAAUvC,QAAUuP,EAAuB,mBAANL,EAAmBA,EAAIM,KAAWN,GAAIU,GAAQL,GAG5FK,EAAKH,MAAQ,SAASP,UACb3M,UAAUvC,QAAUyP,EAAQP,EAAc,MAAXG,IAAoBM,EAASF,EAAMJ,IAAWO,GAAQH,GAG9FG,EAAKP,QAAU,SAASH,UACf3M,UAAUvC,QAAe,MAALkP,EAAYG,EAAUM,EAAS,KAAOA,EAASF,EAAMJ,EAAUH,GAAIU,GAAQP,GAGjGO,ECvDM,YAAS1E,EAAQmF,OACvBrP,EAAIkK,EAAOlL,QAAU,MACvB,IAAW8F,EAAGwK,EAA2BtP,EAArCf,EAAI,EAAUsQ,EAAKrF,EAAOmF,EAAM,IAAQxI,EAAI0I,EAAGvQ,OAAQC,EAAIe,IAAKf,MACvEqQ,EAAKC,EAAIA,EAAKrF,EAAOmF,EAAMpQ,IACtB6F,EAAI,EAAGA,EAAI+B,IAAK/B,EACnByK,EAAGzK,GAAG,IAAMyK,EAAGzK,GAAG,GAAKwE,MAAMgG,EAAGxK,GAAG,IAAMwK,EAAGxK,GAAG,GAAKwK,EAAGxK,GAAG,GCLjD,YAASoF,WAClBlK,EAAIkK,EAAOlL,OAAQK,EAAI,IAAIF,MAAMa,KAC5BA,GAAK,GAAGX,EAAEW,GAAKA,SACjBX,ECET,SAASmQ,GAAWlN,EAAGtB,UACdsB,EAAEtB,GAGX,SAASyO,GAAYzO,SACbkJ,EAAS,UACfA,EAAOlJ,IAAMA,EACNkJ,ECTT,SAASwF,GAAKxN,UACLA,EAAI,GAAK,EAAI,EAOtB,SAASyN,GAAOC,EAAMC,EAAIC,OACpBC,EAAKH,EAAK5B,IAAM4B,EAAK9B,IACvBkC,EAAKH,EAAKD,EAAK5B,IACfsB,GAAMM,EAAK3B,IAAM2B,EAAK7B,MAAQgC,GAAOC,EAAK,IAAM,GAChDT,GAAMO,EAAKF,EAAK3B,MAAQ+B,GAAOD,EAAK,IAAM,GAC1C1I,GAAKiI,EAAKU,EAAKT,EAAKQ,IAAOA,EAAKC,UAE/BN,GAAKJ,GAAMI,GAAKH,IACftK,KAAKlC,IAAIkC,KAAKuB,IAAI8I,GAAKrK,KAAKuB,IAAI+I,GAAK,GAAMtK,KAAKuB,IAAIa,KAAO,EAKjE,SAAS4I,GAAOL,EAAM1I,OAChBgJ,EAAIN,EAAK5B,IAAM4B,EAAK9B,WACjBoC,GAAM,GAAKN,EAAK3B,IAAM2B,EAAK7B,KAAQmC,EAAIhJ,GAAK,EAAIA,EAMzD,SAASgI,GAAMU,EAAMO,EAAIC,OACnBC,EAAKT,EAAK9B,IACZwC,EAAKV,EAAK7B,IACVwC,EAAKX,EAAK5B,IACVwC,EAAKZ,EAAK3B,IACVwC,GAAMF,EAAKF,GAAM,EACnBT,EAAKtB,SAASoC,cACZL,EAAKI,EACLH,EAAKG,EAAKN,EACVI,EAAKE,EACLD,EAAKC,EAAKL,EACVG,EACAC,GAIJ,SAASG,GAAUtC,QACZC,SAAWD,KTlCbnO,UAAYiO,GAAKjO,UAAY,CAChCG,YAAawN,GACb+C,OAAQ,SAAS1O,EAAGgH,QACbgF,GAAK,KAAOxM,KAAKoM,IAAMpM,KAAKsM,KAAO9L,GAAK,KAAOR,KAAKqM,IAAMrM,KAAKuM,KAAO/E,IAE7E2H,UAAW,WACQ,OAAbnP,KAAKsM,WACFA,IAAMtM,KAAKoM,IAAKpM,KAAKuM,IAAMvM,KAAKqM,SAChCG,GAAK,MAGd4C,OAAQ,SAAS5O,EAAGgH,QACbgF,GAAK,KAAOxM,KAAKsM,KAAO9L,GAAK,KAAOR,KAAKuM,KAAO/E,IAEvD6H,iBAAkB,SAASR,EAAIC,EAAItO,EAAGgH,QAC/BgF,GAAK,MAAQqC,EAAM,MAAQC,EAAM,KAAO9O,KAAKsM,KAAO9L,GAAK,KAAOR,KAAKuM,KAAO/E,IAEnFwH,cAAe,SAASH,EAAIC,EAAIX,EAAIC,EAAI5N,EAAGgH,QACpCgF,GAAK,MAAQqC,EAAM,MAAQC,EAAM,MAAQX,EAAM,MAAQC,EAAM,KAAOpO,KAAKsM,KAAO9L,GAAK,KAAOR,KAAKuM,KAAO/E,IAE/G8H,MAAO,SAAST,EAAIC,EAAIX,EAAIC,EAAImB,GAC9BV,GAAMA,EAAIC,GAAMA,EAAIX,GAAMA,EAAIC,GAAMA,EAAImB,GAAKA,MACzCZ,EAAK3O,KAAKsM,IACVsC,EAAK5O,KAAKuM,IACViD,EAAMrB,EAAKU,EACXY,EAAMrB,EAAKU,EACXY,EAAMf,EAAKE,EACXc,EAAMf,EAAKE,EACXc,EAAQF,EAAMA,EAAMC,EAAMA,KAG1BJ,EAAI,EAAG,MAAM,IAAIM,MAAM,oBAAsBN,MAGhC,OAAbvP,KAAKsM,SACFE,GAAK,KAAOxM,KAAKsM,IAAMuC,GAAM,KAAO7O,KAAKuM,IAAMuC,QAIjD,GAAMc,EAAQ3D,GAKd,GAAM1I,KAAKuB,IAAI6K,EAAMH,EAAMC,EAAMC,GAAOzD,IAAasD,EAKrD,KACCO,EAAM3B,EAAKQ,EACXoB,EAAM3B,EAAKQ,EACXoB,EAAQR,EAAMA,EAAMC,EAAMA,EAC1BQ,EAAQH,EAAMA,EAAMC,EAAMA,EAC1BG,EAAM3M,KAAKC,KAAKwM,GAChBG,EAAM5M,KAAKC,KAAKoM,GAChBQ,EAAIb,EAAIhM,KAAK8M,KAAKvE,EAAKvI,KAAK+M,MAAMN,EAAQJ,EAAQK,IAAU,EAAIC,EAAMC,KAAS,GAC/EI,EAAMH,EAAID,EACVK,EAAMJ,EAAIF,EAGV3M,KAAKuB,IAAIyL,EAAM,GAAKtE,UACjBO,GAAK,KAAOqC,EAAK0B,EAAMb,GAAO,KAAOZ,EAAKyB,EAAMZ,SAGlDnD,GAAK,IAAM+C,EAAI,IAAMA,EAAI,WAAaI,EAAMG,EAAMJ,EAAMK,GAAQ,KAAO/P,KAAKsM,IAAMuC,EAAK2B,EAAMhB,GAAO,KAAOxP,KAAKuM,IAAMuC,EAAK0B,EAAMf,aApBjIjD,GAAK,KAAOxM,KAAKsM,IAAMuC,GAAM,KAAO7O,KAAKuM,IAAMuC,UAuBxD2B,IAAK,SAASjQ,EAAGgH,EAAG+H,EAAGmB,EAAIC,EAAIC,GAC7BpQ,GAAKA,EAAGgH,GAAKA,EAAWoJ,IAAQA,MAC5B7B,GADYQ,GAAKA,GACRhM,KAAKsN,IAAIH,GAClBI,EAAKvB,EAAIhM,KAAKwN,IAAIL,GAClB/B,EAAKnO,EAAIuO,EACTH,EAAKpH,EAAIsJ,EACTE,EAAK,EAAIJ,EACTK,EAAKL,EAAMF,EAAKC,EAAKA,EAAKD,KAG1BnB,EAAI,EAAG,MAAM,IAAIM,MAAM,oBAAsBN,GAGhC,OAAbvP,KAAKsM,SACFE,GAAK,IAAMmC,EAAK,IAAMC,GAIpBrL,KAAKuB,IAAI9E,KAAKsM,IAAMqC,GAAM1C,IAAW1I,KAAKuB,IAAI9E,KAAKuM,IAAMqC,GAAM3C,WACjEO,GAAK,IAAMmC,EAAK,IAAMC,GAIxBW,IAGD0B,EAAK,IAAGA,EAAKA,EAAKjF,EAAMA,GAGxBiF,EAAK/E,QACFM,GAAK,IAAM+C,EAAI,IAAMA,EAAI,QAAUyB,EAAK,KAAOxQ,EAAIuO,GAAM,KAAOvH,EAAIsJ,GAAM,IAAMvB,EAAI,IAAMA,EAAI,QAAUyB,EAAK,KAAOhR,KAAKsM,IAAMqC,GAAM,KAAO3O,KAAKuM,IAAMqC,GAIrJqC,EAAKhF,UACPO,GAAK,IAAM+C,EAAI,IAAMA,EAAI,SAAW0B,GAAMnF,GAAO,IAAMkF,EAAK,KAAOhR,KAAKsM,IAAM9L,EAAI+O,EAAIhM,KAAKsN,IAAIF,IAAO,KAAO3Q,KAAKuM,IAAM/E,EAAI+H,EAAIhM,KAAKwN,IAAIJ,OAGlJO,KAAM,SAAS1Q,EAAGgH,EAAG2J,EAAG3C,QACjBhC,GAAK,KAAOxM,KAAKoM,IAAMpM,KAAKsM,KAAO9L,GAAK,KAAOR,KAAKqM,IAAMrM,KAAKuM,KAAO/E,GAAK,MAAQ2J,EAAK,MAAQ3C,EAAK,KAAQ2C,EAAK,KAEzH1S,SAAU,kBACDuB,KAAKwM,IGzHhBE,GAAOlO,UAAY,CACjB4S,UAAW,gBACJC,MAAQ,GAEfC,QAAS,gBACFD,MAAQlR,KAEfmN,UAAW,gBACJiE,OAAS,GAEhBhE,QAAS,YACHvN,KAAKqR,OAAyB,IAAfrR,KAAKqR,OAA+B,IAAhBrR,KAAKuR,SAAevR,KAAK4M,SAASuC,iBACpEkC,MAAQ,EAAIrR,KAAKqR,OAExB7D,MAAO,SAAShN,EAAGgH,UACjBhH,GAAKA,EAAGgH,GAAKA,EACLxH,KAAKuR,aACN,OAAQA,OAAS,OAAQF,MAAQrR,KAAK4M,SAASwC,OAAO5O,EAAGgH,GAAKxH,KAAK4M,SAASsC,OAAO1O,EAAGgH,cACtF,OAAQ+J,OAAS,eACR3E,SAASwC,OAAO5O,EAAGgH,MM6BvCyH,GAAUzQ,UAAY,CACpB4S,UAAW,gBACJC,MAAQ,GAEfC,QAAS,gBACFD,MAAQlR,KAEfmN,UAAW,gBACJlB,IAAMpM,KAAKsM,IAAMtM,KAAKqM,IAAMrM,KAAKuM,IAAMvM,KAAKwR,IAAMrR,SAClDoR,OAAS,GAEhBhE,QAAS,kBACCvN,KAAKuR,aACN,OACE3E,SAASwC,OAAOpP,KAAKsM,IAAKtM,KAAKuM,gBAEjC,EACHiB,GAAMxN,KAAMA,KAAKwR,IAAKjD,GAAOvO,KAAMA,KAAKwR,OAGxCxR,KAAKqR,OAAyB,IAAfrR,KAAKqR,OAA+B,IAAhBrR,KAAKuR,SAC1CvR,KAAK4M,SAASuC,iBACXkC,MAAQ,EAAIrR,KAAKqR,OAExB7D,MAAO,SAAUhN,EAAGgH,OACdkH,EAAKvO,OAEGqH,GAAKA,GAAfhH,GAAKA,KACGR,KAAKsM,KAAO9E,IAAMxH,KAAKuM,YACzBvM,KAAKuR,aACN,OACEA,OAAS,OACTF,MAAQrR,KAAK4M,SAASwC,OAAO5O,EAAGgH,GAAKxH,KAAK4M,SAASsC,OAAO1O,EAAGgH,cAE/D,OACE+J,OAAS,aAEX,OACEA,OAAS,EACd/D,GAAMxN,KAAMuO,GAAOvO,KAAO0O,EAAKT,GAAOjO,KAAMQ,EAAGgH,IAAMkH,iBAGrDlB,GAAMxN,KAAMA,KAAKwR,IAAM9C,EAAKT,GAAOjO,KAAMQ,EAAGgH,SAIzC4E,IAAMpM,KAAKsM,IAAOtM,KAAKsM,IAAM9L,OAC7B6L,IAAMrM,KAAKuM,IAAOvM,KAAKuM,IAAM/E,OAC/BgK,IAAM9C,KAQSnQ,OAAOkT,OAAOxC,GAAUzQ,WAAYgP,MAAQ,SAClEhN,EACAgH,GAEAyH,GAAUzQ,UAAUgP,MAAMxP,KAAKgC,KAAMwH,EAAGhH,IAsBnC,IAAMkR,GAA0B,SAAA/E,UAAW,IAAIsC,GAAUtC,IC7HjD,SAASgF,YACtBtJ,IAAAA,YACAC,IAAAA,cACQC,IAARC,SAWIN,IAJFO,IAAAA,qBACAC,IAAAA,oBACAC,IAAAA,kBACAC,IAAAA,eAGImE,WAAQzE,EAAcyE,SAAS2E,GAE9B7I,EAAgBF,YAGrBpC,6BACES,MAAO,CACLiC,UAAW1B,EAAUqB,EAAerI,KAAMqI,EAAeM,OAG1DX,EAAU7F,KAAI,SAAC8F,EAAQjL,WAChByJ,EAAQyB,EAAqBD,EAAQK,GAEvC+I,EAA0B,QAEI,SAA9BtJ,EAAcuJ,YAAwB,KAClCC,EAAK,SAAC1I,UAAyBI,GAAWJ,EAAOf,IACjDkE,EAAM,SAACnD,UACXE,GA8IZ,SACEF,EACAd,sBAEIA,EAAcsC,iBACTtC,EAAcuC,wBAAMzB,EAAMiC,kBAANE,EAAkB,MAAMpL,QAAQA,aAGtDmI,EAAcuC,MAAM,MAAM1K,IArJrBoJ,CAAkBH,EAAOd,GACzBA,IAEEyJ,EAAM,SAAC3I,UACXE,GAAcQ,GAAaV,EAAOd,GAAgBA,IAC9C0J,EC1CD,SAASrD,EAAIC,EAAIE,OAC1BD,EAAK,KACLhC,EAAUC,IAAS,GACnBH,EAAU,KACVI,EAAQC,GACRC,EAAS,cAMJgF,EAAK9E,OACR5P,EACA6F,EACA8B,EAEAtE,EAEAwM,EAHA9O,GAAK6O,EAAOlI,GAAMkI,IAAO7P,OAEzB+P,GAAW,EAEX6E,EAAM,IAAIzU,MAAMa,GAChB6T,EAAM,IAAI1U,MAAMa,OAEL,MAAXqO,IAAiBM,EAASF,EAAMK,EAASX,OAExClP,EAAI,EAAGA,GAAKe,IAAKf,EAAG,MACjBA,EAAIe,GAAKuO,EAAQjM,EAAIuM,EAAK5P,GAAIA,EAAG4P,MAAWE,KAC5CA,GAAYA,EACdjK,EAAI7F,EACJ0P,EAAOmE,YACPnE,EAAOK,gBACF,KACLL,EAAOM,UACPN,EAAOK,YACFpI,EAAI3H,EAAI,EAAG2H,GAAK9B,IAAK8B,EACxB+H,EAAOO,MAAM0E,EAAIhN,GAAIiN,EAAIjN,IAE3B+H,EAAOM,UACPN,EAAOqE,UAGPjE,IACF6E,EAAI3U,IAAMoR,EAAG/N,EAAGrD,EAAG4P,GAAOgF,EAAI5U,IAAMqR,EAAGhO,EAAGrD,EAAG4P,GAC7CF,EAAOO,MAAMqB,GAAMA,EAAGjO,EAAGrD,EAAG4P,GAAQ+E,EAAI3U,GAAIuR,GAAMA,EAAGlO,EAAGrD,EAAG4P,GAAQgF,EAAI5U,QAIvE6P,EAAQ,OAAOH,EAAS,KAAMG,EAAS,IAAM,cAG1CgF,WACAlF,KAAOL,QAAQA,GAASE,MAAMA,GAAOJ,QAAQA,UA3CtDgC,EAAmB,mBAAPA,EAAoBA,OAAapN,IAAPoN,EAAoBlB,GAASX,IAAU6B,GAC7EC,EAAmB,mBAAPA,EAAoBA,EAA0B9B,QAAbvL,IAAPqN,EAA6B,GAAeA,GAClFE,EAAmB,mBAAPA,EAAoBA,OAAavN,IAAPuN,EAAoBpB,GAASZ,IAAUgC,GA4C7EmD,EAAKzR,EAAI,SAASgM,UACT3M,UAAUvC,QAAUqR,EAAkB,mBAANnC,EAAmBA,EAAIM,IAAUN,GAAIqC,EAAK,KAAMoD,GAAQtD,GAGjGsD,EAAKtD,GAAK,SAASnC,UACV3M,UAAUvC,QAAUqR,EAAkB,mBAANnC,EAAmBA,EAAIM,IAAUN,GAAIyF,GAAQtD,GAGtFsD,EAAKpD,GAAK,SAASrC,UACV3M,UAAUvC,QAAUuR,EAAU,MAALrC,EAAY,KAAoB,mBAANA,EAAmBA,EAAIM,IAAUN,GAAIyF,GAAQpD,GAGzGoD,EAAKzK,EAAI,SAASgF,UACT3M,UAAUvC,QAAUsR,EAAkB,mBAANpC,EAAmBA,EAAIM,IAAUN,GAAIsC,EAAK,KAAMmD,GAAQrD,GAGjGqD,EAAKrD,GAAK,SAASpC,UACV3M,UAAUvC,QAAUsR,EAAkB,mBAANpC,EAAmBA,EAAIM,IAAUN,GAAIyF,GAAQrD,GAGtFqD,EAAKnD,GAAK,SAAStC,UACV3M,UAAUvC,QAAUwR,EAAU,MAALtC,EAAY,KAAoB,mBAANA,EAAmBA,EAAIM,IAAUN,GAAIyF,GAAQnD,GAGzGmD,EAAKI,OACLJ,EAAKK,OAAS,kBACLF,IAAW5R,EAAEmO,GAAInH,EAAEoH,IAG5BqD,EAAKM,OAAS,kBACLH,IAAW5R,EAAEmO,GAAInH,EAAEsH,IAG5BmD,EAAKO,OAAS,kBACLJ,IAAW5R,EAAEqO,GAAIrH,EAAEoH,IAG5BqD,EAAKpF,QAAU,SAASL,UACf3M,UAAUvC,QAAUuP,EAAuB,mBAANL,EAAmBA,EAAIM,KAAWN,GAAIyF,GAAQpF,GAG5FoF,EAAKlF,MAAQ,SAASP,UACb3M,UAAUvC,QAAUyP,EAAQP,EAAc,MAAXG,IAAoBM,EAASF,EAAMJ,IAAWsF,GAAQlF,GAG9FkF,EAAKtF,QAAU,SAASH,UACf3M,UAAUvC,QAAe,MAALkP,EAAYG,EAAUM,EAAS,KAAOA,EAASF,EAAMJ,EAAUH,GAAIyF,GAAQtF,GAGjGsF,ED5DgBA,CAAoBH,EAAIvF,EAAKwF,GAAKhF,MAAMA,GAEvDiF,EAAOnF,SAAQ,SAAAzD,SACb,CAAC0I,EAAG1I,GAAQmD,EAAInD,GAAQ2I,EAAI3I,IAAQqJ,MAAMhL,MAG5CmK,EAAWI,EAAOxJ,EAAOW,YAGrB2I,EAAK,SAAC1I,UAAyBI,GAAWJ,EAAOf,IACjDqK,EAAK,SAACtJ,UAAyBU,GAAaV,EAAOd,IACnDqK,EAASzF,GAAoB4E,EAAIY,GAAI3F,MAAMA,GACjD4F,EAAO9F,SAAQ,SAAAzD,SAAS,CAAC0I,EAAG1I,GAAQsJ,EAAGtJ,IAAQqJ,MAAMhL,UAE/CmL,GAC0B,SAA9BtK,EAAcuJ,aACgB,SAA9BvJ,EAAcuJ,uBACVc,EAAOnK,EAAOW,gBACd5H,EAEAsR,WACJvK,EAAcuK,qBACiB,WAA9BvK,EAAcuJ,aAA4B,iBAG3CtL,6BAAGjH,aAAc/B,GACdqU,EACCrL,gCACE3F,EAAGgR,EACH5K,SACEoD,YAAa,EACb0I,QAAS,IACN9L,EACAA,EAAMiL,QAGX,KACHW,EACCrM,gCACE3F,EAAGgS,EACH5L,SACEoD,YAAa,GACVpD,EACAA,EAAMkG,MACT9F,KAAM,WAGR,KACHoB,EAAOW,OAAOzG,KAAI,SAAC0G,EAAO7L,SACnB8L,EAAYX,EAAoBU,EAAOP,GAEvCkK,EACkB,YAAtBF,EACIzJ,IAAUP,EACR,EACA,EACF,EAEAmK,EACkB,YAAtBH,EACIzJ,IAAUP,WACVP,EAAcuK,qBACgB,WAA9BvK,EAAcuJ,mBAGlBtL,kCACEjH,IAAK/B,EACL+I,IAAK,SAAA4D,GACHd,EAAMe,QAAUD,GAElB+I,GAAIC,GAAK9J,EAAOf,EAAaC,IAAkB,EAC/C6K,GAAIC,GAAKhK,EAAOf,EAAaC,IAAkB,EAC/CtB,SAEEuI,EAAGwD,EACHM,WAAY,oBACTrM,EACAA,EAAMsM,OACNjK,EACAA,EAAUiK,OACRN,EAAwB,GAAjB,CAAEF,QAAS,cAY3C,SAASI,GACP9J,EACAf,EACAC,UAEOD,EAAYU,WACfe,GAAaV,EAAOd,GACpBkB,GAAWJ,EAAOf,GAGxB,SAAS+K,GACPhK,EACAf,EACAC,UAEOD,EAAYU,WACfS,GAAWJ,EAAOf,GAClByB,GAAaV,EAAOd,GAG1B,SAASkB,GACPJ,EACAf,SAEI6C,WAAU7C,EAAYwC,MAAMzB,EAAM+B,iBAAiBhL,UAExB,SAA3BkI,EAAYqC,aACdQ,GAAW7C,EAAYwC,MAAMJ,YAAc,GAGtCS,EAGT,SAASpB,GACPV,EACAd,sBAEIA,EAAcsC,iBACTtC,EAAcuC,wBAAMzB,EAAMiC,kBAANC,EAAkB,MAAMnL,QAAQA,aAGtDmI,EAAcuC,MAAMzB,EAAMoC,mBAAmBrL,IActD,SAASmJ,GAAsBiK,EAAY5H,OACnCzF,EAAQyF,EAAKd,MAAM3E,eACrByF,EAAK5C,YACP7C,EAAMpC,UAGDP,KAAKjC,IAAI4E,EAAM,GAAI3C,KAAKlC,IAAIkS,EAAIrN,EAAM,KE1MxC,SAASsN,GAAUC,EAAQvN,UACxBrG,UAAUvC,aACX,aACA,OAAQ4I,MAAMuN,sBACLvN,MAAMA,GAAOuN,OAAOA,UAE7BzT,KCJF,MAAM0T,GAAW5V,OAAO,YAEhB,SAAS6V,SAClBnS,EAAQ,IAAIE,IACZ+R,EAAS,GACTvN,EAAQ,GACR0N,EAAUF,YAEL7I,EAAMjK,OACTtB,EAAMsB,EAAI,GAAIrD,EAAIiE,EAAMS,IAAI3C,OAC3B/B,EAAG,IACFqW,IAAYF,GAAU,OAAOE,EACjCpS,EAAMQ,IAAI1C,EAAK/B,EAAIkW,EAAO3Q,KAAKlC,WAE1BsF,GAAO3I,EAAI,GAAK2I,EAAM5I,eAG/BuN,EAAM4I,OAAS,SAASjH,OACjB3M,UAAUvC,OAAQ,OAAOmW,EAAO/U,QACrC+U,EAAS,GAAIjS,EAAQ,IAAIE,QACpB,MAAMzC,KAASuN,EAAG,OACflN,EAAML,EAAQ,GAChBuC,EAAMY,IAAI9C,IACdkC,EAAMQ,IAAI1C,EAAKmU,EAAO3Q,KAAK7D,WAEtB4L,GAGTA,EAAM3E,MAAQ,SAASsG,UACd3M,UAAUvC,QAAU4I,EAAQzI,MAAMoB,KAAK2N,GAAI3B,GAAS3E,EAAMxH,SAGnEmM,EAAM+I,QAAU,SAASpH,UAChB3M,UAAUvC,QAAUsW,EAAUpH,EAAG3B,GAAS+I,GAGnD/I,EAAMgJ,KAAO,kBACJF,GAAQF,EAAQvN,GAAO0N,QAAQA,IAGxCJ,GAAUzT,MAAM8K,EAAOhL,WAEhBgL,ECxCM,SAASiJ,SAMlB9P,EACAyG,EANAI,EAAQ8I,KAAUC,aAAQrS,GAC1BkS,EAAS5I,EAAM4I,OACfM,EAAelJ,EAAM3E,MACrB/B,EAAK,EACLE,EAAK,EAGLD,GAAQ,EACR4P,EAAe,EACfC,EAAe,EACfC,EAAQ,YAIHC,QACH7V,EAAImV,IAASnW,OACbwG,EAAUO,EAAKF,EACfR,EAAQG,EAAUO,EAAKF,EACvBP,EAAOE,EAAUK,EAAKE,EAC1BL,GAAQJ,EAAOD,GAASJ,KAAKjC,IAAI,EAAGhD,EAAI0V,EAA8B,EAAfC,GACnD7P,IAAOJ,EAAOT,KAAKgB,MAAMP,IAC7BL,IAAUC,EAAOD,EAAQK,GAAQ1F,EAAI0V,IAAiBE,EACtDzJ,EAAYzG,GAAQ,EAAIgQ,GACpB5P,IAAOT,EAAQJ,KAAKa,MAAMT,GAAQ8G,EAAYlH,KAAKa,MAAMqG,QACzDtJ,EAASiT,EAAS9V,GAAGoE,KAAI,SAASnF,UAAYoG,EAAQK,EAAOzG,YAC1DwW,EAAajQ,EAAU3C,EAAO2C,UAAY3C,iBAb5C0J,EAAM+I,QAgBb/I,EAAM4I,OAAS,SAASjH,UACf3M,UAAUvC,QAAUmW,EAAOjH,GAAI2H,KAAaV,KAGrD5I,EAAM3E,MAAQ,SAASsG,UACd3M,UAAUvC,SAAW6G,EAAIE,GAAMmI,EAAGrI,GAAMA,EAAIE,GAAMA,EAAI8P,KAAa,CAAChQ,EAAIE,IAGjFwG,EAAMwJ,WAAa,SAAS7H,UAClBrI,EAAIE,GAAMmI,EAAGrI,GAAMA,EAAIE,GAAMA,EAAID,GAAQ,EAAM+P,KAGzDtJ,EAAMJ,UAAY,kBACTA,GAGTI,EAAM7G,KAAO,kBACJA,GAGT6G,EAAMzG,MAAQ,SAASoI,UACd3M,UAAUvC,QAAU8G,IAAUoI,EAAG2H,KAAa/P,GAGvDyG,EAAMyJ,QAAU,SAAS9H,UAChB3M,UAAUvC,QAAU0W,EAAezQ,KAAKlC,IAAI,EAAG4S,GAAgBzH,GAAI2H,KAAaH,GAGzFnJ,EAAMmJ,aAAe,SAASxH,UACrB3M,UAAUvC,QAAU0W,EAAezQ,KAAKlC,IAAI,EAAGmL,GAAI2H,KAAaH,GAGzEnJ,EAAMoJ,aAAe,SAASzH,UACrB3M,UAAUvC,QAAU2W,GAAgBzH,EAAG2H,KAAaF,GAG7DpJ,EAAMqJ,MAAQ,SAAS1H,UACd3M,UAAUvC,QAAU4W,EAAQ3Q,KAAKjC,IAAI,EAAGiC,KAAKlC,IAAI,EAAGmL,IAAK2H,KAAaD,GAG/ErJ,EAAMgJ,KAAO,kBACJC,GAAKL,IAAU,CAACtP,EAAIE,IACtBD,MAAMA,GACN4P,aAAaA,GACbC,aAAaA,GACbC,MAAMA,IAGNV,GAAUzT,MAAMoU,IAAWtU,WCjFrB,YAASlB,EAAa4V,EAAS/V,GAC5CG,EAAYH,UAAY+V,EAAQ/V,UAAYA,EAC5CA,EAAUG,YAAcA,EAGnB,SAAS6V,GAAOC,EAAQC,OACzBlW,EAAYD,OAAOkT,OAAOgD,EAAOjW,eAChC,IAAIc,KAAOoV,EAAYlW,EAAUc,GAAOoV,EAAWpV,UACjDd,ECNF,SAASmW,MAET,IAAIC,GAAS,GACTC,GAAW,EAAID,GAEtBE,GAAM,sBACNC,GAAM,gDACNC,GAAM,iDACNC,GAAQ,qBACRC,GAAe,IAAIC,OAAO,UAAY,CAACL,GAAKA,GAAKA,IAAO,QACxDM,GAAe,IAAID,OAAO,UAAY,CAACH,GAAKA,GAAKA,IAAO,QACxDK,GAAgB,IAAIF,OAAO,WAAa,CAACL,GAAKA,GAAKA,GAAKC,IAAO,QAC/DO,GAAgB,IAAIH,OAAO,WAAa,CAACH,GAAKA,GAAKA,GAAKD,IAAO,QAC/DQ,GAAe,IAAIJ,OAAO,UAAY,CAACJ,GAAKC,GAAKA,IAAO,QACxDQ,GAAgB,IAAIL,OAAO,WAAa,CAACJ,GAAKC,GAAKA,GAAKD,IAAO,QAE/DU,GAAQ,CACVC,UAAW,SACXC,aAAc,SACdC,KAAM,MACNC,WAAY,QACZC,MAAO,SACPC,MAAO,SACPC,OAAQ,SACRC,MAAO,EACPC,eAAgB,SAChBC,KAAM,IACNC,WAAY,QACZC,MAAO,SACPC,UAAW,SACXC,UAAW,QACXC,WAAY,QACZC,UAAW,SACXC,MAAO,SACPC,eAAgB,QAChBC,SAAU,SACVC,QAAS,SACTC,KAAM,MACNC,SAAU,IACVC,SAAU,MACVC,cAAe,SACfC,SAAU,SACVC,UAAW,MACXC,SAAU,SACVC,UAAW,SACXC,YAAa,QACbC,eAAgB,QAChBC,WAAY,SACZC,WAAY,SACZC,QAAS,QACTC,WAAY,SACZC,aAAc,QACdC,cAAe,QACfC,cAAe,QACfC,cAAe,QACfC,cAAe,MACfC,WAAY,QACZC,SAAU,SACVC,YAAa,MACbC,QAAS,QACTC,QAAS,QACTC,WAAY,QACZC,UAAW,SACXC,YAAa,SACbC,YAAa,QACbC,QAAS,SACTC,UAAW,SACXC,WAAY,SACZC,KAAM,SACNC,UAAW,SACXC,KAAM,QACNC,MAAO,MACPC,YAAa,SACbC,KAAM,QACNC,SAAU,SACVC,QAAS,SACTC,UAAW,SACXC,OAAQ,QACRC,MAAO,SACPC,MAAO,SACPC,SAAU,SACVC,cAAe,SACfC,UAAW,QACXC,aAAc,SACdC,UAAW,SACXC,WAAY,SACZC,UAAW,SACXC,qBAAsB,SACtBC,UAAW,SACXC,WAAY,QACZC,UAAW,SACXC,UAAW,SACXC,YAAa,SACbC,cAAe,QACfC,aAAc,QACdC,eAAgB,QAChBC,eAAgB,QAChBC,eAAgB,SAChBC,YAAa,SACbC,KAAM,MACNC,UAAW,QACXC,MAAO,SACPC,QAAS,SACTC,OAAQ,QACRC,iBAAkB,QAClBC,WAAY,IACZC,aAAc,SACdC,aAAc,QACdC,eAAgB,QAChBC,gBAAiB,QACjBC,kBAAmB,MACnBC,gBAAiB,QACjBC,gBAAiB,SACjBC,aAAc,QACdC,UAAW,SACXC,UAAW,SACXC,SAAU,SACVC,YAAa,SACbC,KAAM,IACNC,QAAS,SACTC,MAAO,QACPC,UAAW,QACXC,OAAQ,SACRC,UAAW,SACXC,OAAQ,SACRC,cAAe,SACfC,UAAW,SACXC,cAAe,SACfC,cAAe,SACfC,WAAY,SACZC,UAAW,SACXC,KAAM,SACNC,KAAM,SACNC,KAAM,SACNC,WAAY,SACZC,OAAQ,QACRC,cAAe,QACfC,IAAK,SACLC,UAAW,SACXC,UAAW,QACXC,YAAa,QACbC,OAAQ,SACRC,WAAY,SACZC,SAAU,QACVC,SAAU,SACVC,OAAQ,SACRC,OAAQ,SACRC,QAAS,QACTC,UAAW,QACXC,UAAW,QACXC,UAAW,QACXC,KAAM,SACNC,YAAa,MACbC,UAAW,QACX7N,IAAK,SACL8N,KAAM,MACNC,QAAS,SACTC,OAAQ,SACRC,UAAW,QACXC,OAAQ,SACRC,MAAO,SACPC,MAAO,SACPC,WAAY,SACZC,OAAQ,SACRC,YAAa,UAiBf,SAASC,YACA7e,KAAK8e,MAAMC,YAOpB,SAASC,YACAhf,KAAK8e,MAAMG,YAGL,SAAS9X,GAAM+X,OACxB/Z,EAAGiL,SACP8O,GAAUA,EAAS,IAAIC,OAAOC,eACtBja,EAAI8P,GAAMoK,KAAKH,KAAY9O,EAAIjL,EAAE,GAAG7H,OAAQ6H,EAAIma,SAASna,EAAE,GAAI,IAAW,IAANiL,EAAUmP,GAAKpa,GAC/E,IAANiL,EAAU,IAAIoP,GAAKra,GAAK,EAAI,GAAQA,GAAK,EAAI,IAAQA,GAAK,EAAI,GAAY,IAAJA,GAAiB,GAAJA,IAAY,EAAU,GAAJA,EAAU,GACzG,IAANiL,EAAUqP,GAAKta,GAAK,GAAK,IAAMA,GAAK,GAAK,IAAMA,GAAK,EAAI,KAAW,IAAJA,GAAY,KACrE,IAANiL,EAAUqP,GAAMta,GAAK,GAAK,GAAQA,GAAK,EAAI,IAAQA,GAAK,EAAI,GAAQA,GAAK,EAAI,IAAQA,GAAK,EAAI,GAAY,IAAJA,IAAkB,GAAJA,IAAY,EAAU,GAAJA,GAAY,KAClJ,OACCA,EAAI+P,GAAamK,KAAKH,IAAW,IAAIM,GAAIra,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAI,IAC3DA,EAAIiQ,GAAaiK,KAAKH,IAAW,IAAIM,GAAW,IAAPra,EAAE,GAAW,IAAY,IAAPA,EAAE,GAAW,IAAY,IAAPA,EAAE,GAAW,IAAK,IAC/FA,EAAIkQ,GAAcgK,KAAKH,IAAWO,GAAKta,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,KAC3DA,EAAImQ,GAAc+J,KAAKH,IAAWO,GAAY,IAAPta,EAAE,GAAW,IAAY,IAAPA,EAAE,GAAW,IAAY,IAAPA,EAAE,GAAW,IAAKA,EAAE,KAC/FA,EAAIoQ,GAAa8J,KAAKH,IAAWQ,GAAKva,EAAE,GAAIA,EAAE,GAAK,IAAKA,EAAE,GAAK,IAAK,IACpEA,EAAIqQ,GAAc6J,KAAKH,IAAWQ,GAAKva,EAAE,GAAIA,EAAE,GAAK,IAAKA,EAAE,GAAK,IAAKA,EAAE,IACxEsQ,GAAM3V,eAAeof,GAAUK,GAAK9J,GAAMyJ,IAC/B,gBAAXA,EAA2B,IAAIM,GAAIrf,IAAKA,IAAKA,IAAK,GAClD,KAGR,SAASof,GAAKjhB,UACL,IAAIkhB,GAAIlhB,GAAK,GAAK,IAAMA,GAAK,EAAI,IAAU,IAAJA,EAAU,GAG1D,SAASmhB,GAAKlQ,EAAGoQ,EAAGzf,EAAGD,UACjBA,GAAK,IAAGsP,EAAIoQ,EAAIzf,EAAIC,KACjB,IAAIqf,GAAIjQ,EAAGoQ,EAAGzf,EAAGD,GAGnB,SAAS2f,GAAWjiB,UACnBA,aAAagX,KAAQhX,EAAIwJ,GAAMxJ,IAChCA,EAEE,IAAI6hB,IADX7hB,EAAIA,EAAEmhB,OACWvP,EAAG5R,EAAEgiB,EAAGhiB,EAAEuC,EAAGvC,EAAEmV,SAFjB,IAAI0M,GAKd,SAASV,GAAIvP,EAAGoQ,EAAGzf,EAAG4S,UACC,IAArBjT,UAAUvC,OAAesiB,GAAWrQ,GAAK,IAAIiQ,GAAIjQ,EAAGoQ,EAAGzf,EAAc,MAAX4S,EAAkB,EAAIA,GAGlF,SAAS0M,GAAIjQ,EAAGoQ,EAAGzf,EAAG4S,QACtBvD,GAAKA,OACLoQ,GAAKA,OACLzf,GAAKA,OACL4S,SAAWA,EA2BlB,SAAS+M,WACA,IAAMC,GAAI9f,KAAKuP,GAAKuQ,GAAI9f,KAAK2f,GAAKG,GAAI9f,KAAKE,GAGpD,SAAS6f,SACH9f,EAAID,KAAK8S,eACC,KADQ7S,EAAI2H,MAAM3H,GAAK,EAAIsD,KAAKjC,IAAI,EAAGiC,KAAKlC,IAAI,EAAGpB,KAC/C,OAAS,SACrBsD,KAAKjC,IAAI,EAAGiC,KAAKlC,IAAI,IAAKkC,KAAKa,MAAMpE,KAAKuP,IAAM,IAAM,KACtDhM,KAAKjC,IAAI,EAAGiC,KAAKlC,IAAI,IAAKkC,KAAKa,MAAMpE,KAAK2f,IAAM,IAAM,KACtDpc,KAAKjC,IAAI,EAAGiC,KAAKlC,IAAI,IAAKkC,KAAKa,MAAMpE,KAAKE,IAAM,KACzC,IAAND,EAAU,IAAM,KAAOA,EAAI,KAGpC,SAAS6f,GAAI7gB,WACXA,EAAQsE,KAAKjC,IAAI,EAAGiC,KAAKlC,IAAI,IAAKkC,KAAKa,MAAMnF,IAAU,KACvC,GAAK,IAAM,IAAMA,EAAMR,SAAS,IAGlD,SAASihB,GAAKlR,EAAGnJ,EAAG+K,EAAGnQ,UACjBA,GAAK,EAAGuO,EAAInJ,EAAI+K,EAAIjQ,IACfiQ,GAAK,GAAKA,GAAK,EAAG5B,EAAInJ,EAAIlF,IAC1BkF,GAAK,IAAGmJ,EAAIrO,KACd,IAAI6f,GAAIxR,EAAGnJ,EAAG+K,EAAGnQ,GAGnB,SAASggB,GAAWtiB,MACrBA,aAAaqiB,GAAK,OAAO,IAAIA,GAAIriB,EAAE6Q,EAAG7Q,EAAE0H,EAAG1H,EAAEyS,EAAGzS,EAAEmV,YAChDnV,aAAagX,KAAQhX,EAAIwJ,GAAMxJ,KAChCA,EAAG,OAAO,IAAIqiB,MACfriB,aAAaqiB,GAAK,OAAOriB,MAEzB4R,GADJ5R,EAAIA,EAAEmhB,OACIvP,EAAI,IACVoQ,EAAIhiB,EAAEgiB,EAAI,IACVzf,EAAIvC,EAAEuC,EAAI,IACVmB,EAAMkC,KAAKlC,IAAIkO,EAAGoQ,EAAGzf,GACrBoB,EAAMiC,KAAKjC,IAAIiO,EAAGoQ,EAAGzf,GACrBsO,EAAIrO,IACJkF,EAAI/D,EAAMD,EACV+O,GAAK9O,EAAMD,GAAO,SAClBgE,GACamJ,EAAXe,IAAMjO,GAAUqe,EAAIzf,GAAKmF,EAAc,GAATsa,EAAIzf,GAC7Byf,IAAMre,GAAUpB,EAAIqP,GAAKlK,EAAI,GAC5BkK,EAAIoQ,GAAKta,EAAI,EACvBA,GAAK+K,EAAI,GAAM9O,EAAMD,EAAM,EAAIC,EAAMD,EACrCmN,GAAK,IAELnJ,EAAI+K,EAAI,GAAKA,EAAI,EAAI,EAAI5B,EAEpB,IAAIwR,GAAIxR,EAAGnJ,EAAG+K,EAAGzS,EAAEmV,SAO5B,SAASkN,GAAIxR,EAAGnJ,EAAG+K,EAAG0C,QACftE,GAAKA,OACLnJ,GAAKA,OACL+K,GAAKA,OACL0C,SAAWA,EAyClB,SAASoN,GAAQ1R,EAAG2R,EAAIC,UAIV,KAHJ5R,EAAI,GAAK2R,GAAMC,EAAKD,GAAM3R,EAAI,GAChCA,EAAI,IAAM4R,EACV5R,EAAI,IAAM2R,GAAMC,EAAKD,IAAO,IAAM3R,GAAK,GACvC2R,GAxMRE,GAAO1L,GAAOxN,GAAO,CACnB0M,KAAM,SAASyM,UACN/hB,OAAOqB,OAAO,IAAII,KAAKrB,YAAaqB,KAAMsgB,IAEnDC,YAAa,kBACJvgB,KAAK8e,MAAMyB,eAEpBT,IAAKjB,GACLE,UAAWF,GACX2B,UASF,kBACSP,GAAWjgB,MAAMwgB,aATxBvB,UAAWD,GACXvgB,SAAUugB,KA6DZqB,GAAOb,GAAKV,GAAKtK,GAAOG,GAAO,CAC7BE,SAAU,SAAS3P,UACjBA,EAAS,MAALA,EAAY2P,GAAWtR,KAAKoB,IAAIkQ,GAAU3P,GACvC,IAAIsa,GAAIxf,KAAKuP,EAAIrK,EAAGlF,KAAK2f,EAAIza,EAAGlF,KAAKE,EAAIgF,EAAGlF,KAAK8S,UAE1D8B,OAAQ,SAAS1P,UACfA,EAAS,MAALA,EAAY0P,GAASrR,KAAKoB,IAAIiQ,GAAQ1P,GACnC,IAAIsa,GAAIxf,KAAKuP,EAAIrK,EAAGlF,KAAK2f,EAAIza,EAAGlF,KAAKE,EAAIgF,EAAGlF,KAAK8S,UAE1DgM,IAAK,kBACI9e,MAETugB,YAAa,kBACF,IAAOvgB,KAAKuP,GAAKvP,KAAKuP,EAAI,QAC1B,IAAOvP,KAAK2f,GAAK3f,KAAK2f,EAAI,QAC1B,IAAO3f,KAAKE,GAAKF,KAAKE,EAAI,OAC3B,GAAKF,KAAK8S,SAAW9S,KAAK8S,SAAW,GAE/CgN,IAAKD,GACLd,UAAWc,GACXZ,UAAWc,GACXthB,SAAUshB,MAiEZM,GAAOL,IAXA,SAAaxR,EAAGnJ,EAAG+K,EAAG0C,UACC,IAArBjT,UAAUvC,OAAe2iB,GAAWzR,GAAK,IAAIwR,GAAIxR,EAAGnJ,EAAG+K,EAAc,MAAX0C,EAAkB,EAAIA,KAUxE0B,GAAOG,GAAO,CAC7BE,SAAU,SAAS3P,UACjBA,EAAS,MAALA,EAAY2P,GAAWtR,KAAKoB,IAAIkQ,GAAU3P,GACvC,IAAI8a,GAAIhgB,KAAKwO,EAAGxO,KAAKqF,EAAGrF,KAAKoQ,EAAIlL,EAAGlF,KAAK8S,UAElD8B,OAAQ,SAAS1P,UACfA,EAAS,MAALA,EAAY0P,GAASrR,KAAKoB,IAAIiQ,GAAQ1P,GACnC,IAAI8a,GAAIhgB,KAAKwO,EAAGxO,KAAKqF,EAAGrF,KAAKoQ,EAAIlL,EAAGlF,KAAK8S,UAElDgM,IAAK,eACCtQ,EAAIxO,KAAKwO,EAAI,IAAqB,KAAdxO,KAAKwO,EAAI,GAC7BnJ,EAAIuC,MAAM4G,IAAM5G,MAAM5H,KAAKqF,GAAK,EAAIrF,KAAKqF,EACzC+K,EAAIpQ,KAAKoQ,EACTgQ,EAAKhQ,GAAKA,EAAI,GAAMA,EAAI,EAAIA,GAAK/K,EACjC8a,EAAK,EAAI/P,EAAIgQ,SACV,IAAIZ,GACTU,GAAQ1R,GAAK,IAAMA,EAAI,IAAMA,EAAI,IAAK2R,EAAIC,GAC1CF,GAAQ1R,EAAG2R,EAAIC,GACfF,GAAQ1R,EAAI,IAAMA,EAAI,IAAMA,EAAI,IAAK2R,EAAIC,GACzCpgB,KAAK8S,UAGTyN,YAAa,kBACH,GAAKvgB,KAAKqF,GAAKrF,KAAKqF,GAAK,GAAKuC,MAAM5H,KAAKqF,KACzC,GAAKrF,KAAKoQ,GAAKpQ,KAAKoQ,GAAK,GACzB,GAAKpQ,KAAK8S,SAAW9S,KAAK8S,SAAW,GAE/C0N,UAAW,eACLvgB,EAAID,KAAK8S,eACC,KADQ7S,EAAI2H,MAAM3H,GAAK,EAAIsD,KAAKjC,IAAI,EAAGiC,KAAKlC,IAAI,EAAGpB,KAC/C,OAAS,UACpBD,KAAKwO,GAAK,GAAK,KACA,KAAfxO,KAAKqF,GAAK,GAAW,MACN,KAAfrF,KAAKoQ,GAAK,GAAW,KACf,IAANnQ,EAAU,IAAM,KAAOA,EAAI,gBCxWvBO,GAAK,IAAMA,ECmBnB,SAASigB,GAAMjZ,UACA,IAAZA,GAAKA,GAAWkZ,GAAU,SAASzgB,EAAGC,UACrCA,EAAID,EAbf,SAAqBA,EAAGC,EAAGsH,UAClBvH,EAAIsD,KAAKoB,IAAI1E,EAAGuH,GAAItH,EAAIqD,KAAKoB,IAAIzE,EAAGsH,GAAKvH,EAAGuH,EAAI,EAAIA,EAAG,SAAShC,UAC9DjC,KAAKoB,IAAI1E,EAAIuF,EAAItF,EAAGsH,IAWZmZ,CAAY1gB,EAAGC,EAAGsH,GAAKsF,GAASlF,MAAM3H,GAAKC,EAAID,IAInD,SAASygB,GAAQzgB,EAAGC,OAC7BU,EAAIV,EAAID,SACLW,EAzBT,SAAgBX,EAAGW,UACV,SAAS4E,UACPvF,EAAIuF,EAAI5E,GAuBNggB,CAAO3gB,EAAGW,GAAKkM,GAASlF,MAAM3H,GAAKC,EAAID,UCtBrC,SAAU4gB,EAASrZ,OAC5BL,EAAQsZ,GAAMjZ,YAETsX,EAAInb,EAAOmd,OACdvR,EAAIpI,GAAOxD,EAAQod,GAASpd,IAAQ4L,GAAIuR,EAAMC,GAASD,IAAMvR,GAC7DoQ,EAAIxY,EAAMxD,EAAMgc,EAAGmB,EAAInB,GACvBzf,EAAIiH,EAAMxD,EAAMzD,EAAG4gB,EAAI5gB,GACvB4S,EAAU4N,GAAQ/c,EAAMmP,QAASgO,EAAIhO,gBAClC,SAAStN,UACd7B,EAAM4L,EAAIA,EAAE/J,GACZ7B,EAAMgc,EAAIA,EAAEna,GACZ7B,EAAMzD,EAAIA,EAAEsF,GACZ7B,EAAMmP,QAAUA,EAAQtN,GACjB7B,EAAQ,WAInBmb,EAAI2B,MAAQI,EAEL/B,EAnBM,CAoBZ,GCzBY,YAAS7e,EAAGC,GACpBA,IAAGA,EAAI,QAGR3C,EAFAe,EAAI2B,EAAIsD,KAAKlC,IAAInB,EAAE5C,OAAQ2C,EAAE3C,QAAU,EACvC+F,EAAInD,EAAExB,eAEH,SAAS8G,OACTjI,EAAI,EAAGA,EAAIe,IAAKf,EAAG8F,EAAE9F,GAAK0C,EAAE1C,IAAM,EAAIiI,GAAKtF,EAAE3C,GAAKiI,SAChDnC,GCAJ,SAAS2d,GAAa/gB,EAAGC,OAK1B3C,EAJA0jB,EAAK/gB,EAAIA,EAAE5C,OAAS,EACpB4jB,EAAKjhB,EAAIsD,KAAKlC,IAAI4f,EAAIhhB,EAAE3C,QAAU,EAClCkD,EAAI,IAAI/C,MAAMyjB,GACd7d,EAAI,IAAI5F,MAAMwjB,OAGb1jB,EAAI,EAAGA,EAAI2jB,IAAM3jB,EAAGiD,EAAEjD,GAAK0B,GAAMgB,EAAE1C,GAAI2C,EAAE3C,SACvCA,EAAI0jB,IAAM1jB,EAAG8F,EAAE9F,GAAK2C,EAAE3C,UAEtB,SAASiI,OACTjI,EAAI,EAAGA,EAAI2jB,IAAM3jB,EAAG8F,EAAE9F,GAAKiD,EAAEjD,GAAGiI,UAC9BnC,GCnBI,YAASpD,EAAGC,OACrBU,EAAI,IAAIugB,YACLlhB,GAAKA,EAAGC,GAAKA,EAAG,SAASsF,UACvB5E,EAAEwgB,QAAQnhB,GAAK,EAAIuF,GAAKtF,EAAIsF,GAAI5E,GCH5B,YAASX,EAAGC,UAClBD,GAAKA,EAAGC,GAAKA,EAAG,SAASsF,UACvBvF,GAAK,EAAIuF,GAAKtF,EAAIsF,GCAd,YAASvF,EAAGC,OAGrBgF,EAFA3H,EAAI,GACJ8F,EAAI,OAMH6B,KAHK,OAANjF,GAA2B,iBAANA,IAAgBA,EAAI,IACnC,OAANC,GAA2B,iBAANA,IAAgBA,EAAI,IAEnCA,EACJgF,KAAKjF,EACP1C,EAAE2H,GAAKjG,GAAMgB,EAAEiF,GAAIhF,EAAEgF,IAErB7B,EAAE6B,GAAKhF,EAAEgF,UAIN,SAASM,OACTN,KAAK3H,EAAG8F,EAAE6B,GAAK3H,EAAE2H,GAAGM,UAClBnC,GClBX,IAAIge,GAAM,8CACNC,GAAM,IAAInM,OAAOkM,GAAIjiB,OAAQ,KAclB,YAASa,EAAGC,OAErBqhB,EACAC,EACAC,EAHAC,EAAKL,GAAIM,UAAYL,GAAIK,UAAY,EAIrCpkB,GAAK,EACL8H,EAAI,GACJuc,EAAI,OAGR3hB,GAAQ,GAAIC,GAAQ,IAGZqhB,EAAKF,GAAIhC,KAAKpf,MACduhB,EAAKF,GAAIjC,KAAKnf,MACfuhB,EAAKD,EAAGhgB,OAASkgB,IACpBD,EAAKvhB,EAAExB,MAAMgjB,EAAID,GACbpc,EAAE9H,GAAI8H,EAAE9H,IAAMkkB,EACbpc,IAAI9H,GAAKkkB,IAEXF,EAAKA,EAAG,OAASC,EAAKA,EAAG,IACxBnc,EAAE9H,GAAI8H,EAAE9H,IAAMikB,EACbnc,IAAI9H,GAAKikB,GAEdnc,IAAI9H,GAAK,KACTqkB,EAAE9e,KAAK,CAACvF,EAAGA,EAAGiD,EAAGqhB,GAAON,EAAIC,MAE9BE,EAAKJ,GAAIK,iBAIPD,EAAKxhB,EAAE5C,SACTmkB,EAAKvhB,EAAExB,MAAMgjB,GACTrc,EAAE9H,GAAI8H,EAAE9H,IAAMkkB,EACbpc,IAAI9H,GAAKkkB,GAKTpc,EAAE/H,OAAS,EAAKskB,EAAE,GA7C3B,SAAa1hB,UACJ,SAASsF,UACPtF,EAAEsF,GAAK,IA4CVsc,CAAIF,EAAE,GAAGphB,GApDjB,SAAcN,UACL,kBACEA,GAmDH6hB,CAAK7hB,IACJA,EAAI0hB,EAAEtkB,OAAQ,SAASkI,OACjB,IAAW7H,EAAPJ,EAAI,EAAMA,EAAI2C,IAAK3C,EAAG8H,GAAG1H,EAAIikB,EAAErkB,IAAIA,GAAKI,EAAE6C,EAAEgF,UAC9CH,EAAE2c,KAAK,MCnDT,YAAS/hB,EAAGC,OACPmD,EAAdmC,SAAWtF,SACH,MAALA,GAAmB,YAANsF,EAAkBsH,GAAS5M,IAClC,WAANsF,EAAiBqc,GACZ,WAANrc,GAAmBnC,EAAI8D,GAAMjH,KAAOA,EAAImD,EAAGyb,IAAOmD,GAClD/hB,aAAaiH,GAAQ2X,GACrB5e,aAAaihB,KAAOe,GNLrB,SAAuB1hB,UACrB2hB,YAAYC,OAAO5hB,MAAQA,aAAa6hB,UMKzCC,CAAcpiB,GAAKqiB,GACnB9kB,MAAMU,QAAQ+B,GAAK8gB,GACE,mBAAd9gB,EAAEsC,SAAgD,mBAAftC,EAAEzB,UAA2BmJ,MAAM1H,GAAKsiB,GAClFX,IAAQ5hB,EAAGC,GCpBJ,YAASD,EAAGC,UAClBD,GAAKA,EAAGC,GAAKA,EAAG,SAASsF,UACvBjC,KAAKa,MAAMnE,GAAK,EAAIuF,GAAKtF,EAAIsF,ICFzB,SAASqc,GAAOrhB,UACrBA,ECIV,IAAIiiB,GAAO,CAAC,EAAG,GAER,SAASzf,GAASxC,UAChBA,EAGT,SAASkiB,GAAUziB,EAAGC,UACZA,GAAMD,GAAKA,GACb,SAASO,UAAaA,EAAIP,GAAKC,GCbxB,SAAmBM,UACzB,kBACEA,GDYHsM,CAASlF,MAAM1H,GAAKC,IAAM,IAWlC,SAASwiB,GAAMlP,EAAQvN,EAAO0c,OACxBC,EAAKpP,EAAO,GAAIqP,EAAKrP,EAAO,GAAItP,EAAK+B,EAAM,GAAI7B,EAAK6B,EAAM,UAC1D4c,EAAKD,GAAIA,EAAKH,GAAUI,EAAID,GAAK1e,EAAKye,EAAYve,EAAIF,KACrD0e,EAAKH,GAAUG,EAAIC,GAAK3e,EAAKye,EAAYze,EAAIE,IAC3C,SAAS7D,UAAY2D,EAAG0e,EAAGriB,KAGpC,SAASuiB,GAAQtP,EAAQvN,EAAO0c,OAC1Bxf,EAAIG,KAAKlC,IAAIoS,EAAOnW,OAAQ4I,EAAM5I,QAAU,EAC5CsD,EAAI,IAAInD,MAAM2F,GACdmM,EAAI,IAAI9R,MAAM2F,GACd7F,GAAK,MAGLkW,EAAOrQ,GAAKqQ,EAAO,KACrBA,EAASA,EAAO/U,QAAQoF,UACxBoC,EAAQA,EAAMxH,QAAQoF,aAGfvG,EAAI6F,GACXxC,EAAErD,GAAKmlB,GAAUjP,EAAOlW,GAAIkW,EAAOlW,EAAI,IACvCgS,EAAEhS,GAAKqlB,EAAY1c,EAAM3I,GAAI2I,EAAM3I,EAAI,WAGlC,SAASiD,OACVjD,EAAIylB,EAAOvP,EAAQjT,EAAG,EAAG4C,GAAK,SAC3BmM,EAAEhS,GAAGqD,EAAErD,GAAGiD,KAId,SAASqT,GAAKzU,EAAQG,UACpBA,EACFkU,OAAOrU,EAAOqU,UACdvN,MAAM9G,EAAO8G,SACb0c,YAAYxjB,EAAOwjB,eACnBK,MAAM7jB,EAAO6jB,SACbrP,QAAQxU,EAAOwU,WAGf,SAASsP,SAIVja,EACAka,EACAvP,EAEAwP,EACAnW,EACAoW,EATA5P,EAASgP,GACTvc,EAAQuc,GACRG,EAAcU,GAIdL,EAAQjgB,YAKHmR,QA3DMlU,EAAGC,EACdsF,EA2DElH,EAAIiF,KAAKlC,IAAIoS,EAAOnW,OAAQ4I,EAAM5I,eAClC2lB,IAAUjgB,KA7DD/C,EA6D2BwT,EAAO,GA7D/BvT,EA6DmCuT,EAAOnV,EAAI,GA3D5D2B,EAAIC,IAAGsF,EAAIvF,EAAGA,EAAIC,EAAGA,EAAIsF,GA2DHyd,EA1DnB,SAASziB,UAAY+C,KAAKjC,IAAIrB,EAAGsD,KAAKlC,IAAInB,EAAGM,MA2DlD4iB,EAAY9kB,EAAI,EAAIykB,GAAUJ,GAC9B1V,EAASoW,EAAQ,KACVxY,WAGAA,EAAMrK,UACD,MAALA,GAAaoH,MAAMpH,GAAKA,GAAKoT,GAAW3G,IAAWA,EAASmW,EAAU3P,EAAO/Q,IAAIuG,GAAY/C,EAAO0c,KAAe3Z,EAAUga,EAAMziB,YAG5IqK,EAAM0Y,OAAS,SAAS/b,UACfyb,EAAME,GAAaE,IAAUA,EAAQD,EAAUld,EAAOuN,EAAO/Q,IAAIuG,GAAYua,MAAqBhc,MAG3GqD,EAAM4I,OAAS,SAASjH,UACf3M,UAAUvC,QAAUmW,EAAShW,MAAMoB,KAAK2N,EAAGqV,IAAS1N,KAAaV,EAAO/U,SAGjFmM,EAAM3E,MAAQ,SAASsG,UACd3M,UAAUvC,QAAU4I,EAAQzI,MAAMoB,KAAK2N,GAAI2H,KAAajO,EAAMxH,SAGvEmM,EAAMwJ,WAAa,SAAS7H,UACnBtG,EAAQzI,MAAMoB,KAAK2N,GAAIoW,EAAca,GAAkBtP,KAGhEtJ,EAAMoY,MAAQ,SAASzW,UACd3M,UAAUvC,QAAU2lB,IAAQzW,GAAWxJ,GAAUmR,KAAa8O,IAAUjgB,IAGjF6H,EAAM+X,YAAc,SAASpW,UACpB3M,UAAUvC,QAAUslB,EAAcpW,EAAG2H,KAAayO,GAG3D/X,EAAM+I,QAAU,SAASpH,UAChB3M,UAAUvC,QAAUsW,EAAUpH,EAAG3B,GAAS+I,GAG5C,SAASpO,EAAGke,UACjBza,EAAYzD,EAAG2d,EAAcO,EACtBvP,KAII,SAASwP,YACfT,IAAAA,CAAclgB,GAAUA,IElH1B,SAAS4gB,GAAmBpjB,EAAGmF,OAC/BpI,GAAKiD,EAAImF,EAAInF,EAAEqjB,cAAcle,EAAI,GAAKnF,EAAEqjB,iBAAiBnkB,QAAQ,MAAQ,EAAG,OAAO,SACpFnC,EAAGumB,EAActjB,EAAE9B,MAAM,EAAGnB,SAIzB,CACLumB,EAAYxmB,OAAS,EAAIwmB,EAAY,GAAKA,EAAYplB,MAAM,GAAKolB,GAChEtjB,EAAE9B,MAAMnB,EAAI,ICfF,YAASiD,UACfA,EAAIojB,GAAmBrgB,KAAKuB,IAAItE,KAASA,EAAE,GAAKL,ICFzD,ICCW4jB,GDDPC,GAAK,2EAEM,SAASC,GAAgBC,QAChCC,EAAQH,GAAG3E,KAAK6E,IAAa,MAAM,IAAIrU,MAAM,mBAAqBqU,OACpEC,SACG,IAAIC,GAAgB,CACzBhd,KAAM+c,EAAM,GACZjQ,MAAOiQ,EAAM,GACbnW,KAAMmW,EAAM,GACZE,OAAQF,EAAM,GACdpC,KAAMoC,EAAM,GACZta,MAAOsa,EAAM,GACbG,MAAOH,EAAM,GACbI,UAAWJ,EAAM,IAAMA,EAAM,GAAGzlB,MAAM,GACtCygB,KAAMgF,EAAM,GACZ7c,KAAM6c,EAAM,MAMT,SAASC,GAAgBF,QACzB9c,UAA0B7F,IAAnB2iB,EAAU9c,KAAqB,IAAM8c,EAAU9c,KAAO,QAC7D8M,WAA4B3S,IAApB2iB,EAAUhQ,MAAsB,IAAMgQ,EAAUhQ,MAAQ,QAChElG,UAA0BzM,IAAnB2iB,EAAUlW,KAAqB,IAAMkW,EAAUlW,KAAO,QAC7DqW,YAA8B9iB,IAArB2iB,EAAUG,OAAuB,GAAKH,EAAUG,OAAS,QAClEtC,OAASmC,EAAUnC,UACnBlY,WAA4BtI,IAApB2iB,EAAUra,WAAsBtI,GAAa2iB,EAAUra,WAC/Dya,QAAUJ,EAAUI,WACpBC,eAAoChjB,IAAxB2iB,EAAUK,eAA0BhjB,GAAa2iB,EAAUK,eACvEpF,OAAS+E,EAAU/E,UACnB7X,UAA0B/F,IAAnB2iB,EAAU5c,KAAqB,GAAK4c,EAAU5c,KAAO,GE9BpD,YAAS9G,EAAGmF,OACrB/E,EAAIgjB,GAAmBpjB,EAAGmF,OACzB/E,EAAG,OAAOJ,EAAI,OACfsjB,EAAcljB,EAAE,GAChB4jB,EAAW5jB,EAAE,UACV4jB,EAAW,EAAI,KAAO,IAAI/mB,OAAO+mB,GAAUxC,KAAK,KAAO8B,EACxDA,EAAYxmB,OAASknB,EAAW,EAAIV,EAAYplB,MAAM,EAAG8lB,EAAW,GAAK,IAAMV,EAAYplB,MAAM8lB,EAAW,GAC5GV,EAAc,IAAIrmB,MAAM+mB,EAAWV,EAAYxmB,OAAS,GAAG0kB,KAAK,KFWxEiC,GAAgBzlB,UAAY4lB,GAAgB5lB,UAe5C4lB,GAAgB5lB,UAAUC,SAAW,kBAC5BuB,KAAKoH,KACNpH,KAAKkU,MACLlU,KAAKgO,KACLhO,KAAKqkB,QACJrkB,KAAK+hB,KAAO,IAAM,UACHxgB,IAAfvB,KAAK6J,MAAsB,GAAKtG,KAAKjC,IAAI,EAAgB,EAAbtB,KAAK6J,SACjD7J,KAAKskB,MAAQ,IAAM,UACA/iB,IAAnBvB,KAAKukB,UAA0B,GAAK,IAAMhhB,KAAKjC,IAAI,EAAoB,EAAjBtB,KAAKukB,aAC3DvkB,KAAKmf,KAAO,IAAM,IACnBnf,KAAKsH,aGzCE,KACR,CAAC9G,EAAGmF,KAAW,IAAJnF,GAASikB,QAAQ9e,KAC3BnF,GAAM+C,KAAKa,MAAM5D,GAAG/B,SAAS,KAC7B+B,GAAMA,EAAI,KLPH,SAASA,UACf+C,KAAKuB,IAAItE,EAAI+C,KAAKa,MAAM5D,KAAO,KAChCA,EAAEkkB,eAAe,MAAMC,QAAQ,KAAM,IACrCnkB,EAAE/B,SAAS,OKMZ,CAAC+B,EAAGmF,IAAMnF,EAAEqjB,cAAcle,KAC1B,CAACnF,EAAGmF,IAAMnF,EAAEikB,QAAQ9e,KACpB,CAACnF,EAAGmF,IAAMnF,EAAEokB,YAAYjf,KACvBnF,GAAM+C,KAAKa,MAAM5D,GAAG/B,SAAS,KAC9B,CAAC+B,EAAGmF,IAAMkf,GAAkB,IAAJrkB,EAASmF,KACjCkf,KFVQ,SAASrkB,EAAGmF,OACrB/E,EAAIgjB,GAAmBpjB,EAAGmF,OACzB/E,EAAG,OAAOJ,EAAI,OACfsjB,EAAcljB,EAAE,GAChB4jB,EAAW5jB,EAAE,GACbrD,EAAIinB,GAAYT,GAAuE,EAAtDxgB,KAAKjC,KAAK,EAAGiC,KAAKlC,IAAI,EAAGkC,KAAKgB,MAAMigB,EAAW,MAAY,EAC5FlmB,EAAIwlB,EAAYxmB,cACbC,IAAMe,EAAIwlB,EACXvmB,EAAIe,EAAIwlB,EAAc,IAAIrmB,MAAMF,EAAIe,EAAI,GAAG0jB,KAAK,KAChDzkB,EAAI,EAAIumB,EAAYplB,MAAM,EAAGnB,GAAK,IAAMumB,EAAYplB,MAAMnB,GAC1D,KAAO,IAAIE,MAAM,EAAIF,GAAGykB,KAAK,KAAO4B,GAAmBpjB,EAAG+C,KAAKjC,IAAI,EAAGqE,EAAIpI,EAAI,IAAI,MEElFiD,GAAM+C,KAAKa,MAAM5D,GAAG/B,SAAS,IAAIqmB,gBACjCtkB,GAAM+C,KAAKa,MAAM5D,GAAG/B,SAAS,KCjBtB,YAAS+B,UACfA,ECQT,ICPIukB,GACO7F,GACA8F,GDKPtiB,GAAMjF,MAAMe,UAAUkE,IACtBuiB,GAAW,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAEhE,YAASF,OEZAG,EAAUC,EFa5BtiB,OAA4BtB,IAApBwjB,EAAOG,eAA+C3jB,IAArBwjB,EAAOI,UAA0BniB,IEbxDkiB,EFa+ExiB,GAAI1E,KAAK+mB,EAAOG,SAAUvd,QEb/Fwd,EFawGJ,EAAOI,UAAY,GEZpJ,SAASlmB,EAAO4K,WACjBtM,EAAI0B,EAAM3B,OACVkI,EAAI,GACJpC,EAAI,EACJuc,EAAIuF,EAAS,GACb5nB,EAAS,EAENC,EAAI,GAAKoiB,EAAI,IACdriB,EAASqiB,EAAI,EAAI9V,IAAO8V,EAAIpc,KAAKjC,IAAI,EAAGuI,EAAQvM,IACpDkI,EAAE1C,KAAK7D,EAAMmmB,UAAU7nB,GAAKoiB,EAAGpiB,EAAIoiB,OAC9BriB,GAAUqiB,EAAI,GAAK9V,KACxB8V,EAAIuF,EAAS9hB,GAAKA,EAAI,GAAK8hB,EAAS5nB,eAG/BkI,EAAE1B,UAAUke,KAAKmD,KFDtBE,OAAqC9jB,IAApBwjB,EAAOO,SAAyB,GAAKP,EAAOO,SAAS,GAAK,GAC3EC,OAAqChkB,IAApBwjB,EAAOO,SAAyB,GAAKP,EAAOO,SAAS,GAAK,GAC3EE,OAA6BjkB,IAAnBwjB,EAAOS,QAAwB,IAAMT,EAAOS,QAAU,GAChEC,OAA+BlkB,IAApBwjB,EAAOU,SAAyBziB,GGjBlC,SAASyiB,UACf,SAASxmB,UACPA,EAAM0lB,QAAQ,UAAU,SAASpnB,UAC/BkoB,GAAUloB,OHcqCmoB,CAAehjB,GAAI1E,KAAK+mB,EAAOU,SAAUE,SAC/FC,OAA6BrkB,IAAnBwjB,EAAOa,QAAwB,IAAMb,EAAOa,QAAU,GAChEC,OAAyBtkB,IAAjBwjB,EAAOc,MAAsB,IAAMd,EAAOc,MAAQ,GAC1DC,OAAqBvkB,IAAfwjB,EAAOe,IAAoB,MAAQf,EAAOe,IAAM,YAEjDC,EAAU7B,OAGb9c,GAFJ8c,EAAYD,GAAgBC,IAEP9c,KACjB8M,EAAQgQ,EAAUhQ,MAClBlG,EAAOkW,EAAUlW,KACjBqW,EAASH,EAAUG,OACnBtC,EAAOmC,EAAUnC,KACjBlY,EAAQqa,EAAUra,MAClBya,EAAQJ,EAAUI,MAClBC,EAAYL,EAAUK,UACtBpF,EAAO+E,EAAU/E,KACjB7X,EAAO4c,EAAU5c,KAGR,MAATA,GAAcgd,GAAQ,EAAMhd,EAAO,KAG7B0e,GAAY1e,UAAqB/F,IAAdgjB,IAA4BA,EAAY,IAAKpF,GAAO,EAAM7X,EAAO,MAG1Fya,GAAkB,MAAT3a,GAA0B,MAAV8M,KAAgB6N,GAAO,EAAM3a,EAAO,IAAK8M,EAAQ,SAI1E+R,EAAoB,MAAX5B,EAAiBgB,EAA4B,MAAXhB,GAAkB,SAASvlB,KAAKwI,GAAQ,IAAMA,EAAK8X,cAAgB,GAC9G8G,EAAoB,MAAX7B,EAAiBkB,EAAiB,OAAOzmB,KAAKwI,GAAQse,EAAU,GAKzEO,EAAaH,GAAY1e,GACzB8e,EAAc,aAAatnB,KAAKwI,YAU3B4X,EAAOjgB,OAGV1B,EAAGe,EAAG+E,EAFNgjB,EAAcJ,EACdK,EAAcJ,KAGL,MAAT5e,EACFgf,EAAcH,EAAWlnB,GAASqnB,EAClCrnB,EAAQ,OACH,KAIDsnB,GAHJtnB,GAASA,GAGmB,GAAK,EAAIA,EAAQ,KAG7CA,EAAQ2I,MAAM3I,GAAS6mB,EAAMK,EAAW5iB,KAAKuB,IAAI7F,GAAQslB,GAGrDpF,IAAMlgB,EIjFH,SAASoG,GACtBmhB,EAAK,IAAK,IAAkCC,EAA9BnoB,EAAI+G,EAAE/H,OAAQC,EAAI,EAAGuI,GAAM,EAAOvI,EAAIe,IAAKf,SAC/C8H,EAAE9H,QACH,IAAKuI,EAAK2gB,EAAKlpB,YACf,IAAgB,IAAPuI,IAAUA,EAAKvI,GAAGkpB,EAAKlpB,qBACtB8H,EAAE9H,GAAI,MAAMipB,EAAS1gB,EAAK,IAAGA,EAAK,UAG9CA,EAAK,EAAIT,EAAE3G,MAAM,EAAGoH,GAAMT,EAAE3G,MAAM+nB,EAAK,GAAKphB,EJyE3BqhB,CAAWznB,IAGzBsnB,GAA4B,IAAVtnB,GAAwB,MAAT+O,IAAcuY,GAAgB,GAGnEF,GAAeE,EAA0B,MAATvY,EAAeA,EAAO6X,EAAkB,MAAT7X,GAAyB,MAATA,EAAe,GAAKA,GAAQqY,EAC3GC,GAAwB,MAAThf,EAAe2d,GAAS,EAAIlB,GAAiB,GAAK,IAAMuC,GAAeC,GAA0B,MAATvY,EAAe,IAAM,IAIxHoY,MACF7oB,GAAK,EAAGe,EAAIW,EAAM3B,SACTC,EAAIe,MACkB,IAAzB+E,EAAIpE,EAAM0nB,WAAWppB,KAAc8F,EAAI,GAAI,CAC7CijB,GAAqB,KAANjjB,EAAWmiB,EAAUvmB,EAAMP,MAAMnB,EAAI,GAAK0B,EAAMP,MAAMnB,IAAM+oB,EAC3ErnB,EAAQA,EAAMP,MAAM,EAAGnB,UAQ3B+mB,IAAUvC,IAAM9iB,EAAQ4D,EAAM5D,EAAO2nB,EAAAA,QAGrCtpB,EAAS+oB,EAAY/oB,OAAS2B,EAAM3B,OAASgpB,EAAYhpB,OACzDgX,EAAUhX,EAASuM,EAAQ,IAAIpM,MAAMoM,EAAQvM,EAAS,GAAG0kB,KAAK5a,GAAQ,UAGtEkd,GAASvC,IAAM9iB,EAAQ4D,EAAMyR,EAAUrV,EAAOqV,EAAQhX,OAASuM,EAAQyc,EAAYhpB,OAASspB,EAAAA,GAAWtS,EAAU,IAG7GJ,OACD,IAAKjV,EAAQonB,EAAcpnB,EAAQqnB,EAAchS,YACjD,IAAKrV,EAAQonB,EAAc/R,EAAUrV,EAAQqnB,YAC7C,IAAKrnB,EAAQqV,EAAQ5V,MAAM,EAAGpB,EAASgX,EAAQhX,QAAU,GAAK+oB,EAAcpnB,EAAQqnB,EAAchS,EAAQ5V,MAAMpB,iBAC5G2B,EAAQqV,EAAU+R,EAAcpnB,EAAQqnB,SAG5Cb,EAASxmB,UA/DlBslB,OAA0BhjB,IAAdgjB,EAA0B,EAChC,SAASzlB,KAAKwI,GAAQ/D,KAAKjC,IAAI,EAAGiC,KAAKlC,IAAI,GAAIkjB,IAC/ChhB,KAAKjC,IAAI,EAAGiC,KAAKlC,IAAI,GAAIkjB,IAgE/BrF,EAAOzgB,SAAW,kBACTylB,EAAY,IAGdhF,QAaF,CACLA,OAAQ6G,EACRf,sBAZoBd,EAAWjlB,OAC3BmB,EAAI2lB,IAAW7B,EAAYD,GAAgBC,IAAsB5c,KAAO,IAAK4c,IAC7E2C,EAAiE,EAA7DtjB,KAAKjC,KAAK,EAAGiC,KAAKlC,IAAI,EAAGkC,KAAKgB,MAAMigB,GAASvlB,GAAS,KAC1DiG,EAAI3B,KAAKoB,IAAI,IAAKkiB,GAClBZ,EAAShB,GAAS,EAAI4B,EAAI,UACvB,SAAS5nB,UACPmB,EAAE8E,EAAIjG,GAASgnB,KKxIb,SAASa,GAAWnjB,EAAOC,EAAMC,EAAOqgB,OAEjDK,EADAvgB,EAAOY,EAASjB,EAAOC,EAAMC,WAEjCqgB,EAAYD,GAA6B,MAAbC,EAAoB,KAAOA,IACrC5c,UACX,QACCrI,EAAQsE,KAAKjC,IAAIiC,KAAKuB,IAAInB,GAAQJ,KAAKuB,IAAIlB,WACpB,MAAvBsgB,EAAUK,WAAsB3c,MAAM2c,ECRjC,SAASvgB,EAAM/E,UACrBsE,KAAKjC,IAAI,EAAgE,EAA7DiC,KAAKjC,KAAK,EAAGiC,KAAKlC,IAAI,EAAGkC,KAAKgB,MAAMigB,GAASvlB,GAAS,KAAWulB,GAASjhB,KAAKuB,IAAId,KDO5C+iB,CAAgB/iB,EAAM/E,MAASilB,EAAUK,UAAYA,GACpGS,GAAad,EAAWjlB,OAE5B,OACA,QACA,QACA,QACA,IACwB,MAAvBilB,EAAUK,WAAsB3c,MAAM2c,EEhBjC,SAASvgB,EAAM1C,UAC5B0C,EAAOT,KAAKuB,IAAId,GAAO1C,EAAMiC,KAAKuB,IAAIxD,GAAO0C,EACtCT,KAAKjC,IAAI,EAAGkjB,GAASljB,GAAOkjB,GAASxgB,IAAS,EFcKgjB,CAAehjB,EAAMT,KAAKjC,IAAIiC,KAAKuB,IAAInB,GAAQJ,KAAKuB,IAAIlB,QAAUsgB,EAAUK,UAAYA,GAAgC,MAAnBL,EAAU5c,iBAGlK,QACA,IACwB,MAAvB4c,EAAUK,WAAsB3c,MAAM2c,EGrBjC,SAASvgB,UACfT,KAAKjC,IAAI,GAAIkjB,GAASjhB,KAAKuB,IAAId,KHoBoBijB,CAAejjB,MAAQkgB,EAAUK,UAAYA,EAAuC,GAAP,MAAnBL,EAAU5c,cAIvH4X,GAAOgF,GItBT,SAASgD,GAAUrc,OACpB4I,EAAS5I,EAAM4I,cAEnB5I,EAAM9G,MAAQ,SAASF,OACjBjD,EAAI6S,WACD1P,EAAMnD,EAAE,GAAIA,EAAEA,EAAEtD,OAAS,GAAa,MAATuG,EAAgB,GAAKA,IAG3DgH,EAAMic,WAAa,SAASjjB,EAAOqgB,OAC7BtjB,EAAI6S,WACDqT,GAAWlmB,EAAE,GAAIA,EAAEA,EAAEtD,OAAS,GAAa,MAATuG,EAAgB,GAAKA,EAAOqgB,IAGvErZ,EAAMsc,KAAO,SAAStjB,GACP,MAATA,IAAeA,EAAQ,QAOvBujB,EACApjB,EANApD,EAAI6S,IACJ3N,EAAK,EACL2gB,EAAK7lB,EAAEtD,OAAS,EAChBqG,EAAQ/C,EAAEkF,GACVlC,EAAOhD,EAAE6lB,GAGTY,EAAU,OAEVzjB,EAAOD,IACTK,EAAOL,EAAOA,EAAQC,EAAMA,EAAOI,EACnCA,EAAO8B,EAAIA,EAAK2gB,EAAIA,EAAKziB,GAGpBqjB,KAAY,GAAG,KACpBrjB,EAAOC,EAAcN,EAAOC,EAAMC,MACrBujB,SACXxmB,EAAEkF,GAAMnC,EACR/C,EAAE6lB,GAAM7iB,EACD6P,EAAO7S,GACT,GAAIoD,EAAO,EAChBL,EAAQJ,KAAKgB,MAAMZ,EAAQK,GAAQA,EACnCJ,EAAOL,KAAK0C,KAAKrC,EAAOI,GAAQA,MAC3B,CAAA,KAAIA,EAAO,SAChBL,EAAQJ,KAAK0C,KAAKtC,EAAQK,GAAQA,EAClCJ,EAAOL,KAAKgB,MAAMX,EAAOI,GAAQA,EAInCojB,EAAUpjB,SAGL6G,GAGFA,EAGM,SAAS+V,SAClB/V,EAAQ8Y,YAEZ9Y,EAAMgJ,KAAO,kBACJA,GAAKhJ,EAAO+V,OAGrBpN,GAAUzT,MAAM8K,EAAOhL,WAEhBqnB,GAAUrc,GCpEJ,SAASsc,GAAK1T,EAAQ6T,OAO/B9hB,EAJAM,EAAK,EACL2gB,GAHJhT,EAASA,EAAO/U,SAGApB,OAAS,EACrBqR,EAAK8E,EAAO3N,GACZ+I,EAAK4E,EAAOgT,UAGZ5X,EAAKF,IACPnJ,EAAIM,EAAIA,EAAK2gB,EAAIA,EAAKjhB,EACtBA,EAAImJ,EAAIA,EAAKE,EAAIA,EAAKrJ,GAGxBiO,EAAO3N,GAAMwhB,EAAS/iB,MAAMoK,GAC5B8E,EAAOgT,GAAMa,EAASrhB,KAAK4I,GACpB4E,ECVT,SAAS8T,GAAa/mB,UACb+C,KAAKiB,IAAIhE,GAGlB,SAASgnB,GAAahnB,UACb+C,KAAK+B,IAAI9E,GAGlB,SAASinB,GAAcjnB,UACb+C,KAAKiB,KAAKhE,GAGpB,SAASknB,GAAclnB,UACb+C,KAAK+B,KAAK9E,GAGpB,SAASmnB,GAAMnnB,UACN0D,SAAS1D,KAAO,KAAOA,GAAKA,EAAI,EAAI,EAAIA,EAgBjD,SAASonB,GAAQxnB,UACR,SAASI,UACNJ,GAAGI,IAIR,SAASqnB,GAAQ5e,OAIlB6e,EACAC,EAJAld,EAAQ5B,EAAUse,GAAcC,IAChC/T,EAAS5I,EAAM4I,OACfuU,EAAO,YAIF7T,WACP2T,EArBJ,SAAcE,UACLA,IAASzkB,KAAK0kB,EAAI1kB,KAAKiB,IACf,KAATwjB,GAAezkB,KAAK2kB,OACV,IAATF,GAAczkB,KAAK4kB,OAClBH,EAAOzkB,KAAKiB,IAAIwjB,GAAO,SAASxnB,UAAY+C,KAAKiB,IAAIhE,GAAKwnB,IAiBzDI,CAAKJ,GAAOD,EA3BvB,SAAcC,UACI,KAATA,EAAcL,GACfK,IAASzkB,KAAK0kB,EAAI1kB,KAAK+B,IACvB,SAAS9E,UAAY+C,KAAKoB,IAAIqjB,EAAMxnB,IAwBd6nB,CAAKL,GAC3BvU,IAAS,GAAK,GAChBqU,EAAOF,GAAQE,GAAOC,EAAOH,GAAQG,GACrC9e,EAAUwe,GAAeC,KAEzBze,EAAUse,GAAcC,IAEnB3c,SAGTA,EAAMmd,KAAO,SAASxb,UACb3M,UAAUvC,QAAU0qB,GAAQxb,EAAG2H,KAAa6T,GAGrDnd,EAAM4I,OAAS,SAASjH,UACf3M,UAAUvC,QAAUmW,EAAOjH,GAAI2H,KAAaV,KAGrD5I,EAAM9G,MAAQ,SAASF,OAIjB0L,EAHA3O,EAAI6S,IACJiQ,EAAI9iB,EAAE,GACN0nB,EAAI1nB,EAAEA,EAAEtD,OAAS,IAGjBiS,EAAI+Y,EAAI5E,KAAGnmB,EAAImmB,EAAGA,EAAI4E,EAAGA,EAAI/qB,OAI7BoI,EACAT,EACAM,EAJAjI,EAAIuqB,EAAKpE,GACTtgB,EAAI0kB,EAAKQ,GAIThqB,EAAa,MAATuF,EAAgB,IAAMA,EAC1BuB,EAAI,QAEF4iB,EAAO,IAAM5kB,EAAI7F,EAAIe,EAAG,IAC5Bf,EAAIgG,KAAKgB,MAAMhH,GAAI6F,EAAIG,KAAK0C,KAAK7C,GAC7BsgB,EAAI,GAAG,KAAOnmB,GAAK6F,IAAK7F,MACrB2H,EAAI,EAAGS,EAAIoiB,EAAKxqB,GAAI2H,EAAI8iB,IAAQ9iB,QACnCM,EAAIG,EAAIT,GACAwe,OACJle,EAAI8iB,EAAG,MACXljB,EAAEtC,KAAK0C,SAEJ,KAAOjI,GAAK6F,IAAK7F,MACjB2H,EAAI8iB,EAAO,EAAGriB,EAAIoiB,EAAKxqB,GAAI2H,GAAK,IAAKA,QACxCM,EAAIG,EAAIT,GACAwe,OACJle,EAAI8iB,EAAG,MACXljB,EAAEtC,KAAK0C,GAGI,EAAXJ,EAAE9H,OAAagB,IAAG8G,EAAIrB,EAAM2f,EAAG4E,EAAGhqB,SAEtC8G,EAAIrB,EAAMxG,EAAG6F,EAAGG,KAAKlC,IAAI+B,EAAI7F,EAAGe,IAAIoE,IAAIqlB,UAGnCxY,EAAInK,EAAEtB,UAAYsB,GAG3ByF,EAAMic,WAAa,SAASjjB,EAAOqgB,MAChB,MAAbA,IAAmBA,EAAqB,KAAT8D,EAAc,MAAQ,KAChC,mBAAd9D,IAA0BA,EAAYhF,GAAOgF,IACpDrgB,IAAU+iB,EAAAA,EAAU,OAAO1C,EAClB,MAATrgB,IAAeA,EAAQ,QACvBqB,EAAI3B,KAAKjC,IAAI,EAAG0mB,EAAOnkB,EAAQgH,EAAM9G,QAAQzG,eAC1C,SAASsD,OACVrD,EAAIqD,EAAImnB,EAAKxkB,KAAKa,MAAM0jB,EAAKlnB,YAC7BrD,EAAIyqB,EAAOA,EAAO,KAAKzqB,GAAKyqB,GACzBzqB,GAAK2H,EAAIgf,EAAUtjB,GAAK,KAInCiK,EAAMsc,KAAO,kBACJ1T,EAAO0T,GAAK1T,IAAU,CAC3BlP,MAAO,SAAS/D,UAAYunB,EAAKxkB,KAAKgB,MAAMujB,EAAKtnB,MACjDyF,KAAM,SAASzF,UAAYunB,EAAKxkB,KAAK0C,KAAK6hB,EAAKtnB,UAI5CqK,EAGM,SAASrG,SAClBqG,EAAQgd,GAAQ3E,MAAezP,OAAO,CAAC,EAAG,YAE9C5I,EAAMgJ,KAAO,kBACJA,GAAKhJ,EAAOrG,MAAOwjB,KAAKnd,EAAMmd,SAGvCxU,GAAUzT,MAAM8K,EAAOhL,WAEhBgL,EVnIPka,GAASwD,GAPG,CACZpD,UAAW,IACXD,SAAU,CAAC,GACXI,SAAU,CAAC,IAAK,MAKhBpG,GAAS6F,GAAO7F,OAChB8F,GAAeD,GAAOC,aWfxB,IAAIvW,GAAK,IAAI0S,KACTzS,GAAK,IAAIyS,KAEE,SAASqH,GAAYC,EAAQC,EAAS7kB,EAAO8kB,YAEjDrB,EAASpF,UACTuG,EAAOvG,EAA4B,IAArBriB,UAAUvC,OAAe,IAAI6jB,KAAO,IAAIA,MAAMe,IAAQA,SAG7EoF,EAAS/iB,MAAQ,SAAS2d,UACjBuG,EAAOvG,EAAO,IAAIf,MAAMe,IAAQA,GAGzCoF,EAASrhB,KAAO,SAASic,UAChBuG,EAAOvG,EAAO,IAAIf,KAAKe,EAAO,IAAKwG,EAAQxG,EAAM,GAAIuG,EAAOvG,GAAOA,GAG5EoF,EAASljB,MAAQ,SAAS8d,OACpBW,EAAKyE,EAASpF,GACdY,EAAKwE,EAASrhB,KAAKic,UAChBA,EAAOW,EAAKC,EAAKZ,EAAOW,EAAKC,GAGtCwE,EAASsB,OAAS,SAAS1G,EAAMle,UACxB0kB,EAAQxG,EAAO,IAAIf,MAAMe,GAAe,MAARle,EAAe,EAAIT,KAAKgB,MAAMP,IAAQke,GAG/EoF,EAASphB,MAAQ,SAASvC,EAAOC,EAAMI,OACrB6kB,EAAZ3iB,EAAQ,MACZvC,EAAQ2jB,EAASrhB,KAAKtC,GACtBK,EAAe,MAARA,EAAe,EAAIT,KAAKgB,MAAMP,KAC/BL,EAAQC,GAAWI,EAAO,GAAI,OAAOkC,KACxCA,EAAMpD,KAAK+lB,EAAW,IAAI1H,MAAMxd,IAAS+kB,EAAQ/kB,EAAOK,GAAOykB,EAAO9kB,SAClEklB,EAAWllB,GAASA,EAAQC,UAC5BsC,GAGTohB,EAASwB,OAAS,SAAShqB,UAClB0pB,IAAY,SAAStG,MACtBA,GAAQA,EAAM,KAAOuG,EAAOvG,IAAQpjB,EAAKojB,IAAOA,EAAKd,QAAQc,EAAO,MACvE,SAASA,EAAMle,MACZke,GAAQA,KACNle,EAAO,EAAG,OAASA,GAAQ,QACtB0kB,EAAQxG,GAAO,IAAKpjB,EAAKojB,UAC3B,OAASle,GAAQ,QACf0kB,EAAQxG,EAAM,IAAMpjB,EAAKojB,UAMpCre,IACFyjB,EAASzjB,MAAQ,SAASF,EAAOmd,UAC/BrS,GAAG2S,SAASzd,GAAQ+K,GAAG0S,SAASN,GAChC2H,EAAOha,IAAKga,EAAO/Z,IACZnL,KAAKgB,MAAMV,EAAM4K,GAAIC,MAG9B4Y,EAAS7U,MAAQ,SAASzO,UACxBA,EAAOT,KAAKgB,MAAMP,GACVE,SAASF,IAAWA,EAAO,EAC3BA,EAAO,EACTsjB,EAASwB,OAAOH,EACZ,SAAS/nB,UAAY+nB,EAAM/nB,GAAKoD,GAAS,GACzC,SAASpD,UAAY0mB,EAASzjB,MAAM,EAAGjD,GAAKoD,GAAS,IAH3CsjB,EADoB,OAQrCA,EClET,IAAIyB,GAAczB,IAAS,eAExB,SAASpF,EAAMle,GAChBke,EAAKd,SAASc,EAAOle,MACpB,SAASL,EAAOmd,UACVA,EAAMnd,KAIfolB,GAAYtW,MAAQ,SAASvN,UAC3BA,EAAI3B,KAAKgB,MAAMW,GACVhB,SAASgB,IAAQA,EAAI,EACpBA,EAAI,EACHoiB,IAAS,SAASpF,GACvBA,EAAKd,QAAQ7d,KAAKgB,MAAM2d,EAAOhd,GAAKA,MACnC,SAASgd,EAAMle,GAChBke,EAAKd,SAASc,EAAOle,EAAOkB,MAC3B,SAASvB,EAAOmd,UACTA,EAAMnd,GAASuB,KANJ6jB,GADgB,MCbhC,MAAMC,GAAiB,IACjBC,GAAiBD,IACjBE,GAAeD,KACfE,GAAcD,MACdE,GAAeD,OACfE,GAAgBF,OAChBG,GAAeH,QCH5B,IAAII,GAASjC,IAAS,SAASpF,GAC7BA,EAAKd,QAAQc,EAAOA,EAAKsH,sBACxB,SAAStH,EAAMle,GAChBke,EAAKd,SAASc,EAAOle,EAAOglB,OAC3B,SAASrlB,EAAOmd,UACTA,EAAMnd,GAASqlB,MACtB,SAAS9G,UACHA,EAAKuH,mBCPVC,GAASpC,IAAS,SAASpF,GAC7BA,EAAKd,QAAQc,EAAOA,EAAKsH,kBAAoBtH,EAAKyH,aAAeX,OAChE,SAAS9G,EAAMle,GAChBke,EAAKd,SAASc,EAAOle,EAAOilB,OAC3B,SAAStlB,EAAOmd,UACTA,EAAMnd,GAASslB,MACtB,SAAS/G,UACHA,EAAK0H,gBCPVC,GAAOvC,IAAS,SAASpF,GAC3BA,EAAKd,QAAQc,EAAOA,EAAKsH,kBAAoBtH,EAAKyH,aAAeX,GAAiB9G,EAAK0H,aAAeX,OACrG,SAAS/G,EAAMle,GAChBke,EAAKd,SAASc,EAAOle,EAAOklB,OAC3B,SAASvlB,EAAOmd,UACTA,EAAMnd,GAASulB,MACtB,SAAShH,UACHA,EAAK4H,cCPVC,GAAMzC,IACRpF,GAAQA,EAAK8H,SAAS,EAAG,EAAG,EAAG,KAC/B,CAAC9H,EAAMle,IAASke,EAAK+H,QAAQ/H,EAAKgI,UAAYlmB,KAC9C,CAACL,EAAOmd,KAASA,EAAMnd,GAASmd,EAAIqJ,oBAAsBxmB,EAAMwmB,qBAAuBlB,IAAkBE,KACzGjH,GAAQA,EAAKgI,UAAY,ICJ3B,SAASE,GAAQ7sB,UACR+pB,IAAS,SAASpF,GACvBA,EAAK+H,QAAQ/H,EAAKgI,WAAahI,EAAKmI,SAAW,EAAI9sB,GAAK,GACxD2kB,EAAK8H,SAAS,EAAG,EAAG,EAAG,MACtB,SAAS9H,EAAMle,GAChBke,EAAK+H,QAAQ/H,EAAKgI,UAAmB,EAAPlmB,MAC7B,SAASL,EAAOmd,UACTA,EAAMnd,GAASmd,EAAIqJ,oBAAsBxmB,EAAMwmB,qBAAuBlB,IAAkBG,MAI7F,IAAIkB,GAASF,GAAQ,GACjBG,GAASH,GAAQ,GACPA,GAAQ,GACNA,GAAQ,GACxB,IAAII,GAAWJ,GAAQ,GACVA,GAAQ,GACNA,GAAQ,GClB9B,IAAIK,GAAQnD,IAAS,SAASpF,GAC5BA,EAAK+H,QAAQ,GACb/H,EAAK8H,SAAS,EAAG,EAAG,EAAG,MACtB,SAAS9H,EAAMle,GAChBke,EAAKwI,SAASxI,EAAKyI,WAAa3mB,MAC/B,SAASL,EAAOmd,UACVA,EAAI6J,WAAahnB,EAAMgnB,WAAyD,IAA3C7J,EAAI8J,cAAgBjnB,EAAMinB,kBACrE,SAAS1I,UACHA,EAAKyI,cCRVE,GAAOvD,IAAS,SAASpF,GAC3BA,EAAKwI,SAAS,EAAG,GACjBxI,EAAK8H,SAAS,EAAG,EAAG,EAAG,MACtB,SAAS9H,EAAMle,GAChBke,EAAK4I,YAAY5I,EAAK0I,cAAgB5mB,MACrC,SAASL,EAAOmd,UACVA,EAAI8J,cAAgBjnB,EAAMinB,iBAChC,SAAS1I,UACHA,EAAK0I,iBAIdC,GAAKpY,MAAQ,SAASvN,UACZhB,SAASgB,EAAI3B,KAAKgB,MAAMW,KAASA,EAAI,EAAYoiB,IAAS,SAASpF,GACzEA,EAAK4I,YAAYvnB,KAAKgB,MAAM2d,EAAK0I,cAAgB1lB,GAAKA,GACtDgd,EAAKwI,SAAS,EAAG,GACjBxI,EAAK8H,SAAS,EAAG,EAAG,EAAG,MACtB,SAAS9H,EAAMle,GAChBke,EAAK4I,YAAY5I,EAAK0I,cAAgB5mB,EAAOkB,MALG,MCZpD,IAAI6lB,GAAYzD,IAAS,SAASpF,GAChCA,EAAK8I,cAAc,EAAG,MACrB,SAAS9I,EAAMle,GAChBke,EAAKd,SAASc,EAAOle,EAAOilB,OAC3B,SAAStlB,EAAOmd,UACTA,EAAMnd,GAASslB,MACtB,SAAS/G,UACHA,EAAK+I,mBCPVC,GAAU5D,IAAS,SAASpF,GAC9BA,EAAKiJ,cAAc,EAAG,EAAG,MACxB,SAASjJ,EAAMle,GAChBke,EAAKd,SAASc,EAAOle,EAAOklB,OAC3B,SAASvlB,EAAOmd,UACTA,EAAMnd,GAASulB,MACtB,SAAShH,UACHA,EAAKkJ,iBCPVC,GAAS/D,IAAS,SAASpF,GAC7BA,EAAKoJ,YAAY,EAAG,EAAG,EAAG,MACzB,SAASpJ,EAAMle,GAChBke,EAAKqJ,WAAWrJ,EAAKsJ,aAAexnB,MACnC,SAASL,EAAOmd,UACTA,EAAMnd,GAASwlB,MACtB,SAASjH,UACHA,EAAKsJ,aAAe,KCP7B,SAASC,GAAWluB,UACX+pB,IAAS,SAASpF,GACvBA,EAAKqJ,WAAWrJ,EAAKsJ,cAAgBtJ,EAAKwJ,YAAc,EAAInuB,GAAK,GACjE2kB,EAAKoJ,YAAY,EAAG,EAAG,EAAG,MACzB,SAASpJ,EAAMle,GAChBke,EAAKqJ,WAAWrJ,EAAKsJ,aAAsB,EAAPxnB,MACnC,SAASL,EAAOmd,UACTA,EAAMnd,GAASylB,MAIpB,IAAIuC,GAAYF,GAAW,GACvBG,GAAYH,GAAW,GACVA,GAAW,GACTA,GAAW,GAC9B,IAAII,GAAcJ,GAAW,GACbA,GAAW,GACTA,GAAW,GClBpC,IAAIK,GAAWxE,IAAS,SAASpF,GAC/BA,EAAKqJ,WAAW,GAChBrJ,EAAKoJ,YAAY,EAAG,EAAG,EAAG,MACzB,SAASpJ,EAAMle,GAChBke,EAAK6J,YAAY7J,EAAK8J,cAAgBhoB,MACrC,SAASL,EAAOmd,UACVA,EAAIkL,cAAgBroB,EAAMqoB,cAAkE,IAAjDlL,EAAImL,iBAAmBtoB,EAAMsoB,qBAC9E,SAAS/J,UACHA,EAAK8J,iBCRVE,GAAU5E,IAAS,SAASpF,GAC9BA,EAAK6J,YAAY,EAAG,GACpB7J,EAAKoJ,YAAY,EAAG,EAAG,EAAG,MACzB,SAASpJ,EAAMle,GAChBke,EAAKiK,eAAejK,EAAK+J,iBAAmBjoB,MAC3C,SAASL,EAAOmd,UACVA,EAAImL,iBAAmBtoB,EAAMsoB,oBACnC,SAAS/J,UACHA,EAAK+J,oBCOd,SAASG,GAAOvB,EAAMJ,EAAO4B,EAAMtC,EAAKF,EAAMH,SAEtC4C,EAAgB,CACpB,CAAC/C,GAAS,EAAQP,IAClB,CAACO,GAAS,EAAI,KACd,CAACA,GAAQ,GAAI,MACb,CAACA,GAAQ,GAAI,KACb,CAACG,EAAS,EAAQT,IAClB,CAACS,EAAS,EAAI,KACd,CAACA,EAAQ,GAAI,KACb,CAACA,EAAQ,GAAI,MACb,CAAGG,EAAO,EAAQX,IAClB,CAAGW,EAAO,EAAI,OACd,CAAGA,EAAO,EAAI,OACd,CAAGA,EAAM,GAAI,OACb,CAAIE,EAAM,EAAQZ,IAClB,CAAIY,EAAM,EAAI,QACd,CAAGsC,EAAO,EAAQjD,IAClB,CAAEqB,EAAQ,EAAQpB,IAClB,CAAEoB,EAAQ,EAAI,QACd,CAAGI,EAAO,EAAQvB,cAWXiD,EAAa5oB,EAAOC,EAAMC,SAC3BtE,EAASgE,KAAKuB,IAAIlB,EAAOD,GAASE,EAClCtG,EAAI2D,GAAS,IAAK8C,KAAUA,IAAMhD,MAAMsrB,EAAe/sB,MACzDhC,IAAM+uB,EAAchvB,OAAQ,OAAOutB,EAAKpY,MAAM7N,EAASjB,EAAQ2lB,GAAc1lB,EAAO0lB,GAAczlB,OAC5F,IAANtG,EAAS,OAAOwrB,GAAYtW,MAAMlP,KAAKjC,IAAIsD,EAASjB,EAAOC,EAAMC,GAAQ,UACtE2B,EAAGxB,GAAQsoB,EAAc/sB,EAAS+sB,EAAc/uB,EAAI,GAAG,GAAK+uB,EAAc/uB,GAAG,GAAKgC,EAAShC,EAAI,EAAIA,UACnGiI,EAAEiN,MAAMzO,SAGV,UAjBQL,EAAOC,EAAMC,SACpBC,EAAUF,EAAOD,EACnBG,KAAUH,EAAOC,GAAQ,CAACA,EAAMD,UAC9B2jB,EAAWzjB,GAAgC,mBAAhBA,EAAMqC,MAAuBrC,EAAQ0oB,EAAa5oB,EAAOC,EAAMC,GAC1FE,EAAQujB,EAAWA,EAASphB,MAAMvC,GAAQC,EAAO,GAAK,UACrDE,EAAUC,EAAMD,UAAYC,GAYtBwoB,GD3CjBL,GAAQzZ,MAAQ,SAASvN,UACfhB,SAASgB,EAAI3B,KAAKgB,MAAMW,KAASA,EAAI,EAAYoiB,IAAS,SAASpF,GACzEA,EAAKiK,eAAe5oB,KAAKgB,MAAM2d,EAAK+J,iBAAmB/mB,GAAKA,GAC5Dgd,EAAK6J,YAAY,EAAG,GACpB7J,EAAKoJ,YAAY,EAAG,EAAG,EAAG,MACzB,SAASpJ,EAAMle,GAChBke,EAAKiK,eAAejK,EAAK+J,iBAAmBjoB,EAAOkB,MALH,MC6CpD,MAAOsnB,GAAUC,IAAmBL,GAAOF,GAASJ,GAAUY,GAASrB,GAAQH,GAASH,KACjF4B,GAAWC,IAAoBR,GAAOvB,GAAMJ,GAAO4B,GAAMtC,GAAKF,GAAMH,IChD3E,SAASmD,GAAUjsB,MACb,GAAKA,EAAE4G,GAAK5G,EAAE4G,EAAI,IAAK,KACrB0a,EAAO,IAAIf,MAAM,EAAGvgB,EAAEuE,EAAGvE,EAAEA,EAAGA,EAAEksB,EAAGlsB,EAAEmsB,EAAGnsB,EAAEosB,EAAGpsB,EAAEqsB,UACnD/K,EAAK4I,YAAYlqB,EAAE4G,GACZ0a,SAEF,IAAIf,KAAKvgB,EAAE4G,EAAG5G,EAAEuE,EAAGvE,EAAEA,EAAGA,EAAEksB,EAAGlsB,EAAEmsB,EAAGnsB,EAAEosB,EAAGpsB,EAAEqsB,GAGlD,SAASC,GAAQtsB,MACX,GAAKA,EAAE4G,GAAK5G,EAAE4G,EAAI,IAAK,KACrB0a,EAAO,IAAIf,KAAKA,KAAKgM,KAAK,EAAGvsB,EAAEuE,EAAGvE,EAAEA,EAAGA,EAAEksB,EAAGlsB,EAAEmsB,EAAGnsB,EAAEosB,EAAGpsB,EAAEqsB,WAC5D/K,EAAKiK,eAAevrB,EAAE4G,GACf0a,SAEF,IAAIf,KAAKA,KAAKgM,IAAIvsB,EAAE4G,EAAG5G,EAAEuE,EAAGvE,EAAEA,EAAGA,EAAEksB,EAAGlsB,EAAEmsB,EAAGnsB,EAAEosB,EAAGpsB,EAAEqsB,IAG3D,SAASG,GAAQ5lB,EAAGrC,EAAGvE,SACd,CAAC4G,EAAGA,EAAGrC,EAAGA,EAAGvE,EAAGA,EAAGksB,EAAG,EAAGC,EAAG,EAAGC,EAAG,EAAGC,EAAG,GAmWjD,ICjYIlI,GACOsI,GAEAC,GD8XPC,GAAO,KAAM,KAAS,MAAU,KAChCC,GAAW,UACXC,GAAY,KACZC,GAAY,sBAEhB,SAASC,GAAI1uB,EAAOmI,EAAMyC,OACpBmE,EAAO/O,EAAQ,EAAI,IAAM,GACzBgjB,GAAUjU,GAAQ/O,EAAQA,GAAS,GACnC3B,EAAS2kB,EAAO3kB,cACb0Q,GAAQ1Q,EAASuM,EAAQ,IAAIpM,MAAMoM,EAAQvM,EAAS,GAAG0kB,KAAK5a,GAAQ6a,EAASA,GAGtF,SAAS2L,GAAQvoB,UACRA,EAAEsf,QAAQ+I,GAAW,QAG9B,SAASG,GAASC,UACT,IAAI3Y,OAAO,OAAS2Y,EAAMprB,IAAIkrB,IAAS5L,KAAK,KAAO,IAAK,KAGjE,SAAS+L,GAAaD,UACb,IAAIpsB,IAAIosB,EAAMprB,KAAI,CAAC9D,EAAMrB,IAAM,CAACqB,EAAKwgB,cAAe7hB,MAG7D,SAASywB,GAAyBptB,EAAGqhB,EAAQ1kB,OACvCe,EAAIkvB,GAASnO,KAAK4C,EAAOvjB,MAAMnB,EAAGA,EAAI,WACnCe,GAAKsC,EAAEuQ,GAAK7S,EAAE,GAAIf,EAAIe,EAAE,GAAGhB,SAAW,EAG/C,SAAS2wB,GAAyBrtB,EAAGqhB,EAAQ1kB,OACvCe,EAAIkvB,GAASnO,KAAK4C,EAAOvjB,MAAMnB,EAAGA,EAAI,WACnCe,GAAKsC,EAAE8iB,GAAKplB,EAAE,GAAIf,EAAIe,EAAE,GAAGhB,SAAW,EAG/C,SAAS4wB,GAAsBttB,EAAGqhB,EAAQ1kB,OACpCe,EAAIkvB,GAASnO,KAAK4C,EAAOvjB,MAAMnB,EAAGA,EAAI,WACnCe,GAAKsC,EAAEutB,GAAK7vB,EAAE,GAAIf,EAAIe,EAAE,GAAGhB,SAAW,EAG/C,SAAS8wB,GAAmBxtB,EAAGqhB,EAAQ1kB,OACjCe,EAAIkvB,GAASnO,KAAK4C,EAAOvjB,MAAMnB,EAAGA,EAAI,WACnCe,GAAKsC,EAAEytB,GAAK/vB,EAAE,GAAIf,EAAIe,EAAE,GAAGhB,SAAW,EAG/C,SAASgxB,GAAsB1tB,EAAGqhB,EAAQ1kB,OACpCe,EAAIkvB,GAASnO,KAAK4C,EAAOvjB,MAAMnB,EAAGA,EAAI,WACnCe,GAAKsC,EAAE2tB,GAAKjwB,EAAE,GAAIf,EAAIe,EAAE,GAAGhB,SAAW,EAG/C,SAASkxB,GAAc5tB,EAAGqhB,EAAQ1kB,OAC5Be,EAAIkvB,GAASnO,KAAK4C,EAAOvjB,MAAMnB,EAAGA,EAAI,WACnCe,GAAKsC,EAAE4G,GAAKlJ,EAAE,GAAIf,EAAIe,EAAE,GAAGhB,SAAW,EAG/C,SAASmxB,GAAU7tB,EAAGqhB,EAAQ1kB,OACxBe,EAAIkvB,GAASnO,KAAK4C,EAAOvjB,MAAMnB,EAAGA,EAAI,WACnCe,GAAKsC,EAAE4G,GAAKlJ,EAAE,KAAOA,EAAE,GAAK,GAAK,KAAO,KAAOf,EAAIe,EAAE,GAAGhB,SAAW,EAG5E,SAASoxB,GAAU9tB,EAAGqhB,EAAQ1kB,OACxBe,EAAI,+BAA+B+gB,KAAK4C,EAAOvjB,MAAMnB,EAAGA,EAAI,WACzDe,GAAKsC,EAAE+tB,EAAIrwB,EAAE,GAAK,IAAMA,EAAE,IAAMA,EAAE,IAAM,OAAQf,EAAIe,EAAE,GAAGhB,SAAW,EAG7E,SAASsxB,GAAahuB,EAAGqhB,EAAQ1kB,OAC3Be,EAAIkvB,GAASnO,KAAK4C,EAAOvjB,MAAMnB,EAAGA,EAAI,WACnCe,GAAKsC,EAAEghB,EAAW,EAAPtjB,EAAE,GAAS,EAAGf,EAAIe,EAAE,GAAGhB,SAAW,EAGtD,SAASuxB,GAAiBjuB,EAAGqhB,EAAQ1kB,OAC/Be,EAAIkvB,GAASnO,KAAK4C,EAAOvjB,MAAMnB,EAAGA,EAAI,WACnCe,GAAKsC,EAAEuE,EAAI7G,EAAE,GAAK,EAAGf,EAAIe,EAAE,GAAGhB,SAAW,EAGlD,SAASwxB,GAAgBluB,EAAGqhB,EAAQ1kB,OAC9Be,EAAIkvB,GAASnO,KAAK4C,EAAOvjB,MAAMnB,EAAGA,EAAI,WACnCe,GAAKsC,EAAEA,GAAKtC,EAAE,GAAIf,EAAIe,EAAE,GAAGhB,SAAW,EAG/C,SAASyxB,GAAenuB,EAAGqhB,EAAQ1kB,OAC7Be,EAAIkvB,GAASnO,KAAK4C,EAAOvjB,MAAMnB,EAAGA,EAAI,WACnCe,GAAKsC,EAAEuE,EAAI,EAAGvE,EAAEA,GAAKtC,EAAE,GAAIf,EAAIe,EAAE,GAAGhB,SAAW,EAGxD,SAAS0xB,GAAYpuB,EAAGqhB,EAAQ1kB,OAC1Be,EAAIkvB,GAASnO,KAAK4C,EAAOvjB,MAAMnB,EAAGA,EAAI,WACnCe,GAAKsC,EAAEksB,GAAKxuB,EAAE,GAAIf,EAAIe,EAAE,GAAGhB,SAAW,EAG/C,SAAS2xB,GAAaruB,EAAGqhB,EAAQ1kB,OAC3Be,EAAIkvB,GAASnO,KAAK4C,EAAOvjB,MAAMnB,EAAGA,EAAI,WACnCe,GAAKsC,EAAEmsB,GAAKzuB,EAAE,GAAIf,EAAIe,EAAE,GAAGhB,SAAW,EAG/C,SAAS4xB,GAAatuB,EAAGqhB,EAAQ1kB,OAC3Be,EAAIkvB,GAASnO,KAAK4C,EAAOvjB,MAAMnB,EAAGA,EAAI,WACnCe,GAAKsC,EAAEosB,GAAK1uB,EAAE,GAAIf,EAAIe,EAAE,GAAGhB,SAAW,EAG/C,SAAS6xB,GAAkBvuB,EAAGqhB,EAAQ1kB,OAChCe,EAAIkvB,GAASnO,KAAK4C,EAAOvjB,MAAMnB,EAAGA,EAAI,WACnCe,GAAKsC,EAAEqsB,GAAK3uB,EAAE,GAAIf,EAAIe,EAAE,GAAGhB,SAAW,EAG/C,SAAS8xB,GAAkBxuB,EAAGqhB,EAAQ1kB,OAChCe,EAAIkvB,GAASnO,KAAK4C,EAAOvjB,MAAMnB,EAAGA,EAAI,WACnCe,GAAKsC,EAAEqsB,EAAI1pB,KAAKgB,MAAMjG,EAAE,GAAK,KAAOf,EAAIe,EAAE,GAAGhB,SAAW,EAGjE,SAAS+xB,GAAoBzuB,EAAGqhB,EAAQ1kB,OAClCe,EAAImvB,GAAUpO,KAAK4C,EAAOvjB,MAAMnB,EAAGA,EAAI,WACpCe,EAAIf,EAAIe,EAAE,GAAGhB,QAAU,EAGhC,SAASgyB,GAAmB1uB,EAAGqhB,EAAQ1kB,OACjCe,EAAIkvB,GAASnO,KAAK4C,EAAOvjB,MAAMnB,WAC5Be,GAAKsC,EAAE2uB,GAAKjxB,EAAE,GAAIf,EAAIe,EAAE,GAAGhB,SAAW,EAG/C,SAASkyB,GAA0B5uB,EAAGqhB,EAAQ1kB,OACxCe,EAAIkvB,GAASnO,KAAK4C,EAAOvjB,MAAMnB,WAC5Be,GAAKsC,EAAEyE,GAAK/G,EAAE,GAAIf,EAAIe,EAAE,GAAGhB,SAAW,EAG/C,SAASmyB,GAAiB7uB,EAAG+E,UACpBgoB,GAAI/sB,EAAEspB,UAAWvkB,EAAG,GAG7B,SAAS+pB,GAAa9uB,EAAG+E,UAChBgoB,GAAI/sB,EAAEkpB,WAAYnkB,EAAG,GAG9B,SAASgqB,GAAa/uB,EAAG+E,UAChBgoB,GAAI/sB,EAAEkpB,WAAa,IAAM,GAAInkB,EAAG,GAGzC,SAASiqB,GAAgBhvB,EAAG+E,UACnBgoB,GAAI,EAAIkC,GAAQhsB,MAAMisB,GAASlvB,GAAIA,GAAI+E,EAAG,GAGnD,SAASoqB,GAAmBnvB,EAAG+E,UACtBgoB,GAAI/sB,EAAE4oB,kBAAmB7jB,EAAG,GAGrC,SAASqqB,GAAmBpvB,EAAG+E,UACtBoqB,GAAmBnvB,EAAG+E,GAAK,MAGpC,SAASsqB,GAAkBrvB,EAAG+E,UACrBgoB,GAAI/sB,EAAE+pB,WAAa,EAAGhlB,EAAG,GAGlC,SAASuqB,GAActvB,EAAG+E,UACjBgoB,GAAI/sB,EAAEgpB,aAAcjkB,EAAG,GAGhC,SAASwqB,GAAcvvB,EAAG+E,UACjBgoB,GAAI/sB,EAAE+oB,aAAchkB,EAAG,GAGhC,SAASyqB,GAA0BxvB,OAC7BmpB,EAAMnpB,EAAEypB,gBACG,IAARN,EAAY,EAAIA,EAGzB,SAASsG,GAAuBzvB,EAAG+E,UAC1BgoB,GAAI2C,GAAWzsB,MAAMisB,GAASlvB,GAAK,EAAGA,GAAI+E,EAAG,GAGtD,SAAS4qB,GAAK3vB,OACRmpB,EAAMnpB,EAAEypB,gBACJN,GAAO,GAAa,IAARA,EAAayG,GAAa5vB,GAAK4vB,GAAavqB,KAAKrF,GAGvE,SAAS6vB,GAAoB7vB,EAAG+E,UAC9B/E,EAAI2vB,GAAK3vB,GACF+sB,GAAI6C,GAAa3sB,MAAMisB,GAASlvB,GAAIA,IAA+B,IAAzBkvB,GAASlvB,GAAGypB,UAAiB1kB,EAAG,GAGnF,SAAS+qB,GAA0B9vB,UAC1BA,EAAEypB,SAGX,SAASsG,GAAuB/vB,EAAG+E,UAC1BgoB,GAAIiD,GAAW/sB,MAAMisB,GAASlvB,GAAK,EAAGA,GAAI+E,EAAG,GAGtD,SAASkrB,GAAWjwB,EAAG+E,UACdgoB,GAAI/sB,EAAEgqB,cAAgB,IAAKjlB,EAAG,GAGvC,SAASmrB,GAAclwB,EAAG+E,UAEjBgoB,IADP/sB,EAAI2vB,GAAK3vB,IACIgqB,cAAgB,IAAKjlB,EAAG,GAGvC,SAASorB,GAAenwB,EAAG+E,UAClBgoB,GAAI/sB,EAAEgqB,cAAgB,IAAOjlB,EAAG,GAGzC,SAASqrB,GAAkBpwB,EAAG+E,OACxBokB,EAAMnpB,EAAEypB,gBAELsD,IADP/sB,EAAKmpB,GAAO,GAAa,IAARA,EAAayG,GAAa5vB,GAAK4vB,GAAavqB,KAAKrF,IACrDgqB,cAAgB,IAAOjlB,EAAG,GAGzC,SAASsrB,GAAWrwB,OACdwE,EAAIxE,EAAEupB,2BACF/kB,EAAI,EAAI,KAAOA,IAAM,EAAG,MAC1BuoB,GAAIvoB,EAAI,GAAK,EAAG,IAAK,GACrBuoB,GAAIvoB,EAAI,GAAI,IAAK,GAGzB,SAAS8rB,GAAoBtwB,EAAG+E,UACvBgoB,GAAI/sB,EAAE4qB,aAAc7lB,EAAG,GAGhC,SAASwrB,GAAgBvwB,EAAG+E,UACnBgoB,GAAI/sB,EAAEwqB,cAAezlB,EAAG,GAGjC,SAASyrB,GAAgBxwB,EAAG+E,UACnBgoB,GAAI/sB,EAAEwqB,cAAgB,IAAM,GAAIzlB,EAAG,GAG5C,SAAS0rB,GAAmBzwB,EAAG+E,UACtBgoB,GAAI,EAAItC,GAAOxnB,MAAMqoB,GAAQtrB,GAAIA,GAAI+E,EAAG,GAGjD,SAAS2rB,GAAsB1wB,EAAG+E,UACzBgoB,GAAI/sB,EAAE2wB,qBAAsB5rB,EAAG,GAGxC,SAAS6rB,GAAsB5wB,EAAG+E,UACzB2rB,GAAsB1wB,EAAG+E,GAAK,MAGvC,SAAS8rB,GAAqB7wB,EAAG+E,UACxBgoB,GAAI/sB,EAAEorB,cAAgB,EAAGrmB,EAAG,GAGrC,SAAS+rB,GAAiB9wB,EAAG+E,UACpBgoB,GAAI/sB,EAAEqqB,gBAAiBtlB,EAAG,GAGnC,SAASgsB,GAAiB/wB,EAAG+E,UACpBgoB,GAAI/sB,EAAE6oB,gBAAiB9jB,EAAG,GAGnC,SAASisB,GAA6BhxB,OAChCixB,EAAMjxB,EAAE8qB,mBACG,IAARmG,EAAY,EAAIA,EAGzB,SAASC,GAA0BlxB,EAAG+E,UAC7BgoB,GAAIhC,GAAU9nB,MAAMqoB,GAAQtrB,GAAK,EAAGA,GAAI+E,EAAG,GAGpD,SAASosB,GAAQnxB,OACXmpB,EAAMnpB,EAAE8qB,mBACJ3B,GAAO,GAAa,IAARA,EAAa8B,GAAYjrB,GAAKirB,GAAY5lB,KAAKrF,GAGrE,SAASoxB,GAAuBpxB,EAAG+E,UACjC/E,EAAImxB,GAAQnxB,GACL+sB,GAAI9B,GAAYhoB,MAAMqoB,GAAQtrB,GAAIA,IAAiC,IAA3BsrB,GAAQtrB,GAAG8qB,aAAoB/lB,EAAG,GAGnF,SAASssB,GAA6BrxB,UAC7BA,EAAE8qB,YAGX,SAASwG,GAA0BtxB,EAAG+E,UAC7BgoB,GAAI/B,GAAU/nB,MAAMqoB,GAAQtrB,GAAK,EAAGA,GAAI+E,EAAG,GAGpD,SAASwsB,GAAcvxB,EAAG+E,UACjBgoB,GAAI/sB,EAAEqrB,iBAAmB,IAAKtmB,EAAG,GAG1C,SAASysB,GAAiBxxB,EAAG+E,UAEpBgoB,IADP/sB,EAAImxB,GAAQnxB,IACCqrB,iBAAmB,IAAKtmB,EAAG,GAG1C,SAAS0sB,GAAkBzxB,EAAG+E,UACrBgoB,GAAI/sB,EAAEqrB,iBAAmB,IAAOtmB,EAAG,GAG5C,SAAS2sB,GAAqB1xB,EAAG+E,OAC3BokB,EAAMnpB,EAAE8qB,mBAELiC,IADP/sB,EAAKmpB,GAAO,GAAa,IAARA,EAAa8B,GAAYjrB,GAAKirB,GAAY5lB,KAAKrF,IACnDqrB,iBAAmB,IAAOtmB,EAAG,GAG5C,SAAS4sB,WACA,QAGT,SAASC,WACA,IAGT,SAASC,GAAoB7xB,UACnBA,EAGV,SAAS8xB,GAA2B9xB,UAC3B2C,KAAKgB,OAAO3D,EAAI,KEjrBzB,SAASshB,GAAK1c,UACL,IAAI2b,KAAK3b,GAGlB,SAASqc,GAAOrc,UACPA,aAAa2b,MAAQ3b,GAAK,IAAI2b,MAAM3b,GAGtC,SAASmtB,GAAS5uB,EAAOwoB,EAAc1B,EAAMJ,EAAO4B,EAAMtC,EAAKF,EAAMH,EAAQH,EAAQrK,OACtFrU,EAAQ8Y,KACRJ,EAAS1Y,EAAM0Y,OACf9P,EAAS5I,EAAM4I,OAEfmf,EAAoB1T,EAAO,OAC3B2T,EAAe3T,EAAO,OACtB4T,EAAe5T,EAAO,SACtB6T,EAAa7T,EAAO,SACpB8T,EAAY9T,EAAO,SACnB+T,EAAa/T,EAAO,SACpBgU,EAAchU,EAAO,MACrB2R,EAAa3R,EAAO,eAEf4H,EAAW5E,UACVqH,EAAOrH,GAAQA,EAAO0Q,EACxBlJ,EAAOxH,GAAQA,EAAO2Q,EACtBhJ,EAAK3H,GAAQA,EAAO4Q,EACpB/I,EAAI7H,GAAQA,EAAO6Q,EACnBtI,EAAMvI,GAAQA,EAAQmK,EAAKnK,GAAQA,EAAO8Q,EAAYC,EACtDpI,EAAK3I,GAAQA,EAAOgR,EACpBrC,GAAY3O,UAGpBrX,EAAM0Y,OAAS,SAAS/b,UACf,IAAI2Z,KAAKoC,EAAO/b,KAGzBqD,EAAM4I,OAAS,SAASjH,UACf3M,UAAUvC,OAASmW,EAAOhW,MAAMoB,KAAK2N,EAAGqV,KAAWpO,IAAS/Q,IAAIwf,KAGzErX,EAAM9G,MAAQ,SAASujB,OACjB1mB,EAAI6S,WACD1P,EAAMnD,EAAE,GAAIA,EAAEA,EAAEtD,OAAS,GAAgB,MAAZgqB,EAAmB,GAAKA,IAG9Dzc,EAAMic,WAAa,SAASjjB,EAAOqgB,UACb,MAAbA,EAAoB4C,EAAa5H,EAAOgF,IAGjDrZ,EAAMsc,KAAO,SAASG,OAChB1mB,EAAI6S,WACH6T,GAAsC,mBAAnBA,EAASphB,QAAsBohB,EAAWiF,EAAa3rB,EAAE,GAAIA,EAAEA,EAAEtD,OAAS,GAAgB,MAAZgqB,EAAmB,GAAKA,IACvHA,EAAW7T,EAAO0T,GAAKvmB,EAAG0mB,IAAazc,GAGhDA,EAAMgJ,KAAO,kBACJA,GAAKhJ,EAAO8nB,GAAS5uB,EAAOwoB,EAAc1B,EAAMJ,EAAO4B,EAAMtC,EAAKF,EAAMH,EAAQH,EAAQrK,KAG1FrU,EAGM,SAASsoB,YACf3f,GAAUzT,MAAM4yB,GAAShG,GAAWC,GAAkBkD,GAAUsD,GAAWC,GAAUxD,GAASyD,GAAUC,GAAYC,GAAYnG,IAAY5Z,OAAO,CAAC,IAAI0N,KAAK,IAAM,EAAG,GAAI,IAAIA,KAAK,IAAM,EAAG,KAAMthB,WChE5L,SAAS4zB,YACfjgB,GAAUzT,MAAM4yB,GAASnG,GAAUC,GAAiBP,GAASJ,GAAUY,GAASrB,GAAQH,GAASH,GAAW2I,GAAWpG,IAAW7Z,OAAO,CAAC0N,KAAKgM,IAAI,IAAM,EAAG,GAAIhM,KAAKgM,IAAI,IAAM,EAAG,KAAMttB,WC0ClL,SAAS8zB,GACtBC,EACAC,EACArrB,EACAsrB,EACAlrB,EACAiB,EACAI,OAEM8pB,EA3BR,SACEA,uCAGKA,GACHliB,qBAAakiB,EAAQliB,eAAe,OACpCmiB,mCAA2BD,EAAQC,6BAA6B,GAChEC,8BAAsBF,EAAQE,wBAAwB,GACtDC,0BAAkBH,EAAQG,oBAAoB,GAC9CC,0BAAkBJ,EAAQI,oBAAoB,GAC9CC,gCAAwBL,EAAQK,0BAA0B,GAC1DC,gCAAwBN,EAAQM,0BAA0B,EAC1DrhB,cAAM+gB,EAAQ/gB,SACdpI,iBAASmpB,EAAQnpB,YACjB0pB,oBAAYP,EAAQO,iBAaNC,CAAmBV,OAE9BE,EAAQS,eACL,IAAI3kB,8DAGN9G,EAAa,CAAC,OAAQ,SAASrJ,QAAQq0B,EAAQS,WAAa,EAG5DtuB,EAA0B6C,EAC5B,CAACH,EAAeqB,OAAQ,GACxB,CAAC,EAAGrB,EAAeiB,OAEjB4qB,EAA+B1rB,EAAa,CAACkB,EAAQ,GAAK,CAAC,EAAGJ,SAGvC,SAAtBkqB,EAAQW,WAA8C,cAAtBX,EAAQW,UA2BjD,SACEd,EACAG,EACAvrB,EACAsrB,EACA/qB,EACA7C,EACAuuB,OAEME,EAAgC,cAAtBZ,EAAQW,UAA4BE,GAAYC,GAE5DC,GAAY,EAEhBtsB,EAASorB,EAAYprB,EAASA,EAC3BsgB,QAAO,SAAAzjB,UAAKA,EAAE0vB,kBAAoBhB,EAAQiB,MAE7ClB,EAAYF,EAAYE,EAAYA,EAAUhL,QAAO,SAAAloB,UAAKA,EAAEm0B,kBAAoBhB,EAAQiB,UAGlFnqB,EAAQ8pB,EAAQzuB,KAEK+uB,EAAOnB,GAAW,SAAA1qB,OACrCnK,EAAQ80B,EAAQmB,SAAS9rB,EAAM+rB,sBACrC/rB,EAAMwqB,EAAY,eAAiB,kBAAoB30B,EAChDA,KAHJm2B,OAAUC,OAMXf,EAAaP,EAAQO,WAG2B,kBAAhD/1B,OAAOC,UAAUC,SAAST,KAAK+1B,EAAQ1yB,OACzC+zB,EAAW/zB,EAAI,CAAC0yB,EAAQ1yB,IAAa+zB,IACrCd,GAAa,GAGqC,kBAAhD/1B,OAAOC,UAAUC,SAAST,KAAK+1B,EAAQzyB,OACzC+zB,EAAW/zB,EAAI,CAACyyB,EAAQzyB,IAAa+zB,IACrCf,GAAa,GAGyC,kBAApD/1B,OAAOC,UAAUC,SAAST,KAAK+1B,EAAQuB,WACzCF,EAAWrB,EAAQuB,QACnBhB,GAAa,GAGyC,kBAApD/1B,OAAOC,UAAUC,SAAST,KAAK+1B,EAAQwB,WACzCF,EAAWtB,EAAQwB,QACnBjB,GAAa,QAGE/yB,IAAb6zB,QAAuC7zB,IAAb8zB,IAC5BG,QAAQC,KAAK,wBAAyB,CACpC1B,QAAAA,EACAvrB,OAAAA,EACAtC,MAAAA,EACA/E,OAAQ2yB,EAAUpxB,KAAI,SAAA9B,UACpBgzB,EAAYhzB,EAAEuK,aAAevK,EAAE4K,oBAGnCspB,GAAY,GAIdjqB,EAAM4I,OAAO,CAAC2hB,EAAkBC,IAE5BtB,EAAQxQ,QACV1Y,EAAM4I,OAAOhW,MAAMoB,KAAKgM,EAAM4I,UAAU3P,WAGtCwwB,GACFzpB,EAAMsc,WAGFuO,EAAa7qB,EAAMgJ,OAAO3N,MAAMuuB,GAGhCjqB,EAAmBopB,EACrB+B,GAAsB5B,EAASlpB,EAAOrC,EAAQtC,QAC9C3E,EAEEuJ,EAAkBN,EACpBorB,GAAqB7B,EAASvpB,EAAkBhC,QAChDjH,EAEEs0B,QAAmBrrB,SAAAA,EAAkBC,eAEvCspB,EAAQ+B,cAAgBD,EAAkB,KACtCE,EAAYlrB,EAAM0Y,OAAO,GAEzByS,EADUnrB,EAAM0Y,OAAOsS,GACRrzB,UAAYuzB,EAAUvzB,UAE3CqI,EAAM4I,OAAO,CACX,IAAI0N,KAAKtW,EAAM4I,SAAS,GAAGjR,UAAYwzB,EAAO,GAC9C,IAAI7U,KAAKtW,EAAM4I,SAAS,GAAGjR,UAAYwzB,EAAO,SAI5CC,EAAgBprB,EAAMic,aAEtBoP,EAAa,GAEbC,EAAc,SAACl3B,oCACnB80B,EAAQmC,mBAARE,EAAoBvrB,aAApBurB,EAAoBvrB,MAAQ5L,OAAYi3B,GAAYrrB,WAAOtJ,QAC3D00B,EAAch3B,IAEVo3B,EAAgB,SAACp3B,oCACrB80B,EAAQmC,mBAARI,EAAoBC,eAApBD,EAAoBC,QAAUt3B,OACzBi3B,GACHK,aAASh1B,QACL40B,EAAYl3B,IAEdu3B,EAAe,SAACv3B,oCACpB80B,EAAQmC,mBAARO,EAAoBC,cAApBD,EAAoBC,OAASz3B,OAAYi3B,GAAYQ,YAAQn1B,QAC7D80B,EAAcp3B,WAEhBV,OAAOqB,OAAOs2B,EAAY,SACfD,EACTprB,MAAOsrB,EACPI,QAASF,EACTK,OAAQF,SAILzC,GACHe,UAAAA,EACApqB,WAAY,OACZ3B,WAAAA,EACA8B,MAAAA,EACA3E,MAAAA,EACAwvB,WAAAA,EACAlrB,iBAAAA,EACAM,gBAAAA,EACAorB,WAAYA,IA9JVS,CACA/C,EACAG,EACAvrB,EACAsrB,EACA/qB,EACA7C,EACAuuB,GAEsB,WAAtBV,EAAQW,WAAgD,QAAtBX,EAAQW,UAyJhD,SACEd,EACAG,EACAvrB,EACAsrB,EACA/qB,EACA7C,EACAuuB,OAEM5pB,EAA8B,QAAtBkpB,EAAQW,UAAsBkC,KAAaC,KAErD/B,GAAY,EAEhBtsB,EAASorB,EAAYprB,EAASA,EAC3BsgB,QAAO,SAAAzjB,UAAKA,EAAE0vB,kBAAoBhB,EAAQiB,MAE7ClB,EAAYF,EAAYE,EAAYA,EAAUhL,QAAO,SAAAloB,UAAKA,EAAEm0B,kBAAoBhB,EAAQiB,MAEpFjB,EAAQnpB,SA0Nd,SACEpC,EACAsuB,aAEMC,EAAgBx4B,OAAOkB,KAAK+I,GAoB5BoC,E/DjeO,eACTnL,EAAOqN,GAAS,IAChBa,EAAQqpB,GACRpO,EAASqO,GACTh4B,EAAQ6O,YAEHopB,EAAM/pB,OAET5P,EACA45B,EAFAC,EAAK35B,MAAMoB,KAAKY,EAAKM,MAAMC,KAAMH,WAAYkO,IAC1CzP,EAAI84B,EAAG95B,OAAQ8F,GAAK,MAGtB,MAAMxC,KAAKuM,MACT5P,EAAI,IAAK6F,EAAG7F,EAAIe,IAAKf,GACvB65B,EAAG75B,GAAG6F,GAAK,CAAC,GAAInE,EAAM2B,EAAGw2B,EAAG75B,GAAG+B,IAAK8D,EAAG+J,KAAQA,KAAOvM,MAItDrD,EAAI,EAAG45B,EAAKlyB,GAAM0I,EAAMypB,IAAM75B,EAAIe,IAAKf,EAC1C65B,EAAGD,EAAG55B,IAAIiE,MAAQjE,SAGpBqrB,EAAOwO,EAAID,GACJC,SAGTF,EAAMz3B,KAAO,SAAS+M,UACb3M,UAAUvC,QAAUmC,EAAoB,mBAAN+M,EAAmBA,EAAIM,GAASrP,MAAMoB,KAAK2N,IAAK0qB,GAASz3B,GAGpGy3B,EAAMj4B,MAAQ,SAASuN,UACd3M,UAAUvC,QAAU2B,EAAqB,mBAANuN,EAAmBA,EAAIM,IAAUN,GAAI0qB,GAASj4B,GAG1Fi4B,EAAMvpB,MAAQ,SAASnB,UACd3M,UAAUvC,QAAUqQ,EAAa,MAALnB,EAAYwqB,GAAyB,mBAANxqB,EAAmBA,EAAIM,GAASrP,MAAMoB,KAAK2N,IAAK0qB,GAASvpB,GAG7HupB,EAAMtO,OAAS,SAASpc,UACf3M,UAAUvC,QAAUsrB,EAAc,MAALpc,EAAYyqB,GAAazqB,EAAG0qB,GAAStO,GAGpEsO,E+DqaSA,GACbz3B,KAAKs3B,GACL93B,OAAM,SAACuN,EAAGpB,EAAa5J,WAChB2zB,WACJ3sB,EAAOb,OAAOyD,eAAdisB,EAA6BluB,OAAO3H,WAApC81B,EAA4CnC,cAExCoC,OACqB,IAAlBpC,EACH2B,EAAY5B,SAASC,GACrB,SAEF,MAAOoC,EACF,EAGFA,KAER3O,gBAAOkO,EAAYU,eAAeC,GAErBC,CACdj6B,MAAMoB,KAAK,CACTvB,OAAQkL,EAAOvF,MAAK,SAAChD,EAAGC,UAAMA,EAAEiJ,OAAO7L,OAAS2C,EAAEkJ,OAAO7L,UAAQ,GAC9D6L,OAAO7L,UAILq6B,EAAS,EAAGA,EAAS/sB,EAAQtN,OAAQq6B,YACtCtyB,EAAIuF,EAAQ+sB,GAETp6B,EAAI,EAAGA,EAAI8H,EAAE/H,OAAQC,IAAK,KAC3B6L,EAAQ/D,EAAE9H,GAEZiL,EAAOmvB,GAAQxuB,OAAO5L,KAExB6L,EAAM+D,KAAO3E,EAAOmvB,GAAQxuB,OAAO5L,GAEnCiL,EAAOmvB,GAAQxuB,OAAO5L,GAAG8N,UACvBjC,IAnQN2E,CAAYvF,EAAQurB,SAGKA,EAAQnpB,QAC/BqqB,EACAzsB,EACG9F,KAAI,SAAA2C,UACHA,EAAE8D,OAAOzG,KAAI,SAAA0G,SACLnK,EAAQ80B,EAAQmB,SAAS9rB,EAAM+rB,sBACrC/rB,EAAMwqB,EAAY,eAAiB,kBAAoB30B,WAChDmK,EAAMiC,aAAa,SAG7BusB,KAAK,IAER3C,EAAOnB,GAAW,SAAA1qB,OACZnK,EAAQ80B,EAAQmB,SAAS9rB,EAAM+rB,sBACrC/rB,EAAMwqB,EAAY,eAAiB,kBAAoB30B,EAChDA,KAfNm2B,OAAUC,OAkBXf,EAAaP,EAAQO,WAEE,iBAAhBP,EAAQ1yB,MACjB+zB,EAAW/zB,EAAI,CAAC0yB,EAAQ1yB,IAAK+zB,IAC7Bd,GAAa,GAGY,iBAAhBP,EAAQzyB,MACjB+zB,EAAW/zB,EAAI,CAACyyB,EAAQzyB,IAAK+zB,IAC7Bf,GAAa,MAIsB,iBAA5BP,EAAQ8D,sBACAt2B,IAAb6zB,QAAuC7zB,IAAb8zB,EAC5B,KACM10B,ECjSD+E,EDiSc,CAAC0vB,EAAUC,GCjSR,GAAKj0B,GDkSrB8H,EAAMvI,EAAMozB,EAAQ8D,gBAAkB,EACtCC,EAASn3B,EAAMozB,EAAQ8D,gBAAkB,EAC/CxC,EAAW9xB,KAAKjC,IAAI4H,EAAKmsB,GACzBD,EAAW7xB,KAAKlC,IAAIy2B,EAAQ1C,GCtSjB,IAAiBh0B,EDySC,iBAApB2yB,EAAQuB,UACjBF,EAAWrB,EAAQuB,QACnBhB,GAAa,GAGgB,iBAApBP,EAAQwB,UACjBF,EAAWtB,EAAQwB,QACnBjB,GAAa,WAGE/yB,IAAb6zB,QAAuC7zB,IAAb8zB,EAAwB,SACpDP,GAAY,EACZU,QAAQC,KAAK,wBAAyB,CACpC1B,QAAAA,EACAvrB,OAAAA,EACAtC,MAAAA,EACA/E,OAAQ2yB,EAAUpxB,KAAI,SAAA9B,UACpBgzB,EAAYhzB,EAAEuK,aAAevK,EAAE4K,oBAGnC4pB,WAAWA,KAAY,EACvBC,WAAWA,KAAY,EAKzBxqB,EAAM4I,OAAO,CAAC2hB,EAAUC,IAEpBtB,EAAQxQ,QACV1Y,EAAM4I,OAAOhW,MAAMoB,KAAKgM,EAAM4I,UAAU3P,WAG1C+G,EAAM3E,MAAMA,GAERouB,GACFzpB,EAAMsc,WAGFuO,EAAa7qB,EAAMgJ,OAAO3N,MAAMuuB,GAEhCjqB,EAAmBopB,EACrB+B,GAAsB5B,EAASlpB,EAAOrC,EAAQtC,QAC9C3E,EAEEuJ,EAAkBN,EACpBorB,GAAqB7B,EAASvpB,EAAkBhC,QAChDjH,EAEE00B,EAAgBprB,EAAMic,aAEtBoP,EAAa,GAEbC,EAAc,SAACl3B,oCACnB80B,EAAQmC,mBAAR6B,EAAoBltB,aAApBktB,EAAoBltB,MAAQ5L,OAAYi3B,GAAYrrB,WAAOtJ,QAC3D00B,EAAch3B,IAEVo3B,EAAgB,SAACp3B,oCACrB80B,EAAQmC,mBAAR8B,EAAoBzB,eAApByB,EAAoBzB,QAAUt3B,OACzBi3B,GACHK,aAASh1B,QACL40B,EAAYl3B,IAEdu3B,EAAe,SAACv3B,oCACpB80B,EAAQmC,mBAAR+B,EAAoBvB,cAApBuB,EAAoBvB,OAASz3B,OAAYi3B,GAAYQ,YAAQn1B,QAC7D80B,EAAcp3B,WAEhBV,OAAOqB,OAAOs2B,EAAY,SACfD,EACTprB,MAAOsrB,EACPI,QAASF,EACTK,OAAQF,SAILzC,GACHe,UAAAA,EACApqB,WAAY,SACZ3B,WAAAA,EACA8B,MAAAA,EACA3E,MAAAA,EACAwvB,WAAAA,EACAlrB,iBAAAA,EACAM,gBAAAA,EACAorB,WAAAA,IA1SIgC,CACAtE,EACAG,EACAvrB,EACAsrB,EACA/qB,EACA7C,EACAuuB,GAEsB,SAAtBV,EAAQW,UAqShB,SACEd,EACAG,EACAvrB,EACAO,EACA7C,EACAuuB,WAEAjsB,EAASA,EAAOsgB,QAAO,SAAAloB,UAAKA,EAAEm0B,kBAAoBhB,EAAQiB,UAEtDF,GAAY,EAeVjqB,EAAQstB,GAbC16B,MAAMoB,KACnB,IAAIu5B,IACF5vB,EACG9F,KAAI,SAAA9B,UAAKA,EAAEuI,UACXyuB,OACAl1B,KAAI,SAAA0G,OACGnK,EAAQ80B,EAAQmB,SAAS9rB,EAAM+rB,sBACrC/rB,EAAMwqB,EAAY,eAAiB,kBAAoB30B,EAChDA,OAKiBiH,GAC7B9B,OAAM,GACN6P,sBAAa8f,EAAQI,oBAAoB,GACzCngB,sBAAa+f,EAAQG,oBAAoB,GAGxCH,EAAQxQ,QACV1Y,EAAM4I,OAAOhW,MAAMoB,KAAKgM,EAAM4I,UAAU3P,eAGpC4xB,EAAa7qB,EAAMgJ,OAAO3N,MAAMuuB,GAEhCjqB,EAAmBK,EAEnBC,EAAkB8qB,GACtB7B,EACAvpB,EACAhC,GAGIytB,EAAgB,SAACr1B,UAAkCA,GAEnDs1B,EAAa,GAEbC,EAAc,SAACl3B,oCACnB80B,EAAQmC,mBAARmC,EAAoBxtB,aAApBwtB,EAAoBxtB,MAAQ5L,OAAYi3B,GAAYrrB,WAAOtJ,QAC3D00B,EAAch3B,IAEVo3B,EAAgB,SAACp3B,oCACrB80B,EAAQmC,mBAARoC,EAAoB/B,eAApB+B,EAAoB/B,QAAUt3B,OACzBi3B,GACHK,aAASh1B,QACL40B,EAAYl3B,IAEdu3B,EAAe,SAACv3B,oCACpB80B,EAAQmC,mBAARqC,EAAoB7B,cAApB6B,EAAoB7B,OAASz3B,OAAYi3B,GAAYQ,YAAQn1B,QAC7D80B,EAAcp3B,WAEhBV,OAAOqB,OAAOs2B,EAAY,SACfD,EACTprB,MAAOsrB,EACPI,QAASF,EACTK,OAAQF,SAILzC,GACHe,UAAAA,EACApqB,WAAY,OACZ3B,WAAAA,EACA8B,MAAAA,EACA3E,MAAAA,EACAwvB,WAAAA,EACAQ,WAAAA,EACA1rB,iBAAAA,EACAM,gBAAAA,IApXM0tB,CAAc5E,EAAWG,EAASvrB,EAAQO,EAAY7C,EAAOuuB,GAC5D,iBACK,IAAI5kB,MAAM,sBADf,GAyaX,SAAS8lB,GACP5B,EACAlpB,EACArC,EACAtC,eAIIuyB,EAA2Bl1B,KAAKjC,UAALiC,KAAY2C,GAElC3I,EAAI,EAAGA,EAAIiL,EAAOlL,OAAQC,YAC3Bm7B,EAAQlwB,EAAOjL,GAEZ6F,EAAI,EAAGA,EAAIs1B,EAAMvvB,OAAO7L,OAAQ8F,cAEjC0e,EAAMjX,WADD6tB,EAAMvvB,OAAO/F,GACH+H,gBAAgBhL,KAE5B+E,EAAI,EAAGA,EAAIwzB,EAAMvvB,OAAO7L,OAAQ4H,IAAK,OAEtCyzB,EAAM9tB,WADD6tB,EAAMvvB,OAAOjE,GACHiG,gBAAgBhL,QAEjC2hB,IAAQ6W,OAIN3C,EAAOzyB,KAAKuB,IAAIvB,KAAKjC,IAAIwgB,EAAK6W,GAAOp1B,KAAKlC,IAAIygB,EAAK6W,IAErD3C,EAAOyC,IACTA,EAAmBzC,WAUFmC,GAFNS,EAFDr1B,KAAKjC,UAALiC,KAAY2C,GAESuyB,GAEQvyB,GAC5C9B,OAAM,GACN6P,sBAAa8f,EAAQI,oBAAoB,GACzCngB,sBAAa+f,EAAQG,oBAAoB,GAK9C,SAAS0B,GACP7B,EACAvpB,EACAhC,WAIMsC,EAAkBqtB,GAFLS,EAAQpwB,EAAOlL,QAEY,CAC5C,EACAkN,EAAiBC,cAEhBrG,OAAM,GACN6P,sBACC8f,EAAQM,0BACPN,EAAQI,iBAAmBJ,EAAQI,iBAAmB,EAAI,GAE5DngB,sBACC+f,EAAQK,0BACPL,EAAQG,iBAAmBH,EAAQG,iBAAmB,EAAI,UAMxD31B,OAAOqB,QAHA,SAACwL,gBACbN,WAAgBtC,EAAOqwB,MAAK,SAAAj4B,UAAKA,EAAEY,QAAU4J,aAA7B0tB,EAA4CC,gBAElCjuB,IH3jBf,SAAuB4J,GACpCqQ,GDea,SAAsBA,OAC/BiU,EAAkBjU,EAAOkU,SACzBC,EAAcnU,EAAO7C,KACrBiX,EAAcpU,EAAOoO,KACrBiG,EAAiBrU,EAAOsU,QACxBC,EAAkBvU,EAAOwU,KACzBC,EAAuBzU,EAAO0U,UAC9BC,EAAgB3U,EAAO4U,OACvBC,EAAqB7U,EAAO8U,YAE5BC,EAAWjM,GAASuL,GACpBW,EAAehM,GAAaqL,GAC5BY,EAAYnM,GAASyL,GACrBW,EAAgBlM,GAAauL,GAC7BY,EAAiBrM,GAAS2L,GAC1BW,EAAqBpM,GAAayL,GAClCY,EAAUvM,GAAS6L,GACnBW,EAActM,GAAa2L,GAC3BY,EAAezM,GAAS+L,GACxBW,EAAmBxM,GAAa6L,GAEhCY,EAAU,YAmQc55B,UACnB44B,EAAqB54B,EAAEypB,sBAGTzpB,UACd04B,EAAgB14B,EAAEypB,sBAGDzpB,UACjBg5B,EAAmBh5B,EAAE+pB,wBAGT/pB,UACZ84B,EAAc94B,EAAE+pB,eA3QlB,OACA8E,KACAA,KACAO,KACAc,KACAE,KACAtB,KACAC,KACAC,KACAG,KACAE,KACAC,cAmQetvB,UACbw4B,IAAiBx4B,EAAEkpB,YAAc,iBAGnBlpB,UACd,KAAOA,EAAE+pB,WAAa,MArQxB8H,KACAC,KACAvC,KACAC,KACAC,KACAI,KACAC,KACAC,KACA,OACA,OACAE,KACAE,KACAE,OACAuB,IAGHiI,EAAa,YAwPc75B,UACtB44B,EAAqB54B,EAAE8qB,yBAGN9qB,UACjB04B,EAAgB14B,EAAE8qB,yBAGE9qB,UACpBg5B,EAAmBh5B,EAAEorB,2BAGNprB,UACf84B,EAAc94B,EAAEorB,kBAhQlB,OACAkF,KACAA,KACAM,KACAY,KACAE,KACAnB,KACAC,KACAC,KACAC,KACAG,KACAC,cAwPkB9wB,UAChBw4B,IAAiBx4B,EAAEwqB,eAAiB,iBAGnBxqB,UACjB,KAAOA,EAAEorB,cAAgB,MA1P3ByG,KACAC,KACAf,KACAC,KACAE,KACAE,KACAC,KACAC,KACA,OACA,OACAC,KACAE,KACAE,OACAC,IAGHkI,EAAS,YA6Jc95B,EAAGqhB,EAAQ1kB,OAChCe,EAAI47B,EAAe7a,KAAK4C,EAAOvjB,MAAMnB,WAClCe,GAAKsC,EAAEuQ,EAAIgpB,EAAmBl4B,IAAI3D,EAAE,GAAG8gB,eAAgB7hB,EAAIe,EAAE,GAAGhB,SAAW,cAG9DsD,EAAGqhB,EAAQ1kB,OAC3Be,EAAI07B,EAAU3a,KAAK4C,EAAOvjB,MAAMnB,WAC7Be,GAAKsC,EAAEuQ,EAAI8oB,EAAch4B,IAAI3D,EAAE,GAAG8gB,eAAgB7hB,EAAIe,EAAE,GAAGhB,SAAW,cAGtDsD,EAAGqhB,EAAQ1kB,OAC9Be,EAAIg8B,EAAajb,KAAK4C,EAAOvjB,MAAMnB,WAChCe,GAAKsC,EAAEuE,EAAIo1B,EAAiBt4B,IAAI3D,EAAE,GAAG8gB,eAAgB7hB,EAAIe,EAAE,GAAGhB,SAAW,cAG9DsD,EAAGqhB,EAAQ1kB,OACzBe,EAAI87B,EAAQ/a,KAAK4C,EAAOvjB,MAAMnB,WAC3Be,GAAKsC,EAAEuE,EAAIk1B,EAAYp4B,IAAI3D,EAAE,GAAG8gB,eAAgB7hB,EAAIe,EAAE,GAAGhB,SAAW,cAGhDsD,EAAGqhB,EAAQ1kB,UAC/Bo9B,EAAe/5B,EAAGo4B,EAAiB/W,EAAQ1kB,MA5K7CuxB,KACAA,KACAM,KACAX,KACAD,KACAQ,KACAA,KACAD,KACAI,KACAN,KACAI,cAwIcruB,EAAGqhB,EAAQ1kB,OAC1Be,EAAIw7B,EAASza,KAAK4C,EAAOvjB,MAAMnB,WAC5Be,GAAKsC,EAAE+E,EAAIo0B,EAAa93B,IAAI3D,EAAE,GAAG8gB,eAAgB7hB,EAAIe,EAAE,GAAGhB,SAAW,KAxIvEsxB,KACAU,KACAE,KACAN,KACAjB,KACAC,KACAE,KACAJ,KACAM,cA2JkB1tB,EAAGqhB,EAAQ1kB,UAC3Bo9B,EAAe/5B,EAAGs4B,EAAajX,EAAQ1kB,eAGvBqD,EAAGqhB,EAAQ1kB,UAC3Bo9B,EAAe/5B,EAAGu4B,EAAalX,EAAQ1kB,MA7JzCkxB,KACAD,KACAE,OACAW,aAWEtJ,EAAU7B,EAAWsW,UACrB,SAAStY,OAKV7e,EACAsqB,EACAzO,EANA+C,EAAS,GACT1kB,GAAK,EACL6F,EAAI,EACJ9E,EAAI4lB,EAAU5mB,WAKZ4kB,aAAgBf,OAAOe,EAAO,IAAIf,MAAMe,MAErC3kB,EAAIe,GACqB,KAA5B4lB,EAAUyC,WAAWppB,KACvB0kB,EAAOnf,KAAKohB,EAAUxlB,MAAM0E,EAAG7F,IACgB,OAA1CowB,EAAMJ,GAAKlqB,EAAI6gB,EAAU0W,SAASr9B,KAAc8F,EAAI6gB,EAAU0W,SAASr9B,GACvEowB,EAAY,MAANtqB,EAAY,IAAM,KACzB6b,EAASsb,EAAQn3B,MAAIA,EAAI6b,EAAOgD,EAAMyL,IAC1C1L,EAAOnf,KAAKO,GACZD,EAAI7F,EAAI,UAIZ0kB,EAAOnf,KAAKohB,EAAUxlB,MAAM0E,EAAG7F,IACxB0kB,EAAOD,KAAK,cAId6Y,EAAS3W,EAAWyK,UACpB,SAAS1M,OAGVoK,EAAMtC,EAFNnpB,EAAIwsB,GAAQ,UAAM7rB,EAAW,MACzBo5B,EAAe/5B,EAAGsjB,EAAWjC,GAAU,GAAI,IAE1CA,EAAO3kB,OAAQ,OAAO,QAG3B,MAAOsD,EAAG,OAAO,IAAIugB,KAAKvgB,EAAE2uB,MAC5B,MAAO3uB,EAAG,OAAO,IAAIugB,KAAW,IAANvgB,EAAEyE,GAAY,MAAOzE,EAAIA,EAAEqsB,EAAI,OAGzD0B,KAAO,MAAO/tB,KAAIA,EAAE+tB,EAAI,GAGxB,MAAO/tB,IAAGA,EAAEksB,EAAIlsB,EAAEksB,EAAI,GAAW,GAANlsB,EAAE+E,QAGrBpE,IAARX,EAAEuE,IAAiBvE,EAAEuE,EAAI,MAAOvE,EAAIA,EAAEghB,EAAI,GAG1C,MAAOhhB,EAAG,IACRA,EAAEytB,EAAI,GAAKztB,EAAEytB,EAAI,GAAI,OAAO,KAC1B,MAAOztB,IAAIA,EAAEuQ,EAAI,GACnB,MAAOvQ,GAC2BmpB,GAApCsC,EAAOa,GAAQE,GAAQxsB,EAAE4G,EAAG,EAAG,KAAgBkkB,YAC/CW,EAAOtC,EAAM,GAAa,IAARA,EAAY6B,GAAU3lB,KAAKomB,GAAQT,GAAUS,GAC/DA,EAAOhB,GAAOzC,OAAOyD,EAAkB,GAAXzrB,EAAEytB,EAAI,IAClCztB,EAAE4G,EAAI6kB,EAAKJ,iBACXrrB,EAAEuE,EAAIknB,EAAKL,cACXprB,EAAEA,EAAIyrB,EAAKb,cAAgB5qB,EAAEuQ,EAAI,GAAK,IAEA4Y,GAAtCsC,EAAOQ,GAAUO,GAAQxsB,EAAE4G,EAAG,EAAG,KAAgB6iB,SACjDgC,EAAOtC,EAAM,GAAa,IAARA,EAAY6G,GAAW3qB,KAAKomB,GAAQuE,GAAWvE,GACjEA,EAAOwD,GAAQjH,OAAOyD,EAAkB,GAAXzrB,EAAEytB,EAAI,IACnCztB,EAAE4G,EAAI6kB,EAAKzB,cACXhqB,EAAEuE,EAAIknB,EAAK1B,WACX/pB,EAAEA,EAAIyrB,EAAKnC,WAAatpB,EAAEuQ,EAAI,GAAK,QAE5B,MAAOvQ,GAAK,MAAOA,KACtB,MAAOA,IAAIA,EAAEuQ,EAAI,MAAOvQ,EAAIA,EAAE8iB,EAAI,EAAI,MAAO9iB,EAAI,EAAI,GAC3DmpB,EAAM,MAAOnpB,EAAIssB,GAAQE,GAAQxsB,EAAE4G,EAAG,EAAG,IAAIkkB,YAAcmB,GAAUO,GAAQxsB,EAAE4G,EAAG,EAAG,IAAI6iB,SACzFzpB,EAAEuE,EAAI,EACNvE,EAAEA,EAAI,MAAOA,GAAKA,EAAEuQ,EAAI,GAAK,EAAU,EAANvQ,EAAE2tB,GAASxE,EAAM,GAAK,EAAInpB,EAAEuQ,EAAU,EAANvQ,EAAEutB,GAASpE,EAAM,GAAK,SAKrF,MAAOnpB,GACTA,EAAEksB,GAAKlsB,EAAE+tB,EAAI,IAAM,EACnB/tB,EAAEmsB,GAAKnsB,EAAE+tB,EAAI,IACNzB,GAAQtsB,IAIVisB,GAAUjsB,aAIZ+5B,EAAe/5B,EAAGsjB,EAAWjC,EAAQ7e,WAIxCC,EACAy3B,EAJAv9B,EAAI,EACJe,EAAI4lB,EAAU5mB,OACd6H,EAAI8c,EAAO3kB,OAIRC,EAAIe,GAAG,IACR8E,GAAK+B,EAAG,OAAQ,KAEV,MADV9B,EAAI6gB,EAAUyC,WAAWppB,UAEvB8F,EAAI6gB,EAAU0W,OAAOr9B,OACrBu9B,EAAQJ,EAAOr3B,KAAKkqB,GAAOrJ,EAAU0W,OAAOr9B,KAAO8F,MACnCD,EAAI03B,EAAMl6B,EAAGqhB,EAAQ7e,IAAM,EAAI,OAAQ,OAClD,GAAIC,GAAK4e,EAAO0E,WAAWvjB,YACxB,SAILA,SAjHTo3B,EAAQh6B,EAAIulB,EAAUmT,EAAasB,GACnCA,EAAQO,EAAIhV,EAAUoT,EAAaqB,GACnCA,EAAQn3B,EAAI0iB,EAAUiT,EAAiBwB,GACvCC,EAAWj6B,EAAIulB,EAAUmT,EAAauB,GACtCA,EAAWM,EAAIhV,EAAUoT,EAAasB,GACtCA,EAAWp3B,EAAI0iB,EAAUiT,EAAiByB,GAoMnC,CACLvb,OAAQ,SAASgF,OACX9jB,EAAI2lB,EAAU7B,GAAa,GAAIsW,UACnCp6B,EAAE3B,SAAW,kBAAoBylB,GAC1B9jB,GAET06B,MAAO,SAAS5W,OACVve,EAAIk1B,EAAS3W,GAAa,IAAI,UAClCve,EAAElH,SAAW,kBAAoBylB,GAC1Bve,GAET2nB,UAAW,SAASpJ,OACd9jB,EAAI2lB,EAAU7B,GAAa,GAAIuW,UACnCr6B,EAAE3B,SAAW,kBAAoBylB,GAC1B9jB,GAET46B,SAAU,SAAS9W,OACbve,EAAIk1B,EAAS3W,GAAa,IAAI,UAClCve,EAAElH,SAAW,kBAAoBylB,GAC1Bve,IC1WF4iB,CAAa7T,GACtB2Y,GAAatI,GAAO7F,OAEpBoO,GAAYvI,GAAOuI,UAfrB2N,CAAc,CACZhC,SAAU,SACV/W,KAAM,aACNiR,KAAM,eACNkG,QAAS,CAAC,KAAM,MAChBE,KAAM,CAAC,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,YACzEE,UAAW,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OACtDE,OAAQ,CAAC,UAAW,WAAY,QAAS,QAAS,MAAO,OAAQ,OAAQ,SAAU,YAAa,UAAW,WAAY,YACvHE,YAAa,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,SKV7F,IAAMqB,GAAW,SAAChxB,OACZgH,EAAOhH,EAAGixB,8BACP,CACLjyB,IAAK3F,KAAKa,MAAM8M,EAAKhI,KACrBlI,MAAOuC,KAAKa,MAAM8M,EAAKlQ,OACvB82B,OAAQv0B,KAAKa,MAAM8M,EAAK4mB,QACxBv3B,KAAMgD,KAAKa,MAAM8M,EAAK3Q,MACtBsJ,MAAOtG,KAAKa,MAAM8M,EAAKrH,OACvBI,OAAQ1G,KAAKa,MAAM8M,EAAKjH,QACxBzJ,EAAG+C,KAAKa,MAAM8M,EAAK1Q,GACnBgH,EAAGjE,KAAKa,MAAM8M,EAAK1J,KCRR,SAAS4zB,GAAuBzvB,SACPpF,UAAM80B,UAAS,GAA9CC,OAAaC,SAElBrzB,IADMszB,IAAAA,WAAY5yB,IAAAA,eAAgBiB,IAAAA,MAAOI,IAAAA,SAGXuxB,IAAxBC,IAAAA,KAAMC,IAAAA,cAERC,EAAQp1B,UAAMC,OAAoB,ODK3B,gBACbmF,IAAAA,KACAgwB,IAAAA,MACA/yB,IAAAA,eACA2yB,IAAAA,eAQQK,EAAwB1zB,IAAxB0zB,oBAEDC,EAAqCD,KAArBE,EAAqBF,KAEtCG,EAAgBx1B,UAAMy1B,SAAQ,iCAC3BH,EAAelwB,EAAK6oB,kBAApByH,EAA4CtwB,EAAKqpB,MACvD,CAAC6G,EAAgBlwB,EAAK6oB,SAAU7oB,EAAKqpB,KAIlCkH,EAAkB31B,UAAM41B,aAAY,oBACnCR,EAAMj1B,aAaP01B,EATAC,EAAY1wB,EAAK5C,WAEjBH,EAAeqB,OADfrB,EAAeiB,MAGbyyB,EAAkB7+B,MAAMoB,KAC5B88B,EAAMj1B,QAAQ61B,iBAAiB,iCAC/B75B,KAAI,SAAAwH,UAAMgxB,GAAShxB,MAKrBoyB,EAAgBE,SAAQ,SAAAC,SAClBC,WAAgBN,KAAe,CAAEvyB,MAAO,GACxC4yB,EAAM5yB,MAAQ,GAAK4yB,EAAM5yB,MAAQ6yB,EAAc7yB,QACjDuyB,EAAcK,UAIdE,EAAkBN,EAElBC,EAAgBh/B,OAAS,GAC3Bg/B,EAAgBE,SAAQ,SAAC91B,EAASnJ,OAC1Bq/B,EAAON,EAAgB/+B,EAAI,GAE7Bq/B,IACFD,EAAkBp5B,KAAKlC,IACrBs7B,EACAhxB,EAAK5C,WAAarC,EAAQwC,IAAM0zB,EAAK1zB,IAAMxC,EAAQnG,KAAOq8B,EAAKr8B,cAMjEs8B,aACHT,YAAavyB,QAAS,GAAK8B,EAAKqoB,0BACjC2I,EAIGhxB,EAAK5C,YACRwyB,EAAesB,MAGhB,CACDlB,EACAhwB,EAAK5C,WACL4C,EAAKqoB,0BACLprB,EAAeiB,MACfjB,EAAeqB,OACfsxB,IAGIuB,EAAoBv2B,UAAM41B,aAAY,cACrCR,EAAMj1B,aAiBLq2B,EAA+B,CACnClzB,MAAO,EACPI,OAAQ,EACR+yB,WAAY,EACZC,cAAe,EACfC,YAAa,EACbC,aAAc,GAGVC,EAAYzB,EAAMj1B,QAElB22B,EAASD,EAAUE,mDACnBC,EAAWH,EAAUE,8CAEtBD,GAAWE,OAIVC,EAAWtC,GAASmC,GACpBI,EAAavC,GAASqC,GAEvBC,GAAaC,IAKb9xB,EAAK5C,YAWRg0B,EAAcC,WAAaz5B,KAAKa,MAC9Bb,KAAKjC,IAAI,EAAGm8B,EAAWv0B,WAAMs0B,SAAAA,EAAUt0B,OAGzC6zB,EAAcE,cAAgB15B,KAAKa,MACjCb,KAAKjC,IAAI,SAAGk8B,SAAAA,EAAU1F,QAAS2F,EAAW3F,SAG5CiF,EAAclzB,YAAQ2zB,SAAAA,EAAU3zB,QAlBhCkzB,EAAcG,YAAc35B,KAAKa,MAC/Bb,KAAKjC,IAAI,EAAGm8B,EAAWl9B,YAAOi9B,SAAAA,EAAUj9B,QAG1Cw8B,EAAcI,aAAe55B,KAAKa,MAChCb,KAAKjC,IAAI,SAAGk8B,SAAAA,EAAUx8B,OAAQy8B,EAAWz8B,QAG3C+7B,EAAc9yB,aAASuzB,SAAAA,EAAUvzB,QAgBhC4xB,GACAE,IACDx9B,OAAOkB,KAAKs9B,GAAeW,MAAK,SAAAp+B,UAEvBy9B,EAAcz9B,KAASy8B,EAAcz8B,OAG9Cw8B,GAAkB,SAAA6B,yBACbA,UACFhyB,EAAK6oB,wBACAmJ,EAAIhyB,EAAK6oB,aAAa,WACzB7oB,EAAKqpB,IAAM+H,oBA9EZhB,GAEFD,GAAkB,SAAA6B,WACVC,gBAAgBD,EAAIhyB,EAAK6oB,aAAa,kBAErCoJ,EAAQjyB,EAAKqpB,SAGf2I,UACFhyB,EAAK6oB,UAAWoJ,WAyExB,CACDjyB,EAAKqpB,GACLrpB,EAAK5C,WACL4C,EAAK6oB,SACLuH,EACAF,EACAF,EACAG,IAIF+B,GAA0B,WAExBl3B,OAAOm3B,uBAAsB,WAC3B5B,IACAY,SAED,CAACZ,ICvLJ6B,CAAW,CACTpyB,KAAAA,EACAgwB,MAAAA,EACA/yB,eAAAA,EACA0yB,YAAAA,EACAC,eAAAA,QAGIyC,EAAa,SAACC,OACZC,GAAaD,GAAW3C,EAExBzwB,EAAQozB,EAAUtyB,EAAK+pB,WAAa/pB,EAAKd,QAChBA,EAAM3E,QAA9Bi4B,OAAYC,OAoBbC,EAAiBJ,EAAUh0B,EAASrB,EAAeqB,OACnDq0B,EAAgBL,EAAUp0B,EAAQjB,EAAeiB,QAGnC,SAAlB8B,EAAK6oB,SACD,CACE,CAAEh0B,EAAG,EAAGgH,EAAG22B,GACX,CAAE39B,EAAG,EAAGgH,EAAG42B,IAEK,UAAlBzyB,EAAK6oB,SACL,CACE,CAAEh0B,EAAG89B,EAAe92B,EAAG22B,GACvB,CAAE39B,EAAG89B,EAAe92B,EAAG42B,IAEP,QAAlBzyB,EAAK6oB,SACL,CACE,CAAEh0B,EAAG29B,EAAY32B,EAAG,GACpB,CAAEhH,EAAG49B,EAAU52B,EAAG,IAEpB,CACE,CAAEhH,EAAG29B,EAAY32B,EAAG62B,GACpB,CAAE79B,EAAG49B,EAAU52B,EAAG62B,IAlBnBE,OAAUnvB,OAqBXrL,EA1CW,eACTy6B,EAAU7yB,KAEX6yB,EAA+B9I,WAAW3xB,MAAQ,IACpB,iBAAtBy6B,EAAQC,iBACVD,EAAQ9I,WAAW3xB,MAAMy6B,EAAQC,eAGpCC,EAAcF,EAAQz1B,WAAa,GAAK,GACxC7C,EAAQs4B,EAAQ9I,WAAWxvB,QAC3BwB,EAAMnE,KAAKuB,IAAIoB,EAAM,GAAKA,EAAM,IAAMw4B,SAErCF,EAAQ9I,WAAW3xB,MAAM2D,UAG3B82B,EAAQ9I,WAAWjiB,SA2BdkrB,GAAWj8B,KAAI,SAAAk8B,OACrBrrB,EA8JZ,SAA2B1I,EAA8B5L,SACnDsU,WAAK1I,EAAM5L,MAAUkB,OAGrB0K,EAAMJ,iBAED8I,EAAK1I,EAAMJ,YAAc,SAG3B8I,EAvKQsrB,CAAUh0B,EAAO+zB,KAGR,SAAlBjzB,EAAK6oB,SACD,CACE,CAAEh0B,EAAG,EAAGgH,EAAG+L,GACX,CAAE/S,GAAI,EAAGgH,EAAG+L,GACZ,CAAE/S,EAAG89B,EAAe92B,EAAG+L,IAEP,UAAlB5H,EAAK6oB,SACL,CACE,CAAEh0B,EAAG89B,EAAe92B,EAAG+L,GACvB,CAAE/S,EAAG89B,EAAgB,EAAG92B,EAAG+L,GAC3B,CAAE/S,EAAG,EAAGgH,EAAG+L,IAEK,QAAlB5H,EAAK6oB,SACL,CACE,CAAEh0B,EAAG+S,EAAI/L,EAAG,GACZ,CAAEhH,EAAG+S,EAAI/L,GAAI,GACb,CAAEhH,EAAG+S,EAAI/L,EAAG62B,IAEd,CACE,CAAE79B,EAAG+S,EAAI/L,EAAG62B,GACZ,CAAE79B,EAAG+S,EAAI/L,EAAG62B,EAAiB,GAC7B,CAAE79B,EAAG+S,EAAI/L,EAAG,UAGb,CACLvI,MAAO2/B,EACP//B,UACAigC,QACAC,uBAKFx4B,6BACEjH,mBAAmB2+B,EAAU,QAAU,SACvCe,yBAAyBf,EAAU,QAAU,SAC7Cj3B,MAAO,CACLiC,UAAWg1B,OACP18B,EACAgG,EAAUqB,EAAerI,KAAMqI,EAAeM,OAGpD3C,6BACEy4B,iBACAh4B,WACMi3B,EACA,CACEnrB,QAAS4oB,EAAgB,GAAM,EAC/BuD,cAAe,QAEjB,CACEnsB,QAAS,EACTmsB,cAAe,SAIvB14B,6BAAGy4B,UAAU,kBACXz4B,gCACEy4B,UAAU,SACVnwB,GAAI0vB,EAAS/9B,EACbsO,GAAIyvB,EAAS/2B,EACb2G,GAAIiB,EAAO5O,EACX4N,GAAIgB,EAAO5H,EACXN,OAAQu0B,EAAO,wBAA0B,oBAE1C13B,EAAMrB,KAAI,SAACk8B,EAAMrhC,SACuBqhC,EAAKE,GAAnCI,IAAH1+B,EAAkB2+B,IAAH33B,QAEC,QAAlBmE,EAAK6oB,SACP2K,GAAc,EACa,WAAlBxzB,EAAK6oB,SACd2K,GAAc,EACa,SAAlBxzB,EAAK6oB,SACd0K,GAAc,EACa,UAAlBvzB,EAAK6oB,WACd0K,GAAc,GAId34B,6BAAGjH,eAAgBs/B,MAAQrhC,EAAKyhC,UAAW,QACvCf,EAUE,KATF13B,gCACEsI,GAAI+vB,EAAK//B,KAAK2B,EACdsO,GAAI8vB,EAAK//B,KAAK2I,EACd2G,GAAIywB,EAAKE,GAAGt+B,EACZ4N,GAAIwwB,EAAKE,GAAGt3B,EACZN,OACEu0B,EAAO,wBAA0B,oBAIvCl1B,gCACEy4B,UAAU,YACVh4B,MAAO,CACLo4B,SAAU,GACVh4B,KAAMq0B,EAAO,wBAA0B,kBACvC4D,iBAAkBnB,EACd,UACkB,WAAlBvyB,EAAK6oB,SACL,UACkB,QAAlB7oB,EAAK6oB,SACL,aACA,UACJ8K,WAAYpB,EACR,MACkB,UAAlBvyB,EAAK6oB,SACL,QACkB,SAAlB7oB,EAAK6oB,SACL,MACA,UAENvrB,uBAAwBi2B,OAAeC,eACrCjB,EAA+B,QAAlBvyB,EAAK6oB,SAAqB,IAAM,GAAM,QAGnD7oB,EAAyBuqB,WAAWrrB,MACpC+zB,EAAK3/B,aAOjBsH,6BAAGy4B,UAAU,QACVj7B,EAAMrB,KAAI,SAACk8B,EAAMrhC,gBAEdgJ,6BAAGjH,eAAgBs/B,MAAQrhC,EAAKyhC,UAAW,iBACvCrzB,EAAK4zB,eAAsBtB,EAUzB,KATF13B,gCACEsI,GAAI+vB,EAAK//B,KAAK2B,EACdsO,GAAI8vB,EAAK//B,KAAK2I,EACd2G,GAAIywB,EAAKG,OAAOv+B,EAChB4N,GAAIwwB,EAAKG,OAAOv3B,EAChBN,OACEu0B,EAAO,yBAA2B,oCAajD9vB,EAAKqH,KACVzM,6BAAGD,IAAKq1B,GACLqC,GAAW,GACXA,GAAW,IAEZ,KCjOS,SAASwB,GAAejI,OAC/BjxB,EAAMC,UAAMC,gBAElBq3B,GAA0B,WACxBv3B,EAAII,QAAU6wB,IACb,CAACA,IAEGjxB,EAAII,QCTE,SAAS+4B,GAAiBp5B,EAAQq5B,YAAAA,IAAAA,GAAgB,OACzDp5B,EAAMC,UAAMC,OAAiBk5B,EAAOr5B,EAAM,aAE5Cq5B,IACFp5B,EAAII,QAAUL,GAGTC,EAAII,QCLE,SAASi5B,WACUp5B,EAAM80B,WAA/BuE,OAAUC,cAEjBhC,GAA0B,eACnB+B,EAAU,KACTz1B,EAAU21B,SAASC,eACrB,uBAGG51B,KACHA,EAAU21B,SAASE,cAAc,QAEzBC,aAAa,KAAM,uBAE3B1hC,OAAOqB,OAAOuK,EAAQnD,MAAO,CAC3Bi4B,cAAe,OACfzK,SAAU,QACVj0B,KAAM,EACNS,MAAO,EACPkI,IAAK,EACL4uB,OAAQ,YACG,cAGbgI,SAASI,KAAKC,OAAOh2B,IAGvB01B,EAAY11B,OAITy1B,ECnCT,IAaAQ,GAbIC,GAA2B,CAAA,SAAA,SAAA,OAAA,QAAA,MAA/B,SAYIC,GAAgB,IAApB5+B,IAGI6+B,GAAM,SAANA,QACGC,EAAN,GACAF,GAAAA,SAAsB,SAAAG,EAAAC,OARLzgC,EAAAC,EASZygC,EAAUD,EAAdvF,wBATgBl7B,EAUD0gC,EAVCzgC,EAUSugC,EAAzBvvB,UAVgB,IAACjR,IAAAA,EAAD,SAAA,IAA6BC,IAAAA,EAA7B,IACjBmgC,GAAA3C,MAAW,SAAAkD,UAAU3gC,EAAAA,KAAYC,EAAtB0gC,QAUTH,EAAAA,KAAAA,EACAD,EAAAA,KAAAA,OAIFA,EAAAA,SAAsB,SAAAC,GACrBA,EAAAA,UAAAA,SAAwB,SAAAI,UAAQA,EAAGJ,EAAXvvB,YAGzBkvB,GAAQz5B,OAAAA,sBAARy5B,ICpBc,SAASU,GACtBJ,EACAK,SAE8Bx6B,UAAM80B,SAASqF,GAAtCv2B,OAAS62B,SAEMz6B,UAAM80B,SAAkB,CAC5CxxB,MAAO,EACPI,OAAQ,IAFLiH,OAAM+vB,cAKK16B,UAAMC,OAAO0K,GAErBxK,QAAUwK,EAElB2sB,GAA0B,WACpB6C,IAASv2B,GACX62B,EAAWN,MAIf7C,GAA0B,WACpBkD,GAAW52B,GACb82B,EAAQ92B,EAAQgxB,2BAEjB,CAAChxB,EAAS42B,IAEbx6B,UAAMM,WAAU,cACTsD,GAAY42B,OAIXG,WDRTR,EACAG,SAEO,CACNM,QADM,eAEDC,EAAJ,IAAed,GAAAA,KACXA,GAAAA,IAAJI,GACCJ,GAAAA,IAAAA,GAAAA,UAAAA,KAAAA,GAEAA,GAAAA,IAAAA,EAAwB,CACvBpvB,UADuB3P,EAEvB8/B,gBAFuB,EAGvBC,UAAW,CAAAT,KAGbO,GAAcb,MAGfgB,UAfM,eAgBDd,EAAQH,GAAAA,IAAZI,MACAD,EAAW,KAEJj/B,EAAQi/B,EAAAA,UAAAA,QAAdI,GACIr/B,GAAJ,GAAgBi/B,EAAAA,UAAAA,OAAAA,EAHN,GAMLA,EAAAA,UAALnjC,QAA6BgjC,GAAa,OANhCI,GASLJ,GAALkB,MAAyBC,qBAAAA,OCrBRC,CAAYv3B,GAAoB,SAACw2B,GAChDM,EAAQN,aAGVO,EAASC,UAEF,WACLD,EAASK,gBAEV,CAACp3B,EAAS42B,IA2BN7vB,EC7EM,SAASywB,GAAgBhkC,EAAGgI,UACzCg8B,GAAkBpjC,OAAOqjC,gBAAkB,SAAyBjkC,EAAGgI,UACrEhI,EAAEkkC,UAAYl8B,EACPhI,IAGcA,EAAGgI,GCNb,SAASm8B,QACC,oBAAZC,UAA4BA,QAAQC,UAAW,OAAO,KAC7DD,QAAQC,UAAUC,KAAM,OAAO,KACd,mBAAVC,MAAsB,OAAO,aAGtCC,QAAQ3jC,UAAUgE,QAAQxE,KAAK+jC,QAAQC,UAAUG,QAAS,IAAI,iBACvD,EACP,MAAOtb,UACA,GCPI,SAASub,GAAWC,EAAQC,EAAMC,UAE7CH,GADEI,KACWT,QAAQC,UAER,SAAoBK,EAAQC,EAAMC,OACzCtiC,EAAI,CAAC,MACTA,EAAE6C,KAAK/C,MAAME,EAAGqiC,OAEZG,EAAW,IADGC,SAASxkC,KAAK6B,MAAMsiC,EAAQpiC,WAE1CsiC,GAAOX,GAAea,EAAUF,EAAM/jC,WACnCikC,IAIO1iC,MAAM,KAAMF,WCFhC,SAAS8iC,GAAY1iC,EAAWC,YAC1ByH,OAAOC,MAAM3H,KAAM0H,OAAOC,MAAM1H,KAG7BD,EAAIC,EANG,MAMYD,EAAIC,EANhB,KAShB,SAAS0iC,GAAW3iC,UACX0iC,GAAY1iC,EAAG,OAGX4iC,yBASTC,EACAC,EACAC,EACAC,QAEKC,GAAKH,OACLI,GAAKH,OACLI,GAAKH,OACLI,UAAY,UACZC,YAAcR,OACdS,WAAa,6BAGpB/iC,EAAA,SAAEgjC,eACWjiC,IAAPiiC,IACFA,IAAM,IAAIriB,MAAOsiB,UAAYzjC,KAAKujC,YAAc,KAE3CvjC,KAAKqjC,UACRrjC,KAAKsjC,YAActjC,KAAKqjC,UAAU7iC,EAAEgjC,GACpCxjC,KAAKsjC,eAGHv0B,GAAR,SAAWy0B,eACEjiC,IAAPiiC,IACFA,IAAM,IAAIriB,MAAOsiB,UAAYzjC,KAAKujC,YAAc,KAE3CvjC,KAAKqjC,UAAYrjC,KAAKqjC,UAAUt0B,GAAGy0B,GAAM,KAGlDE,OAAA,SAAOljC,OACCgF,GAAI,IAAI2b,MAAOsiB,UAEjBE,EAAW,EACXnP,EAAWx0B,KAAKsjC,YAChBtjC,KAAKqjC,YAEHT,GAAWe,KACbA,EAAW3jC,KAAKqjC,UAAUt0B,IAAIvJ,EAAIxF,KAAKujC,YAAc,MACvD/O,EAAWx0B,KAAKqjC,UAAU7iC,GAAGgF,EAAIxF,KAAKujC,YAAc,KAChDX,GAAWe,KAAWA,EAAW,GACjCf,GAAWpO,KAAWA,EAAW,GACrCA,GAAYx0B,KAAKsjC,aAEftjC,KAAKqjC,WAAaT,GAAWpO,EAAWh0B,IAAMoiC,GAAWe,UAGxDL,YAAc9iC,OACd6iC,UAAYrjC,KAAK4jC,OAAOpP,EAAWx0B,KAAKsjC,YAAaK,QACrDJ,WAAa/9B,MAGpBq+B,KAAA,SAAKrjC,QACE+iC,YAAa,IAAIpiB,MAAOsiB,eACxBH,YAAc9iC,OACd6iC,UAAY,CACf7iC,oBACS,GAETuO,qBACS,OAKb/P,KAAA,kBACS2jC,GAAY3iC,KAAKQ,IAAKR,KAAKsjC,cAAgBV,GAAW5iC,KAAK+O,SAuB5D60B,OAAR,SAAeE,EAAiBH,OACxBtgC,EAAIrD,KAAKojC,GACTj+B,EAAInF,KAAKkjC,GACTh+B,EAAIlF,KAAKmjC,GAETY,EAAM1gC,EAAIA,EAAI,EAAI8B,EAAID,KAChB,IAAR6+B,EAAW,KAGPx0B,GAAKlM,GAAK,EAAI8B,GACd6+B,EAAKF,EACLG,EAAKN,GAAYp0B,EAAIu0B,SACpB,CACLtjC,WAAEgF,UACQw+B,EAAKC,EAAKz+B,GAAKjC,KAAKoB,IAAIpB,KAAK0kB,EAAG1Y,EAAI/J,IAE9CuJ,YAAGvJ,OACKb,EAAMpB,KAAKoB,IAAIpB,KAAK0kB,EAAG1Y,EAAI/J,UAC1B+J,GAAKy0B,EAAKC,EAAKz+B,GAAKb,EAAMs/B,EAAKt/B,IAGrC,GAAIo/B,EAAM,EAAG,KAIZ1/B,IAAOhB,EAAIE,KAAKC,KAAKugC,KAAS,EAAI5+B,GAClC++B,IAAO7gC,EAAIE,KAAKC,KAAKugC,KAAS,EAAI5+B,GAClC8+B,GAAMN,EAAWt/B,EAAKy/B,IAAYI,EAAK7/B,GACvC2/B,EAAKF,EAAUG,QAEd,CACLzjC,WAAEgF,UACOw+B,EAAKzgC,KAAKoB,IAAIpB,KAAK0kB,EAAG5jB,EAAKmB,GAAKy+B,EAAK1gC,KAAKoB,IAAIpB,KAAK0kB,EAAGic,EAAK1+B,IAEpEuJ,YAAGvJ,UAECw+B,EAAK3/B,EAAKd,KAAKoB,IAAIpB,KAAK0kB,EAAG5jB,EAAKmB,GAChCy+B,EAAKC,EAAK3gC,KAAKoB,IAAIpB,KAAK0kB,EAAGic,EAAK1+B,SAShC2L,EAAI5N,KAAKC,KAAK,EAAI2B,EAAID,EAAI7B,EAAIA,IAAM,EAAI8B,GACxCoK,GAAOlM,EAAI,EAAK8B,EAChB6+B,EAAKF,EACLG,GAAMN,EAAWp0B,EAAIu0B,GAAW3yB,QAE/B,CACL3Q,WAAEgF,UAEEjC,KAAKoB,IAAIpB,KAAK0kB,EAAG1Y,EAAI/J,IACpBw+B,EAAKzgC,KAAKsN,IAAIM,EAAI3L,GAAKy+B,EAAK1gC,KAAKwN,IAAII,EAAI3L,KAG9CuJ,YAAGvJ,OACKlB,EAAQf,KAAKoB,IAAIpB,KAAK0kB,EAAG1Y,EAAI/J,GAC7BqL,EAAMtN,KAAKsN,IAAIM,EAAI3L,GACnBuL,EAAMxN,KAAKwN,IAAII,EAAI3L,UAEvBlB,GAAS2/B,EAAK9yB,EAAIN,EAAMmzB,EAAK7yB,EAAIJ,GACjCxB,EAAIjL,GAAS2/B,EAAKlzB,EAAMizB,EAAKnzB,WCtLlC,SAASszB,GACdllC,EACAmlC,EACAvD,EACAwD,EACAC,OAEMC,EAAYh+B,UAAMC,UAAWq8B,IAAO5jC,UAAUmlC,KAC9ClP,EAAW9uB,EAAanH,KA2BzB,SAAgBulC,OACfC,EAAMl+B,UAAMC,OAAsB,MAClCk+B,EAAcn+B,UAAMC,OAAOg+B,GACjCE,EAAYh+B,QAAU89B,MAChB5F,EAAOr4B,UAAM41B,aAAY,WACzBuI,EAAYh+B,YAChB+9B,EAAI/9B,QAAUo3B,sBAAsBc,MACnC,UAEI,CACLr4B,UAAMy1B,SAAQ,kBAAM4C,IAAM,CAACA,IAC3Br4B,UAAMy1B,SACJ,kBAAM,kBAAMyI,EAAI/9B,SAAW+6B,qBAAqBgD,EAAI/9B,YACpD,KAtCwBi+B,EAAO,kBACjC9D,EAAG0D,EAAU79B,QAAQlG,KACd+jC,EAAU79B,QAAQ1H,UAFpB4lC,OAAUC,cAMjBt+B,UAAMM,WAAU,cACVw9B,SACFE,EAAU79B,QAAQm9B,KAAK3O,UACvB0P,IAGFL,EAAU79B,QAAQg9B,OAAOzkC,GACzB2lC,MACC,CAACN,EAAOpP,EAAUmP,EAAWO,EAAUC,EAAS5lC,IAEnDsH,UAAMM,WAAU,kBACP,WACLg+B,OAED,CAACA,IAEGN,EAAU79B,QCdnB,IAAMo+B,GAAyB,SAACrJ,EAAe9wB,UAC7C8wB,uBACwB9wB,EAAY,EAAI,IAAO,4BACxBA,EAAY,EAAI,IAAO,SAE1Co6B,GAAqB,SAACtJ,UAC1BA,EAAO,uBAAyB,wBAElC,SAASuJ,GAAcjR,yBAEhBA,GACH/gB,cAAM+gB,EAAQ/gB,SACdiyB,kBAAUlR,EAAQkR,aAClBC,mBAAWnR,EAAQmR,gBAIR,SAASC,aACd3J,EAAetzB,IAAfszB,WAEJ4J,WAAiB5J,IAAa6J,kBAC9BC,WAAmB9J,IAAa+J,oBAE9BC,EAAyBj/B,UAAMy1B,SACnC,kBACEgJ,GACGI,EAE6B,kBAAnBA,EACP,GACAA,EAHA,CAAEpyB,MAAM,MAKhB,CAACoyB,IAGGK,EAA2Bl/B,UAAMy1B,SACrC,kBACEgJ,GACGM,EAE+B,kBAArBA,EACP,GACAA,EAHA,CAAEtyB,MAAM,MAKhB,CAACsyB,WAID/+B,gDACEA,wBAACm/B,IAAOx6B,WAAQ6oB,QAASyR,IACzBj/B,wBAACm/B,IAAO3R,QAAS0R,KAKvB,SAASC,GAAerF,uBAWlBn4B,IANFszB,IAAAA,WACAmK,IAAAA,OACA/8B,IAAAA,eACAD,IAAAA,kBACAN,IAAAA,YACAu9B,IAAAA,cAGIC,EAAoBz/B,EAAai6B,EAAMtM,SAEtClrB,EAAgBF,KACjBm9B,EAAqBrG,GAAc52B,IAAgBA,GAEnDP,WACJs9B,EAAc/M,MAAK,SAAAj4B,UAAKA,EAAEo0B,YAAO8Q,SAAAA,EAAoB/Q,uBACrD6Q,EAAc,GAEVj6B,EAAO00B,EAAMn1B,QAAU7C,EAAcC,EAErCy9B,EAAc1F,EAAMn1B,QAAU5C,EAAgBD,EAE9C29B,EAAe,SAACplC,gBACpBA,EACI+K,EAAKf,iBACHhK,EAAEyK,kBAAF46B,EAAc,GACd5F,EAAMn1B,QACNtK,EAAEuK,aACFvK,EAAE4K,oBACJjK,GAEA2kC,EAAaF,EAAan9B,GAEhCtC,UAAMM,WAAU,0BACdg/B,cAAqBM,YAAAA,SAAWD,KAC/B,CAACL,EAAmBK,QAmBnB1lC,EACAgH,EACAqH,EACAV,EACAW,EACAV,EACAg4B,EACAC,UAxBEpnC,WAAQohC,EAAMtM,QAAQ90B,SAASinC,EAE/BI,EAAmB7G,GACvBY,EAAMtM,QAAQ90B,MACS,MAAvBohC,EAAMtM,QAAQ90B,OAGVsnC,EAAmB9G,GACvBuG,EAAaF,GACuB,MAApCE,EAAaF,IAGTU,QAAcF,EAAAA,EAAoBC,EAGlCE,EAAeV,EAAYl7B,MAAM3E,QAWjCyE,EAAgC,SAApBgB,EAAKjB,WAAwBiB,EAAKd,MAAMJ,YAAc,EAElEuI,OAAwB,IAAV/T,IAA0B0I,OAAOC,MAAM3I,GAEvDsU,EAAK5H,EAAKd,MAAM5L,GAGhB0M,EAAK5C,YAEP+F,YADAtH,EAAI+L,KACO,GAAK,EAChBnF,YAAM5G,KAAK,GAAKmD,EACM,SAAlBgB,EAAK6oB,UACP3lB,EAAK43B,EAAa,GAClBt4B,EAAKs4B,EAAa,KAElB53B,EAAK43B,EAAa,GAClBt4B,EAAKs4B,EAAa,MAIpB53B,YADArO,EAAI+S,KACO,GAAK,EAChBpF,YAAM3N,KAAK,GAAKmK,EACM,QAAlBgB,EAAK6oB,UACP1lB,EAAK23B,EAAa,GAClBr4B,EAAKq4B,EAAa,KAElB33B,EAAK23B,EAAa,GAClBr4B,EAAKq4B,EAAa,SAWlBC,EACAC,EARAC,EAAarjC,KAAKlC,IAAIwN,EAAIV,GAC1B04B,EAAatjC,KAAKlC,IAAIyN,EAAIV,GAC1B04B,EAAWvjC,KAAKjC,IAAIuN,EAAIV,GACxB44B,EAAWxjC,KAAKjC,IAAIwN,EAAIV,GACxB44B,GAAazjC,KAAKjC,IAAIylC,EAAWF,EAAY,GAC7CI,GAAY1jC,KAAKjC,IAAIwlC,EAAWF,EAAY,GAM5Cj7B,EAAK5C,YAEL29B,EADoB,SAAlB/6B,EAAK6oB,SACGoS,EAEAE,EAGZH,EAAUE,EAAaG,GAAa,IAGlCL,EADoB,QAAlBh7B,EAAK6oB,SACGqS,EAEAE,EAGZL,EAAUE,EAAaK,GAAY,GAIjCt7B,EAAK5C,YACPs9B,GAAa,GAEXD,EADoB,SAAlBz6B,EAAK6oB,UACM,IAED,IAGd4R,GAAa,GAEXC,EADoB,QAAlB16B,EAAK6oB,UACM,IAED,OAIV0S,GAAkBv7B,EAAuBuqB,WAAWQ,OAAO8P,GAE3DW,GAAUrG,GAAQ6E,EAAOj/B,QAASsM,GAElCo0B,GAAU7gC,UAAMC,OAA8B,MAC9C6gC,GAAY9gC,UAAMC,OAA8B,MAEhD8gC,GAAmB7H,GAAcmH,EAAkB,MAANrzB,GAC7Cg0B,GAAmB9H,GAAcoH,EAAkB,MAANtzB,GAC7Ci0B,GAAgB/H,GAAciH,EAAe,MAANnzB,GACvCk0B,GAAgBhI,GAAckH,EAAe,MAANpzB,GAGvC8wB,GAA8B,MADb7E,GAAYjsB,IACgB,OAAPA,EAG5CszB,WAAoB,MAANtzB,EAAaszB,EAAaU,MAAqBpnC,IAC7DumC,WAAiB,MAANnzB,EAAamzB,EAAUc,MAAkBrnC,IACpDwmC,WAAiB,MAANpzB,EAAaozB,EAAUc,MAAkBtnC,QAE9CunC,GAAcvD,GALpByC,WAAoB,MAANrzB,EAAaqzB,EAAaU,MAAqBnnC,IAO3D,CAAC,EAAG,IAAK,KACT,WACMinC,GAAQ1gC,UACV0gC,GAAQ1gC,QAAQM,MAAMiC,uBAAyBy+B,GAAYlnC,WAAUmnC,GAAYnnC,aAGrF6jC,IAGIsD,GAAcxD,GAClB0C,EACA,CAAC,EAAG,IAAK,KACT,WACMO,GAAQ1gC,UACV0gC,GAAQ1gC,QAAQM,MAAMiC,uBAAyBy+B,GAAYlnC,WAAUmnC,GAAYnnC,aAGrF6jC,IAGIuD,GAAgBzD,GACpBuC,EACA,CAAC,EAAG,IAAK,KACT,WACMW,GAAU3gC,UACZ2gC,GAAU3gC,QAAQM,MAAMiC,uBAAyB2+B,GAAcpnC,WAAUqnC,GAAcrnC,aAG3F6jC,IAGIwD,GAAgB1D,GACpBwC,EACA,CAAC,EAAG,IAAK,KACT,WACMU,GAAU3gC,UACZ2gC,GAAU3gC,QAAQM,MAAMiC,uBAAyB2+B,GAAcpnC,WAAUqnC,GAAcrnC,aAG3F6jC,IAGIzE,GAAWD,YAEVC,GACHkI,UAASC,aACPxhC,+BACES,MAAO,CACLghC,WAAY,aACZ/I,cAAe,OACfzK,SAAU,WACVtrB,IAAK,EACL3I,KAAM,EACN0I,UAAW1B,EACT4/B,GAAQ5mC,KAAOqI,EAAerI,KAC9B4mC,GAAQj+B,IAAMN,EAAeM,KAE/B4J,QAASE,EAAO,EAAI,EACpBK,WAAY,oBAEd2rB,UAAU,UAGTqB,EAAMtM,QAAQkR,SACb1+B,+BACED,IAAK8gC,GACLpgC,MAAO,CACL6C,MAAUo9B,QACVh9B,OAAW+8B,QACXxS,SAAU,WACVtrB,IAAK,EACL3I,KAAM,EACN0nC,WAAYnD,YACVtJ,IAAaC,SACb9wB,MAIJ,KAEH01B,EAAMtM,QAAQmR,UACb3+B,+BACED,IAAK+gC,GACLrgC,MAAO,CACLwtB,SAAU,WACVtrB,IAAK,EACL3I,KAAM,IAIRgG,+BACES,MAAO,CACLsN,QAAS,MACT8qB,SAAU,OACV6I,WAAYlD,GAAmBvJ,IAAaC,MAC5Ct0B,MAAO49B,IAAoBvJ,IAAaC,MACxCyM,aAAc,MACd1T,SAAU,WACVvrB,yBAA0Bm9B,QAAeC,UACzC8B,WAAY,WAGbjB,KAGH,MAENtH,IAEF,KC7TN,IAAMwI,GAAc,CAClB7nC,KAAM,CACJ8nC,KAAM,OACNC,SAAU,OACVC,UAAW,QACXC,cAAe,MACfC,eAAgB,SAChBC,SAAS,GAEX1nC,MAAO,CACLqnC,KAAM,QACNC,SAAU,OACVC,UAAW,QACXC,cAAe,MACfC,eAAgB,SAChBC,SAAS,GAEXx/B,IAAK,CACHm/B,KAAM,MACNC,SAAU,MACVC,UAAW,SACXC,cAAe,OACfC,eAAgB,QAChBC,SAAS,GAEX5Q,OAAQ,CACNuQ,KAAM,SACNC,SAAU,MACVC,UAAW,SACXC,cAAe,OACfC,eAAgB,QAChBC,SAAS,IAQN,SAASC,GAAU5U,OAQlB6U,EAAa9H,GAAQ/M,EAAQ6L,SAAU7L,EAAQ/gB,MAC/C61B,EAAa/H,GAAQ/M,EAAQ+U,SAAU/U,EAAQ/gB,MAC/C+1B,EAAcjI,GAAQ/M,EAAQiV,UAAWjV,EAAQ/gB,MAEjDi2B,EAAQ1iC,UAAMy1B,SAAQ,kBACTv+B,MAAMU,QAAQ41B,EAAQsU,MAAQtU,EAAQsU,KAAO,CAACtU,EAAQsU,OACvD3lC,KAAI,SAAAwmC,SACeA,EAASC,MAAM,KAAzCd,cAAMn0B,aAAQ,eACK,CAAC,MAAO,QAAS,SAAU,QAAQ2kB,MAC3D,SAAAj4B,UAAKynC,IAASznC,WAIR,IAAIiP,yBACWw4B,oFAII,CACzB,SACA,QACA,MACA,MACA,QACA,SACA,QACAxP,MAAK,SAAAj4B,UAAKsT,IAAUtT,WAGd,IAAIiP,yBACWqE,0HAIhB,CAACm0B,EAAMn0B,QAGf,CAACk1B,KAAKC,UAAUtV,EAAQsU,QAIrBiB,EAAQV,GAAcG,GAAeF,EAErCU,EAAMhjC,UAAMy1B,SAChB,kBACEsN,GAASvV,EAAQ/gB,KAiCvB,gBACE41B,IAAAA,WACAG,IAAAA,YACAF,IAAAA,WACAI,IAAAA,MACAO,IAAAA,WAQMC,EAAOR,EAAMvmC,KAAI,gBAAE2lC,OAAMn0B,cAqBjC,kBAmCMw1B,EACAC,EAYAC,EA/CJvB,IAAAA,KACAn0B,IAAAA,MACAo0B,IAAAA,SACAC,IAAAA,UACAC,IAAAA,cACAC,IAAAA,eACAC,IAAAA,QACAE,IAAAA,WACAG,IAAAA,YACAF,IAAAA,WAaMgB,EAAcjB,EAAWN,GACzBwB,EAAelB,EAAWL,GAC1BwB,EAAmBnB,EAAWJ,GAC9BwB,EAAoBpB,EAAWH,GAC/BwB,EAAcpB,EAAWP,GAAYM,EAAWN,GAChD4B,EAAerB,EAAWN,GAC1B4B,EAAmBtB,EAAWL,GAC9B4B,EAAoBvB,EAAWJ,GAC/B4B,EAAmBxB,EAAWJ,GAC9B6B,EAAevB,EAAYR,GAC3BgC,EAAoBxB,EAAYN,GAKjCC,GAIHgB,EAAcO,EAAcC,EAC5BP,GAAYG,GAAgBG,EAAcC,IAAiBI,IAJ3DZ,EAAcO,EAAcK,EAC5BX,EAAWpmC,KAAKlC,IAAI4oC,EAAcK,IAMpCZ,EAAcnmC,KAAKjC,IAAIuoC,EAAatmC,KAAKlC,IAAIqoC,EAAaI,IAIzC,SAAbxB,EACY,QAAVp0B,EACFA,EAAQ,QACW,WAAVA,IACTA,EAAQ,OAGI,SAAVA,EACFA,EAAQ,QACW,UAAVA,IACTA,EAAQ,OAIP,CAAC,QAAS,SAAU,OAAOs2B,SAASt2B,KACvCA,EAAQ,UAIR01B,EADY,UAAV11B,EACiBi2B,EACA,QAAVj2B,EACUi2B,EAAmBE,EAAmBE,EAGvDJ,EAAmBC,EAAoB,EAAIG,EAAoB,SAGnEX,EAAmBrmC,KAAKjC,IACtByoC,EACAxmC,KAAKlC,IAAIuoC,EAAkBI,EAAoBO,IAG1C,CACLlC,KAAAA,EACAn0B,MAAAA,EACAo0B,SAAAA,EACAC,UAAAA,EACAC,cAAAA,EACAC,eAAAA,EACAC,QAAAA,EACAE,WAAAA,EACAG,YAAAA,EACAF,WAAAA,EACAc,SAAAA,EACA3iC,cACGshC,GAAWoB,IACXlB,GAAgBoB,MApHnBa,MACKrC,GAAYC,IACfn0B,MAAAA,EACA00B,WAAAA,EACAG,YAAAA,EACAF,WAAAA,WAIAW,SACFC,EAAKxmC,MAAK,SAAChD,EAAGC,UAAMA,EAAEypC,SAAW1pC,EAAE0pC,YAC5BF,EAAK,UAGPA,EAAK5Q,MAAK,SAAA0Q,UAAOA,EAAII,UAAY,MAAMF,EAAK,GA5D3CiB,CAAc,CACZ9B,WAAAA,EACAG,YAAAA,EACAF,WAAAA,EACAI,MAAAA,EACAO,WAAYzV,EAAQyV,aAEtB,OACN,CACEX,EACA9U,EAAQ/gB,KACR+gB,EAAQyV,WACRZ,EACAU,EACAL,EACAF,UAIG,CACLQ,IAAAA,EACAviC,SACEwtB,SAAU,WACVmW,WAAYrB,EAAS,UAAuB,gBAEzCC,SAAAA,EAAKviC,QCzId,IAIM+9B,GAAqB,SAACtJ,UAC1BA,EAAO,uBAAyB,wBAYnB,SAASmP,GACtBvK,UAEO95B,wBAACskC,GAAoBxK,GAG9B,SAASwK,GAAwBxK,aACzByK,EAAYrL,GAAcY,EAAM0K,OAAOxB,MAAOlJ,EAAM0K,OAAOxB,SAE5DlJ,EAAMx3B,oBACF,SAIPR,EAKEg4B,EALFh4B,YACAC,EAIE+3B,EAJF/3B,cACA0iC,EAGE3K,EAHF2K,cACAniC,EAEEw3B,EAFFx3B,aACA+8B,EACEvF,EADFuF,gBAGwBvF,EAAM7E,aAAxBjF,IAAAA,QAASkF,IAAAA,KAEXwP,oBAAc5K,EAAMx3B,qBAANqiC,EAAoBC,gBAAgB,GAGlD7tC,EAAS2tC,EAAY3tC,OAGrB8tC,EAAcH,EAAYI,WAAU,SAAAzqC,UAAKA,IAAMiI,KAEjDlF,EAAQynC,GAAe,EAAIA,EAAcE,EAAwB,EAErE3nC,EAAQJ,KAAKjC,IAAIqC,EAAO,OAEpBmd,EAAMsqB,GAAe,EAAIznC,EApDb,GAoDyCrG,EAEzDwjB,EAAMvd,KAAKlC,IAAIyf,EAAKxjB,GAEpBqG,EAAQJ,KAAKjC,IAAIwf,EAxDD,GAwD0B,OAUtCyqB,EACAC,EATEC,EAA2BR,EAAYvsC,MAAMiF,EAAOmd,GAEpD4qB,EAAc/nC,EAAQ,EAEtBgoC,EAAU7qB,EAAMxjB,EAEhBsuC,SAAgBd,SAAAA,EAAWzC,iBAAQyC,SAAAA,EAAW52B,OAK/Cq3B,IACgB,gBAAfK,EACFL,EAAgB,QACQ,iBAAfK,EACTL,EAAgB,OACQ,eAAfK,EACTL,EAAgB,SACQ,kBAAfK,EACTL,EAAgB,MACQ,gBAAfK,EACTL,EAAgB,aACQ,cAAfK,EACTL,EAAgB,UACQ,eAAfK,EACTL,EAAgB,cACQ,aAAfK,IACTL,EAAgB,iBAIdM,EAAkB9G,GAAmBtJ,UAGzC+P,EADoB,WAAlBD,EACe,CACfriC,IAAK,OACL3I,KAAM,MACN0I,UAAW,2BACX6iC,WA9Fe,EA8Fe,0BAC9BC,YA/Fe,EA+FgB,0BAC/BC,UAAcC,aAAwBJ,GAEb,QAAlBN,EACQ,CACfriC,IAAK,KACL3I,KAAM,MACN0I,UAAW,8BACX6iC,WAvGe,EAuGe,0BAC9BC,YAxGe,EAwGgB,0BAC/BG,aAAiBD,aAAwBJ,GAEhB,UAAlBN,EACQ,CACfriC,IAAK,MACL3I,KAAM,OACN0I,UAAW,2BACX+iC,UAhHe,EAgHc,0BAC7BE,aAjHe,EAiHiB,0BAChCJ,WAAeG,aAAwBJ,GAEd,SAAlBN,EACQ,CACfriC,IAAK,MACL3I,KAAM,KACN0I,UAAW,8BACX+iC,UAzHe,EAyHc,0BAC7BE,aA1He,EA0HiB,0BAChCH,YAAgBE,aAAwBJ,GAEf,aAAlBN,EACQ,CACfriC,IAAK,KACL3I,KAAM,OACN0I,UAAW,4CACX+iC,UAlIe,EAkIc,0BAC7BE,aAnIe,EAmIiB,0BAChCJ,WAAeG,cAA4BJ,GAElB,gBAAlBN,EACQ,CACfriC,IAAK,OACL3I,KAAM,OACN0I,UAAW,2CACX+iC,UA3Ie,EA2Ic,0BAC7BE,aA5Ie,EA4IiB,0BAChCJ,WAAeG,cAA4BJ,GAElB,YAAlBN,EACQ,CACfriC,IAAK,KACL3I,KAAM,KACN0I,UAAW,2CACX+iC,UApJe,EAoJc,0BAC7BE,aArJe,EAqJiB,0BAChCH,YAAgBE,cAA4BJ,GAEnB,eAAlBN,EACQ,CACfriC,IAAK,OACL3I,KAAM,KACN0I,UAAW,4CACX+iC,UA7Je,EA6Jc,0BAC7BE,aA9Je,EA8JiB,0BAChCH,YAAgBE,cAA4BJ,GAG7B,CACf/4B,QAAS,GAKXvM,+BACES,MAAO,CACLwtB,SAAU,WACV4K,SAAU,OACV9qB,QAAS,MACT2zB,WAAYlD,GAAmBtJ,GAC/Bt0B,MAAOs0B,EAAO,QAAU,QACxByM,aAAc,QAGhB3hC,+BACES,SACEwtB,SAAU,WACV3qB,MAAO,EACPI,OAAQ,GACLuhC,KAGPjlC,mCACEA,+BACES,MAAO,CACLmlC,aAAc,MACdC,UAAW,WAGa,WAAzB7V,EAAQ8V,aACP9lC,sCAASsC,EAAayjC,aACK,cAAzB/V,EAAQ8V,aACV9lC,sCACI+B,EAAgC4tB,WAAWK,QAC3C1tB,EAAa2C,iBAIjBjF,sCACI8B,EAA8B6tB,WAAWK,QACzC1tB,EAAasC,gBAKrB5E,iCACES,MAAO,CACLmhC,WAAY,WAGd5hC,qCACGmlC,EACCnlC,8BACES,MAAO,CACL8L,QAAS,KAGXvM,mCACAA,yCACAA,oCAEA,KACHklC,EAAyB/oC,KAAI,SAAC6pC,EAAahvC,OACpCivC,EAASD,IAAgB1jC,EAEzB4jC,EAAqB7G,EAAc/M,MACvC,SAAAj4B,UAAKA,EAAEo0B,KAAOuX,EAAYxX,0BAI1BxuB,8BACEjH,IAAK/B,EACLyJ,MAAO,CACL8L,QAAS05B,EAAS,EAAI,GACtBE,WAAYF,EAAS,YAASjrC,IAGhCgF,8BACES,MAAO,CACL2lC,QAAS,OACTC,WAAY,SACZC,eAAgB,WAGlBtmC,+BAAKsD,MAAM,KAAKI,OAAO,MACrB1D,kCACE0M,GAAG,IACHE,GAAG,IACH5D,EAAE,IACFvI,WACKgkC,EAAcuB,IACjBrlC,OAAQu0B,EAAO,QAAU,QACzBrxB,YAAaoiC,EAAS,EAAI,QAKR,WAAzBjW,EAAQ8V,aACP9lC,wBAACA,UAAMumC,cACLvmC,kCACI8B,EAA8B6tB,WAAWK,QACzCgW,EAAYphC,qBAIhB5E,8BACES,MAAO,CACLolC,UAAW,UAIXK,EACAvW,WAAWK,QAAQgW,EAAY/gC,kBAGV,cAAzB+qB,EAAQ8V,aACV9lC,wBAACA,UAAMumC,cACLvmC,kCAAKgmC,EAAYD,mBACjB/lC,8BACES,MAAO,CACLolC,UAAW,UAGX/jC,EAA8B6tB,WAAWK,QACzCgW,EAAYphC,gBAKlB5E,wBAACA,UAAMumC,cACLvmC,kCAAKgmC,EAAYD,mBACjB/lC,8BACES,MAAO,CACLolC,UAAW,UAIXK,EACAvW,WAAWK,QAAQgW,EAAY/gC,sBAO5CmgC,EACCplC,8BACES,MAAO,CACL8L,QAAS,KAGXvM,mCACAA,yCACAA,oCAEA,eACFsC,EAAasiC,gBAAgB,IAAI7tC,OAAS,EACxC+iC,EAAMuF,cACH9c,QAAO,SAAAloB,UAAKA,EAAEgK,WACdlI,KAAI,SAAC4F,EAAe/K,kBAEjBgJ,8BAAIjH,IAAQgJ,EAAc0sB,OAAMz3B,GAC9BgJ,8BACES,MAAO,CACLg2B,WAAY,QAGdz2B,+BACES,MAAO,CACL6C,MAAO,OACPI,OAAQ,OACR4hC,gBAAiBpQ,EACb,uBACA,uBACJyM,aAAc,WAIpB3hC,8BACES,MAAO,CACLg2B,WAAY,QAGbqD,EAAMuF,cAActoC,OAAS,WAC1BgL,EAAc0sB,eAAcz3B,EAAI,OAChC,eAGNgJ,8BACES,MAAO,CACLg2B,WAAY,QAOZ10B,EAAkC4tB,WAAWrrB,MAC7C1E,WACE0C,EAAasiC,gBAAgB,IAC7B,SAAAvqC,UAAKA,EAAE4K,wBAOrB,+BCvVD,SAASuhC,eAQlB7kC,IANFS,IAAAA,kBACA6yB,IAAAA,WACAnzB,IAAAA,YACAu9B,IAAAA,cACAl9B,IAAAA,oBACAi9B,IAAAA,OAGK98B,EAAgBF,KACjBm9B,EAAqBrG,GAAc52B,IAAgBA,GAEnDP,WACJs9B,EAAc/M,MAAK,SAAAj4B,UAAKA,EAAEo0B,YAAO8Q,SAAAA,EAAoB/Q,uBACrD6Q,EAAc,GAEVhG,EAAWD,OAEiBp5B,UAAM80B,WAAjC2N,OAAWgE,OAEZ7F,EAAUrG,GAAQ6E,EAAOj/B,gBAAWmC,IAAAA,EAAcsB,UAElD2+B,EAAWviC,UAAMy1B,SAAQ,2BACvBiR,iBACJnH,YAAAA,EAAoB37B,gBAApB+iC,EAA6B/R,2BAA2B,SAErD8R,SACI,QAGJ9F,OAECgG,WAAaF,EAAW1sC,QAAQ,EAChC6sC,WAAaH,EAAW/jC,OAAO,EAC/BW,WAAQojC,EAAWpjC,SAAS,EAC5BI,WAASgjC,EAAWhjC,UAAU,EAE9BojC,EAAM,CACV7sC,EAAG4sC,EACH5lC,EAAG2lC,EACHjkC,IAAKkkC,EACL7sC,KAAM4sC,EACNrV,OAAQsV,EAAavjC,EACrB7I,MAAOmsC,EAAaljC,EACpBJ,MAAOA,EACPI,OAAQA,EACRqjC,OAAQ,iBAAO,YAGjBD,EAAIC,OAAS,kBAAMD,GAEZ,CACLlS,sBAAuB,kBACdkS,OAGV,OAACvH,SAAAA,EAAoB37B,QAASg9B,IAE3B4D,EAASpC,GAAU,CACvB31B,OAAQnK,EACR+2B,SAAAA,EACAkJ,SAAAA,EACAE,UAAAA,EACAX,KAAM,CAAC,QAAS,OAAQ,MAAO,YAG3BkF,EAAiB/N,GAAYuL,eACRtL,GAAcsL,IAAUA,EAAOxB,QAAQwB,GAER/jC,QAAlD2jC,eAAe6C,UAEjBC,EAAalnC,UAAMC,OAA8B,MAEjD69B,EAAY18B,OAAOC,YAAM2lC,SAAAA,EAAgBvmC,MAAMzG,MAE/CmtC,EAAiBvJ,GACrBqJ,EAAYjtC,MAAQ,EACpB,CAAC,EAAG,IAAK,KACT,WACMktC,EAAW/mC,UACb+mC,EAAW/mC,QAAQM,MAAMiC,uBAAyBykC,EAAeltC,WAAUmtC,EAAentC,aAG9F6jC,GAGIsJ,EAAiBxJ,GACrBqJ,EAAYtkC,KAAO,EACnB,CAAC,EAAG,IAAK,KACT,WACMukC,EAAW/mC,UACb+mC,EAAW/mC,QAAQM,MAAMiC,uBAAyBykC,EAAeltC,WAAUmtC,EAAentC,aAG9F6jC,GAiBIrxB,EAAOwoB,IAAajF,QAAQvjB,KAE5B83B,EAAYrL,GAAcsL,EAAOxB,MAAOwB,EAAOxB,YAE9Cv2B,GAAQ4sB,EACXkI,UAASC,aACPxhC,+BACED,IAAKmnC,EACLzmC,MAAO,CACLwtB,SAAUgZ,EAAYhZ,SACtB1hB,QAAWjK,EAAe,EAAI,EAC9BwK,WAAY,qBAGd9M,+BACED,IAAK,SAAA4D,UAAM8iC,EAAa9iC,IACxBlD,SACEghC,WAAY,cACgB,gBAAxB8C,SAAAA,EAAWxC,UACX,CACEh0B,QAAS,UAEX,CACEA,QAAS,YAIhBknB,IAAajF,QAAQqX,OAAO,CAC3BpS,WAAAA,EACA3yB,aAAci9B,EACdz9B,YAAAA,EACAu9B,cAAAA,EACAt9B,cAAAA,EACA0iC,cAAe,SAAC5hC,UACdV,EAAoBU,EAAOP,IAC7BkiC,OAAAA,MAINnL,GAEF,KCtMN,MAAMiO,GAAUtqC,KAAKoB,IAAI,GAAI,IACvBmpC,GAAa,IAAI3qC,YAAY,KAEpB,MAAM4qC,eAELC,EAAQ96B,EAAO+6B,GAAa76B,EAAO86B,UACrC5vC,EAAI0vC,EAAO1wC,OACX6wC,EAAS,IAAIvoC,aAAiB,EAAJtH,OAE3B,IAAIf,EAAI,EAAGA,EAAIe,EAAGf,IAAK,OAClBoI,EAAIqoC,EAAOzwC,GACjB4wC,EAAO,EAAI5wC,GAAK2V,EAAKvN,GACrBwoC,EAAO,EAAI5wC,EAAI,GAAK6V,EAAKzN,UAGtB,IAAIooC,GAAWI,GAG1BxvC,YAAYwvC,SACF7vC,EAAI6vC,EAAO7wC,QAAU,KACvBgB,EAAI,GAA0B,iBAAd6vC,EAAO,GAAiB,MAAM,IAAIt+B,MAAM,4CAEvDs+B,OAASA,QAGRC,EAAe7qC,KAAKjC,IAAI,EAAIhD,EAAI,EAAG,QACpC+vC,WAAa,IAAIlrC,YAA2B,EAAfirC,QAC7BE,WAAa,IAAIC,WAA0B,EAAfH,QAG5BI,UAAYjrC,KAAK0C,KAAK1C,KAAKC,KAAKlF,SAChCmwC,UAAY,IAAItrC,YAAY7E,QAC5BowC,UAAY,IAAIvrC,YAAY7E,QAC5BqwC,SAAW,IAAIxrC,YAAY7E,QAC3BswC,UAAY,IAAIL,WAAWvuC,KAAKwuC,WAAWpnC,MAAM,QAGjDynC,KAAO,IAAI1rC,YAAY7E,QACvBwwC,OAAS,IAAIlpC,aAAatH,QAE1BywC,SAGTA,eACUZ,OAACA,EAAQM,UAAWO,EAAUN,UAAWO,EAAUN,SAAUO,EAASN,UAAWO,GAAanvC,KAC9F1B,EAAI6vC,EAAO7wC,QAAU,MAGvB8xC,EAAOxoB,EAAAA,EACPyoB,EAAOzoB,EAAAA,EACP0oB,GAAQ1oB,EAAAA,EACR2oB,GAAQ3oB,EAAAA,MAEP,IAAIrpB,EAAI,EAAGA,EAAIe,EAAGf,IAAK,OAClBiD,EAAI2tC,EAAO,EAAI5wC,GACfiK,EAAI2mC,EAAO,EAAI5wC,EAAI,GACrBiD,EAAI4uC,IAAMA,EAAO5uC,GACjBgH,EAAI6nC,IAAMA,EAAO7nC,GACjBhH,EAAI8uC,IAAMA,EAAO9uC,GACjBgH,EAAI+nC,IAAMA,EAAO/nC,QAChBqnC,KAAKtxC,GAAKA,QAEb0V,GAAMm8B,EAAOE,GAAQ,EACrBn8B,GAAMk8B,EAAOE,GAAQ,MAGvBzpC,EAAI2gB,EAAI+oB,EADRC,EAAU7oB,EAAAA,MAIT,IAAIrpB,EAAI,EAAGA,EAAIe,EAAGf,IAAK,OAClBqD,EAAI8uC,GAAKz8B,EAAIE,EAAIg7B,EAAO,EAAI5wC,GAAI4wC,EAAO,EAAI5wC,EAAI,IACjDqD,EAAI6uC,IACJ3pC,EAAKvI,EACLkyC,EAAU7uC,SAGZ+uC,EAAMxB,EAAO,EAAIroC,GACjB8pC,EAAMzB,EAAO,EAAIroC,EAAK,GAE5B2pC,EAAU7oB,EAAAA,MAGL,IAAIrpB,EAAI,EAAGA,EAAIe,EAAGf,IAAK,IACpBA,IAAMuI,EAAI,eACRlF,EAAI8uC,GAAKC,EAAKC,EAAKzB,EAAO,EAAI5wC,GAAI4wC,EAAO,EAAI5wC,EAAI,IACnDqD,EAAI6uC,GAAW7uC,EAAI,IACnB6lB,EAAKlpB,EACLkyC,EAAU7uC,OAGdivC,EAAM1B,EAAO,EAAI1nB,GACjBqpB,EAAM3B,EAAO,EAAI1nB,EAAK,GAEtBspB,EAAYnpB,EAAAA,MAGX,IAAIrpB,EAAI,EAAGA,EAAIe,EAAGf,IAAK,IACpBA,IAAMuI,GAAMvI,IAAMkpB,EAAI,eACpBlX,EAAIygC,GAAaL,EAAKC,EAAKC,EAAKC,EAAK3B,EAAO,EAAI5wC,GAAI4wC,EAAO,EAAI5wC,EAAI,IACrEgS,EAAIwgC,IACJP,EAAKjyC,EACLwyC,EAAYxgC,OAGhB0gC,EAAM9B,EAAO,EAAIqB,GACjBU,EAAM/B,EAAO,EAAIqB,EAAK,MAEtBO,IAAcnpB,EAAAA,EAAU,KAGnB,IAAIrpB,EAAI,EAAGA,EAAIe,EAAGf,SACduxC,OAAOvxC,GAAM4wC,EAAO,EAAI5wC,GAAK4wC,EAAO,IAAQA,EAAO,EAAI5wC,EAAI,GAAK4wC,EAAO,GAEhFgC,GAAUnwC,KAAK6uC,KAAM7uC,KAAK8uC,OAAQ,EAAGxwC,EAAI,SACnC8xC,EAAO,IAAIjtC,YAAY7E,OACzB8E,EAAI,MACH,IAAI7F,EAAI,EAAGslB,GAAM+D,EAAAA,EAAUrpB,EAAIe,EAAGf,IAAK,OAClCy3B,EAAKh1B,KAAK6uC,KAAKtxC,GACjByC,KAAK8uC,OAAO9Z,GAAMnS,IAClButB,EAAKhtC,KAAO4xB,EACZnS,EAAK7iB,KAAK8uC,OAAO9Z,gBAGpBob,KAAOA,EAAKpqC,SAAS,EAAG5C,QACxBitC,UAAY,IAAIltC,YAAY,aAC5BmtC,UAAY,IAAIntC,YAAY,OAKjCotC,GAAOZ,EAAKC,EAAKC,EAAKC,EAAKG,EAAKC,GAAM,OAChC3yC,EAAIkpB,EACJjmB,EAAIqvC,EACJroC,EAAIsoC,EACVrpB,EAAK+oB,EACLK,EAAMI,EACNH,EAAMI,EACNV,EAAKjyC,EACL0yC,EAAMzvC,EACN0vC,EAAM1oC,QAGJzG,EA6Rd,SAAsByvC,EAAIC,EAAIC,EAAIC,EAAI19B,EAAIE,SAChCpE,EAAK2hC,EAAKF,EACV1/B,EAAK6/B,EAAKF,EACVG,EAAK39B,EAAKu9B,EACVK,EAAK19B,EAAKs9B,EAEVK,EAAK/hC,EAAKA,EAAK+B,EAAKA,EACpBigC,EAAKH,EAAKA,EAAKC,EAAKA,EACpBjwC,EAAI,IAAOmO,EAAK8hC,EAAK//B,EAAK8/B,SAKzB,CAACpwC,EAHEgwC,GAAMK,EAAKC,EAAKhgC,EAAKigC,GAAMnwC,EAG1B4G,EAFDipC,GAAM1hC,EAAKgiC,EAAKH,EAAKE,GAAMlwC,GAxSlBowC,CAAarB,EAAKC,EAAKC,EAAKC,EAAKG,EAAKC,QAChDe,IAAMlwC,EAAOP,OACb0wC,IAAMnwC,EAAOyG,MAEb,IAAIjK,EAAI,EAAGA,EAAIe,EAAGf,SACduxC,OAAOvxC,GAAKmyC,GAAKvB,EAAO,EAAI5wC,GAAI4wC,EAAO,EAAI5wC,EAAI,GAAIwD,EAAOP,EAAGO,EAAOyG,GAI7E2oC,GAAUnwC,KAAK6uC,KAAM7uC,KAAK8uC,OAAQ,EAAGxwC,EAAI,QAGpC6yC,WAAarrC,MACdsrC,EAAW,EAEfnC,EAASnpC,GAAMkpC,EAASQ,GAAM/oB,EAC9BwoB,EAASxoB,GAAMuoB,EAASlpC,GAAM0pC,EAC9BP,EAASO,GAAMR,EAASvoB,GAAM3gB,EAE9BopC,EAAQppC,GAAM,EACdopC,EAAQzoB,GAAM,EACdyoB,EAAQM,GAAM,EAEdL,EAAS/nC,MAAM,GACf+nC,EAASnvC,KAAKqxC,SAAS1B,EAAKC,IAAQ9pC,EACpCqpC,EAASnvC,KAAKqxC,SAASxB,EAAKC,IAAQrpB,EACpC0oB,EAASnvC,KAAKqxC,SAASpB,EAAKC,IAAQV,OAE/B8B,aAAe,OACfC,aAAazrC,EAAI2gB,EAAI+oB,GAAK,GAAI,GAAI,OAElC,IAAWgC,EAAIC,EAAXvsC,EAAI,EAAWA,EAAIlF,KAAK6uC,KAAKvxC,OAAQ4H,IAAK,OACzC3H,EAAIyC,KAAK6uC,KAAK3pC,GACd1E,EAAI2tC,EAAO,EAAI5wC,GACfiK,EAAI2mC,EAAO,EAAI5wC,EAAI,MAGrB2H,EAAI,GAAK3B,KAAKuB,IAAItE,EAAIgxC,IAAO3D,IAAWtqC,KAAKuB,IAAI0C,EAAIiqC,IAAO5D,GAAS,YACzE2D,EAAKhxC,EACLixC,EAAKjqC,EAGDjK,IAAMuI,GAAMvI,IAAMkpB,GAAMlpB,IAAMiyC,EAAI,aAGlC7rC,EAAQ,MACP,IAAIP,EAAI,EAAG9D,EAAMU,KAAKqxC,SAAS7wC,EAAGgH,GAAIpE,EAAIpD,KAAKwuC,YAChD7qC,EAAQwrC,GAAU7vC,EAAM8D,GAAKpD,KAAKwuC,YACnB,IAAX7qC,GAAgBA,IAAUsrC,EAAStrC,IAFoBP,KAK/DO,EAAQqrC,EAASrrC,OACFie,EAAXiF,EAAIljB,OACDie,EAAIqtB,EAASpoB,IAAK0pB,GAAO/vC,EAAGgH,EAAG2mC,EAAO,EAAItnB,GAAIsnB,EAAO,EAAItnB,EAAI,GAAIsnB,EAAO,EAAIvsB,GAAIusB,EAAO,EAAIvsB,EAAI,QAClGiF,EAAIjF,EACAiF,IAAMljB,EAAO,CACbkjB,GAAK,YAIF,IAAPA,EAAU,aAGVrhB,EAAIxF,KAAKuxC,aAAa1qB,EAAGtpB,EAAG0xC,EAASpoB,IAAK,GAAI,EAAGqoB,EAAQroB,IAG7DqoB,EAAQ3xC,GAAKyC,KAAK0xC,UAAUlsC,EAAI,GAChC0pC,EAAQroB,GAAKrhB,EACb4rC,QAGI9yC,EAAI2wC,EAASpoB,QACVjF,EAAIqtB,EAAS3wC,GAAIiyC,GAAO/vC,EAAGgH,EAAG2mC,EAAO,EAAI7vC,GAAI6vC,EAAO,EAAI7vC,EAAI,GAAI6vC,EAAO,EAAIvsB,GAAIusB,EAAO,EAAIvsB,EAAI,KACjGpc,EAAIxF,KAAKuxC,aAAajzC,EAAGf,EAAGqkB,EAAGstB,EAAQ3xC,IAAK,EAAG2xC,EAAQ5wC,IACvD4wC,EAAQ3xC,GAAKyC,KAAK0xC,UAAUlsC,EAAI,GAChCypC,EAAS3wC,GAAKA,EACd8yC,IACA9yC,EAAIsjB,KAIJiF,IAAMljB,OACCie,EAAIotB,EAASnoB,GAAI0pB,GAAO/vC,EAAGgH,EAAG2mC,EAAO,EAAIvsB,GAAIusB,EAAO,EAAIvsB,EAAI,GAAIusB,EAAO,EAAItnB,GAAIsnB,EAAO,EAAItnB,EAAI,KACjGrhB,EAAIxF,KAAKuxC,aAAa3vB,EAAGrkB,EAAGspB,GAAI,EAAGqoB,EAAQroB,GAAIqoB,EAAQttB,SAClD8vB,UAAUlsC,EAAI,GACnB0pC,EAAQttB,GAAKpc,EACbypC,EAASpoB,GAAKA,EACduqB,IACAvqB,EAAIjF,OAKPuvB,WAAanC,EAASzxC,GAAKspB,EAChCooB,EAASpoB,GAAKmoB,EAAS1wC,GAAKf,EAC5B0xC,EAAS1xC,GAAKe,EAGd6wC,EAASnvC,KAAKqxC,SAAS7wC,EAAGgH,IAAMjK,EAChC4xC,EAASnvC,KAAKqxC,SAASlD,EAAO,EAAItnB,GAAIsnB,EAAO,EAAItnB,EAAI,KAAOA,OAG3DupB,KAAO,IAAIjtC,YAAYiuC,OACvB,IAAI7zC,EAAI,EAAGspB,EAAI7mB,KAAKmxC,WAAY5zC,EAAI6zC,EAAU7zC,SAC1C6yC,KAAK7yC,GAAKspB,EACfA,EAAIooB,EAASpoB,QAIZwpB,UAAYrwC,KAAKquC,WAAWroC,SAAS,EAAGhG,KAAKsxC,mBAC7ChB,UAAYtwC,KAAKsuC,WAAWtoC,SAAS,EAAGhG,KAAKsxC,cAGtDD,SAAS7wC,EAAGgH,UACDjE,KAAKgB,MAgHpB,SAAqBwK,EAAI+B,SACfnL,EAAIoJ,GAAMxL,KAAKuB,IAAIiK,GAAMxL,KAAKuB,IAAIgM,WAChCA,EAAK,EAAI,EAAInL,EAAI,EAAIA,GAAK,EAlHZgsC,CAAYnxC,EAAIR,KAAKixC,IAAKzpC,EAAIxH,KAAKkxC,KAAOlxC,KAAKwuC,WAAaxuC,KAAKwuC,UAGvFkD,UAAUzxC,SACCouC,WAAYgC,EAAW/B,WAAYgC,EAApCnC,OAA+CA,GAAUnuC,SAE3DzC,EAAI,EACJq0C,EAAK,SAGI,OACH1xC,EAAIowC,EAAUrwC,GAiBdyQ,EAAKzQ,EAAIA,EAAI,KACnB2xC,EAAKlhC,GAAMzQ,EAAI,GAAK,GAET,IAAPC,EAAU,IACA,IAAN3C,EAAS,MACb0C,EAAI6tC,KAAavwC,kBAIfs0C,EAAK3xC,EAAIA,EAAI,EACb4xC,EAAKphC,GAAMzQ,EAAI,GAAK,EACpB6wC,EAAKe,GAAM3xC,EAAI,GAAK,EAEpB6xC,EAAK1B,EAAUuB,GACfI,EAAK3B,EAAUpwC,GACfgyC,EAAK5B,EAAUyB,GACfI,EAAK7B,EAAUS,MAELqB,GACZhE,EAAO,EAAI4D,GAAK5D,EAAO,EAAI4D,EAAK,GAChC5D,EAAO,EAAI6D,GAAK7D,EAAO,EAAI6D,EAAK,GAChC7D,EAAO,EAAI8D,GAAK9D,EAAO,EAAI8D,EAAK,GAChC9D,EAAO,EAAI+D,GAAK/D,EAAO,EAAI+D,EAAK,IAEvB,CACT7B,EAAUpwC,GAAKiyC,EACf7B,EAAUnwC,GAAK6xC,QAETK,EAAM9B,EAAUQ,OAGT,IAATsB,EAAY,KACRvrB,EAAI7mB,KAAKmxC,aACV,IACKnxC,KAAK2uC,SAAS9nB,KAAOiqB,EAAI,MACpBnC,SAAS9nB,GAAK5mB,QAGvB4mB,EAAI7mB,KAAKyuC,UAAU5nB,SACdA,IAAM7mB,KAAKmxC,iBAEnBkB,MAAMpyC,EAAGmyC,QACTC,MAAMnyC,EAAGowC,EAAUsB,SACnBS,MAAMT,EAAId,SAETwB,EAAKT,GAAM3xC,EAAI,GAAK,EAGtB3C,EAAIuwC,GAAWxwC,SACfwwC,GAAWvwC,KAAO+0C,OAEnB,IACO,IAAN/0C,EAAS,MACb0C,EAAI6tC,KAAavwC,WAIlBq0C,EAGXS,MAAMpyC,EAAGC,QACAouC,WAAWruC,GAAKC,GACV,IAAPA,IAAUF,KAAKsuC,WAAWpuC,GAAKD,GAIvCsxC,aAAazrC,EAAI2gB,EAAI+oB,EAAIvvC,EAAGC,EAAGmD,SACrBmC,EAAIxF,KAAKsxC,yBAEVjD,WAAW7oC,GAAKM,OAChBuoC,WAAW7oC,EAAI,GAAKihB,OACpB4nB,WAAW7oC,EAAI,GAAKgqC,OAEpB6C,MAAM7sC,EAAGvF,QACToyC,MAAM7sC,EAAI,EAAGtF,QACbmyC,MAAM7sC,EAAI,EAAGnC,QAEbiuC,cAAgB,EAEd9rC,GAUf,SAASkqC,GAAKc,EAAIC,EAAIC,EAAIC,SAChB5hC,EAAKyhC,EAAKE,EACV5/B,EAAK2/B,EAAKE,SACT5hC,EAAKA,EAAK+B,EAAKA,EAI1B,SAASyhC,GAAah/B,EAAIi/B,EAAIC,EAAIC,EAAIC,EAAIC,SAChCxiC,GAAKsiC,EAAKF,IAAOG,EAAKp/B,GACtBhE,GAAKkjC,EAAKl/B,IAAOq/B,EAAKJ,UACrBjvC,KAAKuB,IAAIsL,EAAIb,IAAM,sBAAyBhM,KAAKuB,IAAIsL,EAAIb,GAAKa,EAAIb,EAAI,EAIjF,SAASghC,GAAOkC,EAAIC,EAAIC,EAAIC,EAAIr/B,EAAIi/B,UACnBD,GAAah/B,EAAIi/B,EAAIC,EAAIC,EAAIC,EAAIC,IAC9CL,GAAaE,EAAIC,EAAIC,EAAIC,EAAIr/B,EAAIi/B,IACjCD,GAAaI,EAAIC,EAAIr/B,EAAIi/B,EAAIC,EAAIC,IACnB,EAGlB,SAASP,GAAS3B,EAAIC,EAAIC,EAAIC,EAAI19B,EAAIE,EAAII,EAAIi/B,SACpCzjC,EAAKyhC,EAAKj9B,EACVzC,EAAK2/B,EAAK+B,EACV5B,EAAKF,EAAKn9B,EACVs9B,EAAKF,EAAK6B,EACVK,EAAK5/B,EAAKM,EACVu/B,EAAK3/B,EAAKq/B,EAGVO,EAAKnC,EAAKA,EAAKC,EAAKA,EACpBmC,EAAKH,EAAKA,EAAKC,EAAKA,SAEnB/jC,GAAM8hC,EAAKmC,EAAKD,EAAKD,GACrBhiC,GAAM8/B,EAAKoC,EAAKD,EAAKF,IALjB9jC,EAAKA,EAAK+B,EAAKA,IAMb8/B,EAAKkC,EAAKjC,EAAKgC,GAAM,EAGtC,SAAS7C,GAAaQ,EAAIC,EAAIC,EAAIC,EAAI19B,EAAIE,SAChCpE,EAAK2hC,EAAKF,EACV1/B,EAAK6/B,EAAKF,EACVG,EAAK39B,EAAKu9B,EACVK,EAAK19B,EAAKs9B,EAEVK,EAAK/hC,EAAKA,EAAK+B,EAAKA,EACpBigC,EAAKH,EAAKA,EAAKC,EAAKA,EACpBjwC,EAAI,IAAOmO,EAAK8hC,EAAK//B,EAAK8/B,GAE1BpwC,GAAKqwC,EAAKC,EAAKhgC,EAAKigC,GAAMnwC,EAC1B4G,GAAKuH,EAAKgiC,EAAKH,EAAKE,GAAMlwC,SAEzBJ,EAAIA,EAAIgH,EAAIA,EAmBvB,SAAS2oC,GAAU8C,EAAKC,EAAO3yC,EAAMS,MAC7BA,EAAQT,GAAQ,OACX,IAAIhD,EAAIgD,EAAO,EAAGhD,GAAKyD,EAAOzD,IAAK,OAC9B41C,EAAOF,EAAI11C,GACX61C,EAAWF,EAAMC,OACnB/vC,EAAI7F,EAAI,OACL6F,GAAK7C,GAAQ2yC,EAAMD,EAAI7vC,IAAMgwC,GAAUH,EAAI7vC,EAAI,GAAK6vC,EAAI7vC,KAC/D6vC,EAAI7vC,EAAI,GAAK+vC,MAEd,KAEC51C,EAAIgD,EAAO,EACX6C,EAAIpC,EACRyE,GAAKwtC,EAHW1yC,EAAOS,GAAU,EAGfzD,GACd21C,EAAMD,EAAI1yC,IAAS2yC,EAAMD,EAAIjyC,KAASyE,GAAKwtC,EAAK1yC,EAAMS,GACtDkyC,EAAMD,EAAI11C,IAAM21C,EAAMD,EAAIjyC,KAASyE,GAAKwtC,EAAK11C,EAAGyD,GAChDkyC,EAAMD,EAAI1yC,IAAS2yC,EAAMD,EAAI11C,KAAKkI,GAAKwtC,EAAK1yC,EAAMhD,SAEhD41C,EAAOF,EAAI11C,GACX61C,EAAWF,EAAMC,UACV,IACN51C,UAAY21C,EAAMD,EAAI11C,IAAM61C,MAC5BhwC,UAAY8vC,EAAMD,EAAI7vC,IAAMgwC,MAC3BhwC,EAAI7F,EAAG,MACXkI,GAAKwtC,EAAK11C,EAAG6F,GAEjB6vC,EAAI1yC,EAAO,GAAK0yC,EAAI7vC,GACpB6vC,EAAI7vC,GAAK+vC,EAELnyC,EAAQzD,EAAI,GAAK6F,EAAI7C,GACrB4vC,GAAU8C,EAAKC,EAAO31C,EAAGyD,GACzBmvC,GAAU8C,EAAKC,EAAO3yC,EAAM6C,EAAI,KAEhC+sC,GAAU8C,EAAKC,EAAO3yC,EAAM6C,EAAI,GAChC+sC,GAAU8C,EAAKC,EAAO31C,EAAGyD,KAKrC,SAASyE,GAAKrI,EAAKG,EAAG6F,SACZiwC,EAAMj2C,EAAIG,GAChBH,EAAIG,GAAKH,EAAIgG,GACbhG,EAAIgG,GAAKiwC,EAGb,SAASpF,GAAYtoC,UACVA,EAAE,GAEb,SAASuoC,GAAYvoC,UACVA,EAAE,GC7eb,MAAMsG,GAAU,KAED,MAAME,GACnBxN,mBACOyN,IAAMpM,KAAKqM,SACXC,IAAMtM,KAAKuM,IAAM,UACjBC,EAAI,GAEX0C,OAAO1O,EAAGgH,QACHgF,GAAM,IAAGxM,KAAKoM,IAAMpM,KAAKsM,KAAO9L,KAAKR,KAAKqM,IAAMrM,KAAKuM,KAAO/E,IAEnE2H,YACmB,OAAbnP,KAAKsM,WACFA,IAAMtM,KAAKoM,IAAKpM,KAAKuM,IAAMvM,KAAKqM,SAChCG,GAAK,KAGd4C,OAAO5O,EAAGgH,QACHgF,GAAM,IAAGxM,KAAKsM,KAAO9L,KAAKR,KAAKuM,KAAO/E,IAE7CiJ,IAAIjQ,EAAGgH,EAAG+H,SAEFZ,GADNnO,GAAKA,IAAW+O,GAAKA,GAEfX,EAFEpH,GAAKA,KAGT+H,EAAI,EAAG,MAAM,IAAIM,MAAM,mBACV,OAAb7P,KAAKsM,IAActM,KAAKwM,GAAM,IAAGmC,KAAMC,KAClCrL,KAAKuB,IAAI9E,KAAKsM,IAAMqC,GAAM1C,IAAW1I,KAAKuB,IAAI9E,KAAKuM,IAAMqC,GAAM3C,MAASjM,KAAKwM,GAAK,IAAMmC,EAAK,IAAMC,GACvGW,SACA/C,GAAM,IAAG+C,KAAKA,WAAW/O,EAAI+O,KAAK/H,KAAK+H,KAAKA,WAAWvP,KAAKsM,IAAMqC,KAAM3O,KAAKuM,IAAMqC,KAE1FsC,KAAK1Q,EAAGgH,EAAG2J,EAAG3C,QACPhC,GAAM,IAAGxM,KAAKoM,IAAMpM,KAAKsM,KAAO9L,KAAKR,KAAKqM,IAAMrM,KAAKuM,KAAO/E,MAAM2J,MAAM3C,MAAM2C,KAErFlS,eACSe,KAAKwM,GAAK,MClCN,MAAM8mC,GACnB30C,mBACO6N,EAAI,GAEX0C,OAAO1O,EAAGgH,QACHgF,EAAE1J,KAAK,CAACtC,EAAGgH,IAElB2H,iBACO3C,EAAE1J,KAAK9C,KAAKwM,EAAE,GAAG9N,SAExB0Q,OAAO5O,EAAGgH,QACHgF,EAAE1J,KAAK,CAACtC,EAAGgH,IAElBvI,eACSe,KAAKwM,EAAElP,OAAS0C,KAAKwM,EAAI,MCXrB,MAAM+mC,GACnB50C,YAAY60C,GAAWC,EAAMC,EAAMC,EAAMC,GAAQ,CAAC,EAAG,EAAG,IAAK,YACpDD,GAAQA,KAAUF,GAAQA,KAAaG,GAAQA,KAAUF,GAAQA,IAAQ,MAAM,IAAI7jC,MAAM,uBAC3F2jC,SAAWA,OACXK,eAAiB,IAAIjuC,aAAsC,EAAzB4tC,EAASxF,OAAO1wC,aAClDw2C,QAAU,IAAIluC,aAAsC,EAAzB4tC,EAASxF,OAAO1wC,aAC3Cq2C,KAAOA,EAAM3zC,KAAKyzC,KAAOA,OACzBG,KAAOA,EAAM5zC,KAAK0zC,KAAOA,OACzBK,QAEPhF,qBACOyE,SAASzE,cACTgF,QACE/zC,KAET+zC,cACSP,UAAUxF,OAACA,EAADoC,KAASA,EAATC,UAAeA,GAA1ByD,QAAsCA,GAAW9zC,KAGjDg0C,EAAgBh0C,KAAKg0C,cAAgBh0C,KAAK6zC,eAAe7tC,SAAS,EAAGqqC,EAAU/yC,OAAS,EAAI,OAC7F,IAAwCkD,EAAGgH,EAAvCjK,EAAI,EAAG6F,EAAI,EAAG9E,EAAI+xC,EAAU/yC,OAAcC,EAAIe,EAAGf,GAAK,EAAG6F,GAAK,EAAG,OAClEsL,EAAoB,EAAf2hC,EAAU9yC,GACf02C,EAAwB,EAAnB5D,EAAU9yC,EAAI,GACnB22C,EAAwB,EAAnB7D,EAAU9yC,EAAI,GACnBsR,EAAKm/B,EAAOt/B,GACZI,EAAKk/B,EAAOt/B,EAAK,GACjBP,EAAK6/B,EAAOiG,GACZ7lC,EAAK4/B,EAAOiG,EAAK,GACjBE,EAAKnG,EAAOkG,GACZE,EAAKpG,EAAOkG,EAAK,GAEjBnlC,EAAKZ,EAAKU,EACViC,EAAK1C,EAAKU,EACV8hC,EAAKuD,EAAKtlC,EACVgiC,EAAKuD,EAAKtlC,EACVgiC,EAAK/hC,EAAKA,EAAK+B,EAAKA,EACpBigC,EAAKH,EAAKA,EAAKC,EAAKA,EACpBwD,EAA2B,GAArBtlC,EAAK8hC,EAAK//B,EAAK8/B,MAEtByD,EAKA,GAAI9wC,KAAKuB,IAAIuvC,GAAM,KAEtB7zC,GAAKqO,EAAKslC,GAAM,EAChB3sC,GAAKsH,EAAKslC,GAAM,MACX,OACCxzC,EAAI,EAAIyzC,EACd7zC,EAAIqO,GAAMgiC,EAAKC,EAAKhgC,EAAKigC,GAAMnwC,EAC/B4G,EAAIsH,GAAMC,EAAKgiC,EAAKH,EAAKE,GAAMlwC,OAV/BJ,GAAKqO,EAAKslC,GAAM,EAAI,IAAMtD,EAC1BrpC,GAAKsH,EAAKslC,GAAM,EAAI,IAAMxD,EAW5BoD,EAAc5wC,GAAK5C,EACnBwzC,EAAc5wC,EAAI,GAAKoE,MAKrBuqC,EACApjC,EACAC,EAHAJ,EAAI4hC,EAAKA,EAAK9yC,OAAS,GACnB40C,EAAS,EAAJ1jC,EACLK,EAAKm/B,EAAO,EAAIx/B,GAChBM,EAAKk/B,EAAO,EAAIx/B,EAAI,GAC5BslC,EAAQ1sC,KAAK,OACR,IAAI7J,EAAI,EAAGA,EAAI6yC,EAAK9yC,SAAUC,EACjCiR,EAAI4hC,EAAK7yC,GACTw0C,EAAKG,EAAIvjC,EAAKE,EAAID,EAAKE,EACvBojC,EAAS,EAAJ1jC,EAAOK,EAAKm/B,EAAO,EAAIx/B,GAAIM,EAAKk/B,EAAO,EAAIx/B,EAAI,GACpDslC,EAAQ/B,EAAK,GAAK+B,EAAQ5B,GAAMtjC,EAAKE,EACrCglC,EAAQ/B,EAAK,GAAK+B,EAAQ5B,EAAK,GAAKrjC,EAAKF,EAG7Ci/B,OAAOjhC,SACCS,EAAoB,MAAXT,EAAkBA,EAAU,IAAIR,QAAO5K,GAC/CiyC,UAAUlD,UAACA,EAADgE,QAAYA,EAAZlE,KAAqBA,GAAhC4D,cAAuCA,EAAvCF,QAAsDA,GAAW9zC,QACnEowC,EAAK9yC,QAAU,EAAG,OAAO,SACxB,IAAIC,EAAI,EAAGe,EAAIgyC,EAAUhzC,OAAQC,EAAIe,IAAKf,EAAG,OAC1C6F,EAAIktC,EAAU/yC,MAChB6F,EAAI7F,EAAG,eACLg3C,EAAyB,EAApBhxC,KAAKgB,MAAMhH,EAAI,GACpBi3C,EAAyB,EAApBjxC,KAAKgB,MAAMnB,EAAI,GACpBqxC,EAAKT,EAAcO,GACnBG,EAAKV,EAAcO,EAAK,GACxBI,EAAKX,EAAcQ,GACnBI,EAAKZ,EAAcQ,EAAK,QACzBK,eAAeJ,EAAIC,EAAIC,EAAIC,EAAIjoC,OAElC0B,EAAIC,EAAK8hC,EAAKA,EAAK9yC,OAAS,OAC3B,IAAIC,EAAI,EAAGA,EAAI6yC,EAAK9yC,SAAUC,EAAG,CACpC8Q,EAAKC,EAAIA,EAAK8hC,EAAK7yC,SACbiI,EAAkC,EAA9BjC,KAAKgB,MAAM+vC,EAAQhmC,GAAM,GAC7B9N,EAAIwzC,EAAcxuC,GAClBgC,EAAIwsC,EAAcxuC,EAAI,GACtB8iB,EAAS,EAALja,EACJ1I,EAAI3F,KAAK80C,SAASt0C,EAAGgH,EAAGssC,EAAQxrB,EAAI,GAAIwrB,EAAQxrB,EAAI,IACtD3iB,GAAG3F,KAAK60C,eAAer0C,EAAGgH,EAAG7B,EAAE,GAAIA,EAAE,GAAIgH,UAExCS,GAAUA,EAAOnO,QAE1B81C,aAAapoC,SACLS,EAAoB,MAAXT,EAAkBA,EAAU,IAAIR,QAAO5K,SACtDoL,EAAQuE,KAAKlR,KAAKyzC,KAAMzzC,KAAK0zC,KAAM1zC,KAAK2zC,KAAO3zC,KAAKyzC,KAAMzzC,KAAK4zC,KAAO5zC,KAAK0zC,MACpEtmC,GAAUA,EAAOnO,QAE1B+1C,WAAWz3C,EAAGoP,SACNS,EAAoB,MAAXT,EAAkBA,EAAU,IAAIR,QAAO5K,EAChDysC,EAAShuC,KAAKi1C,MAAM13C,MACX,OAAXywC,IAAoBA,EAAO1wC,OAAQ,OACvCqP,EAAQuC,OAAO8+B,EAAO,GAAIA,EAAO,QAC7B1vC,EAAI0vC,EAAO1wC,YACR0wC,EAAO,KAAOA,EAAO1vC,EAAE,IAAM0vC,EAAO,KAAOA,EAAO1vC,EAAE,IAAMA,EAAI,GAAGA,GAAK,MACxE,IAAIf,EAAI,EAAGA,EAAIe,EAAGf,GAAK,EACtBywC,EAAOzwC,KAAOywC,EAAOzwC,EAAE,IAAMywC,EAAOzwC,EAAE,KAAOywC,EAAOzwC,EAAE,IACxDoP,EAAQyC,OAAO4+B,EAAOzwC,GAAIywC,EAAOzwC,EAAI,WAEzCoP,EAAQwC,YACD/B,GAAUA,EAAOnO,8BAGjBu0C,UAAUxF,OAACA,IAAWhuC,SACxB,IAAIzC,EAAI,EAAGe,EAAI0vC,EAAO1wC,OAAS,EAAGC,EAAIe,IAAKf,EAAG,OAC3C23C,EAAOl1C,KAAKm1C,YAAY53C,GAC1B23C,IAAMA,EAAK1zC,MAAQjE,QAAS23C,IAGpCC,YAAY53C,SACJ63C,EAAU,IAAI9B,eACf0B,WAAWz3C,EAAG63C,GACZA,EAAQn2C,QAEjB41C,eAAelmC,EAAIC,EAAIC,EAAIC,EAAInC,OACzBqgB,QACEqoB,EAAKr1C,KAAKs1C,YAAY3mC,EAAIC,GAC1Bo1B,EAAKhkC,KAAKs1C,YAAYzmC,EAAIC,GACrB,IAAPumC,GAAmB,IAAPrR,GACdr3B,EAAQuC,OAAOP,EAAIC,GACnBjC,EAAQyC,OAAOP,EAAIC,KACVke,EAAIhtB,KAAKu1C,aAAa5mC,EAAIC,EAAIC,EAAIC,EAAIumC,EAAIrR,MACnDr3B,EAAQuC,OAAO8d,EAAE,GAAIA,EAAE,IACvBrgB,EAAQyC,OAAO4d,EAAE,GAAIA,EAAE,KAG3BwoB,SAASj4C,EAAGiD,EAAGgH,UACRhH,GAAKA,IAASA,IAAOgH,GAAKA,IAASA,GACjCxH,KAAKwzC,SAASiC,MAAMl4C,EAAGiD,EAAGgH,KAAOjK,aAE/BA,SACHm4C,EAAK11C,KAAKi1C,MAAM13C,MAClBm4C,EAAI,IAAK,MAAMtyC,KAAKpD,KAAKwzC,SAASmC,UAAUp4C,GAAI,OAC5Cq4C,EAAK51C,KAAKi1C,MAAM7xC,MAElBwyC,EAAIC,EAAM,IAAK,IAAIC,EAAK,EAAGC,EAAKL,EAAGp4C,OAAQw4C,EAAKC,EAAID,GAAM,MACvD,IAAIE,EAAK,EAAGC,EAAKL,EAAGt4C,OAAQ04C,EAAKC,EAAID,GAAM,KAC1CN,EAAGI,IAAOF,EAAGI,IACdN,EAAGI,EAAK,IAAMF,EAAGI,EAAK,IACtBN,GAAII,EAAK,GAAKC,IAAOH,GAAII,EAAKC,EAAK,GAAKA,IACxCP,GAAII,EAAK,GAAKC,IAAOH,GAAII,EAAKC,EAAK,GAAKA,GACzC,OACM7yC,QACAyyC,IAMhBK,MAAM34C,SACEy2C,cAACA,EAAeR,UAAUc,QAACA,EAADhE,UAAUA,EAAVD,UAAqBA,IAAcrwC,KAC7Dm2C,EAAK7B,EAAQ/2C,OACP,IAAR44C,EAAW,OAAO,WAChBnI,EAAS,OACXnnB,EAAIsvB,IACL,OACK3wC,EAAIjC,KAAKgB,MAAMsiB,EAAI,MACzBmnB,EAAOlrC,KAAKkxC,EAAkB,EAAJxuC,GAAQwuC,EAAkB,EAAJxuC,EAAQ,IACxDqhB,EAAIA,EAAI,GAAM,EAAIA,EAAI,EAAIA,EAAI,EAC1BwpB,EAAUxpB,KAAOtpB,EAAG,MACxBspB,EAAIypB,EAAUzpB,SACPA,IAAMsvB,IAAa,IAAPtvB,UACdmnB,EAETiH,MAAM13C,MAEM,IAANA,GAAyC,IAA9ByC,KAAKwzC,SAASpD,KAAK9yC,aACzB,CAAC0C,KAAK2zC,KAAM3zC,KAAK0zC,KAAM1zC,KAAK2zC,KAAM3zC,KAAK4zC,KAAM5zC,KAAKyzC,KAAMzzC,KAAK4zC,KAAM5zC,KAAKyzC,KAAMzzC,KAAK0zC,YAEtF1F,EAAShuC,KAAKk2C,MAAM34C,MACX,OAAXywC,EAAiB,OAAO,WACrB8F,QAASzlB,GAAKruB,KACfsoB,EAAQ,EAAJ/qB,SACH8wB,EAAE/F,IAAM+F,EAAE/F,EAAI,GACftoB,KAAKo2C,cAAc74C,EAAGywC,EAAQ3f,EAAE/F,GAAI+F,EAAE/F,EAAI,GAAI+F,EAAE/F,EAAI,GAAI+F,EAAE/F,EAAI,IAC9DtoB,KAAKq2C,YAAY94C,EAAGywC,GAE5BqI,YAAY94C,EAAGywC,SACP1vC,EAAI0vC,EAAO1wC,WAEbqR,EAAIC,EACJymC,EACAc,EAAIG,EAHJC,EAAI,KACI1nC,EAAKm/B,EAAO1vC,EAAI,GAAIwQ,EAAKk/B,EAAO1vC,EAAI,GACxC0lC,EAAKhkC,KAAKs1C,YAAYzmC,EAAIC,OAE7B,IAAI1L,EAAI,EAAGA,EAAI9E,EAAG8E,GAAK,KAC1BuL,EAAKE,EAAID,EAAKE,EAAID,EAAKm/B,EAAO5qC,GAAI0L,EAAKk/B,EAAO5qC,EAAI,GAClDiyC,EAAKrR,EAAIA,EAAKhkC,KAAKs1C,YAAYzmC,EAAIC,GACxB,IAAPumC,GAAmB,IAAPrR,EACdmS,EAAKG,EAAIA,EAAK,EACVC,EAAGA,EAAEzzC,KAAK+L,EAAIC,GACbynC,EAAI,CAAC1nC,EAAIC,OACT,KACDke,EAAGwpB,EAAKC,EAAKC,EAAKC,KACX,IAAPtB,EAAU,IAC4C,QAAnDroB,EAAIhtB,KAAKu1C,aAAa5mC,EAAIC,EAAIC,EAAIC,EAAIumC,EAAIrR,IAAe,UAC7DwS,EAAKC,EAAKC,EAAKC,GAAO3pB,MAClB,IACmD,QAAnDA,EAAIhtB,KAAKu1C,aAAa1mC,EAAIC,EAAIH,EAAIC,EAAIo1B,EAAIqR,IAAe,UAC7DqB,EAAKC,EAAKH,EAAKC,GAAOzpB,EACvBmpB,EAAKG,EAAIA,EAAKt2C,KAAK42C,UAAUJ,EAAKC,GAC9BN,GAAMG,GAAIt2C,KAAK62C,MAAMt5C,EAAG44C,EAAIG,EAAIC,EAAGA,EAAEj5C,QACrCi5C,EAAGA,EAAEzzC,KAAK0zC,EAAKC,GACdF,EAAI,CAACC,EAAKC,GAEjBN,EAAKG,EAAIA,EAAKt2C,KAAK42C,UAAUF,EAAKC,GAC9BR,GAAMG,GAAIt2C,KAAK62C,MAAMt5C,EAAG44C,EAAIG,EAAIC,EAAGA,EAAEj5C,QACrCi5C,EAAGA,EAAEzzC,KAAK4zC,EAAKC,GACdJ,EAAI,CAACG,EAAKC,MAGfJ,EACFJ,EAAKG,EAAIA,EAAKt2C,KAAK42C,UAAUL,EAAE,GAAIA,EAAE,IACjCJ,GAAMG,GAAIt2C,KAAK62C,MAAMt5C,EAAG44C,EAAIG,EAAIC,EAAGA,EAAEj5C,aACpC,GAAI0C,KAAKw1C,SAASj4C,GAAIyC,KAAKyzC,KAAOzzC,KAAK2zC,MAAQ,GAAI3zC,KAAK0zC,KAAO1zC,KAAK4zC,MAAQ,SAC1E,CAAC5zC,KAAK2zC,KAAM3zC,KAAK0zC,KAAM1zC,KAAK2zC,KAAM3zC,KAAK4zC,KAAM5zC,KAAKyzC,KAAMzzC,KAAK4zC,KAAM5zC,KAAKyzC,KAAMzzC,KAAK0zC,aAErF6C,EAEThB,aAAa5mC,EAAIC,EAAIC,EAAIC,EAAIumC,EAAIrR,UAClB,IACA,IAAPqR,GAAmB,IAAPrR,EAAU,MAAO,CAACr1B,EAAIC,EAAIC,EAAIC,MAC1CumC,EAAKrR,EAAI,OAAO,SAChBxjC,EAAGgH,EAAGnE,EAAIgyC,GAAMrR,EACZ,EAAJ3gC,GAAY7C,EAAImO,GAAME,EAAKF,IAAO3O,KAAK4zC,KAAOhlC,IAAOE,EAAKF,GAAKpH,EAAIxH,KAAK4zC,MAC/D,EAAJvwC,GAAY7C,EAAImO,GAAME,EAAKF,IAAO3O,KAAK0zC,KAAO9kC,IAAOE,EAAKF,GAAKpH,EAAIxH,KAAK0zC,MACpE,EAAJrwC,GAAYmE,EAAIoH,GAAME,EAAKF,IAAO5O,KAAK2zC,KAAOhlC,IAAOE,EAAKF,GAAKnO,EAAIR,KAAK2zC,OAC5EnsC,EAAIoH,GAAME,EAAKF,IAAO5O,KAAKyzC,KAAO9kC,IAAOE,EAAKF,GAAKnO,EAAIR,KAAKyzC,MAC7D4B,GAAI1mC,EAAKnO,EAAGoO,EAAKpH,EAAG6tC,EAAKr1C,KAAKs1C,YAAY3mC,EAAIC,KAC7CC,EAAKrO,EAAGsO,EAAKtH,EAAGw8B,EAAKhkC,KAAKs1C,YAAYzmC,EAAIC,KAGnDsnC,cAAc74C,EAAGywC,EAAQ8I,EAAKC,EAAKC,EAAKC,OACVtxC,EAAxB4wC,EAAI94C,MAAMoB,KAAKmvC,OACfroC,EAAI3F,KAAK80C,SAASyB,EAAE,GAAIA,EAAE,GAAIO,EAAKC,KAAMR,EAAEW,QAAQvxC,EAAE,GAAIA,EAAE,KAC3DA,EAAI3F,KAAK80C,SAASyB,EAAEA,EAAEj5C,OAAS,GAAIi5C,EAAEA,EAAEj5C,OAAS,GAAI05C,EAAKC,KAAMV,EAAEzzC,KAAK6C,EAAE,GAAIA,EAAE,IAC9E4wC,EAAIv2C,KAAKq2C,YAAY94C,EAAGg5C,OACrB,IAAyBlB,EAArBjyC,EAAI,EAAG9E,EAAIi4C,EAAEj5C,OAAY0mC,EAAKhkC,KAAK42C,UAAUL,EAAEj4C,EAAI,GAAIi4C,EAAEj4C,EAAI,IAAK8E,EAAI9E,EAAG8E,GAAK,EACrFiyC,EAAKrR,EAAIA,EAAKhkC,KAAK42C,UAAUL,EAAEnzC,GAAImzC,EAAEnzC,EAAI,IACrCiyC,GAAMrR,IAAI5gC,EAAIpD,KAAK62C,MAAMt5C,EAAG83C,EAAIrR,EAAIuS,EAAGnzC,GAAI9E,EAAIi4C,EAAEj5C,aAE9C0C,KAAKw1C,SAASj4C,GAAIyC,KAAKyzC,KAAOzzC,KAAK2zC,MAAQ,GAAI3zC,KAAK0zC,KAAO1zC,KAAK4zC,MAAQ,KACjF2C,EAAI,CAACv2C,KAAKyzC,KAAMzzC,KAAK0zC,KAAM1zC,KAAK2zC,KAAM3zC,KAAK0zC,KAAM1zC,KAAK2zC,KAAM3zC,KAAK4zC,KAAM5zC,KAAKyzC,KAAMzzC,KAAK4zC,cAElF2C,EAETM,MAAMt5C,EAAG44C,EAAIG,EAAIC,EAAGnzC,QACX+yC,IAAOG,GAAI,KACZ91C,EAAGgH,SACC2uC,QACD,EAAQA,EAAK,gBACb,EAAQA,EAAK,EAAQ31C,EAAIR,KAAK2zC,KAAMnsC,EAAIxH,KAAK0zC,gBAC7C,EAAQyC,EAAK,gBACb,EAAQA,EAAK,GAAQ31C,EAAIR,KAAK2zC,KAAMnsC,EAAIxH,KAAK4zC,gBAC7C,GAAQuC,EAAK,gBACb,EAAQA,EAAK,EAAQ31C,EAAIR,KAAKyzC,KAAMjsC,EAAIxH,KAAK4zC,gBAC7C,EAAQuC,EAAK,gBACb,EAAQA,EAAK,EAAQ31C,EAAIR,KAAKyzC,KAAMjsC,EAAIxH,KAAK0zC,KAE/C6C,EAAEnzC,KAAO5C,GAAK+1C,EAAEnzC,EAAI,KAAOoE,IAAMxH,KAAKw1C,SAASj4C,EAAGiD,EAAGgH,KACxD+uC,EAAEY,OAAO/zC,EAAG,EAAG5C,EAAGgH,GAAIpE,GAAK,MAG3BmzC,EAAEj5C,OAAS,MACR,IAAIC,EAAI,EAAGA,EAAIg5C,EAAEj5C,OAAQC,GAAI,EAAG,OAC7B6F,GAAK7F,EAAI,GAAKg5C,EAAEj5C,OAAQ4H,GAAK3H,EAAI,GAAKg5C,EAAEj5C,QAC1Ci5C,EAAEh5C,KAAOg5C,EAAEnzC,IAAMmzC,EAAEnzC,KAAOmzC,EAAErxC,IAC7BqxC,EAAEh5C,EAAI,KAAOg5C,EAAEnzC,EAAI,IAAMmzC,EAAEnzC,EAAI,KAAOmzC,EAAErxC,EAAI,MAC7CqxC,EAAEY,OAAO/zC,EAAG,GAAI7F,GAAK,UAGpB6F,EAET0xC,SAASnmC,EAAIC,EAAIwoC,EAAIC,OACDh0C,EAAG7C,EAAGgH,EAApBhC,EAAIohB,EAAAA,KACJywB,EAAK,EAAG,IACNzoC,GAAM5O,KAAK0zC,KAAM,OAAO,MACvBrwC,GAAKrD,KAAK0zC,KAAO9kC,GAAMyoC,GAAM7xC,IAAGgC,EAAIxH,KAAK0zC,KAAMlzC,EAAImO,GAAMnJ,EAAInC,GAAK+zC,QAClE,GAAIC,EAAK,EAAG,IACbzoC,GAAM5O,KAAK4zC,KAAM,OAAO,MACvBvwC,GAAKrD,KAAK4zC,KAAOhlC,GAAMyoC,GAAM7xC,IAAGgC,EAAIxH,KAAK4zC,KAAMpzC,EAAImO,GAAMnJ,EAAInC,GAAK+zC,MAErEA,EAAK,EAAG,IACNzoC,GAAM3O,KAAK2zC,KAAM,OAAO,MACvBtwC,GAAKrD,KAAK2zC,KAAOhlC,GAAMyoC,GAAM5xC,IAAGhF,EAAIR,KAAK2zC,KAAMnsC,EAAIoH,GAAMpJ,EAAInC,GAAKg0C,QAClE,GAAID,EAAK,EAAG,IACbzoC,GAAM3O,KAAKyzC,KAAM,OAAO,MACvBpwC,GAAKrD,KAAKyzC,KAAO9kC,GAAMyoC,GAAM5xC,IAAGhF,EAAIR,KAAKyzC,KAAMjsC,EAAIoH,GAAMpJ,EAAInC,GAAKg0C,SAElE,CAAC72C,EAAGgH,GAEbovC,UAAUp2C,EAAGgH,UACHhH,IAAMR,KAAKyzC,KAAO,EACpBjzC,IAAMR,KAAK2zC,KAAO,EAAS,IAC1BnsC,IAAMxH,KAAK0zC,KAAO,EACnBlsC,IAAMxH,KAAK4zC,KAAO,EAAS,GAEnC0B,YAAY90C,EAAGgH,UACLhH,EAAIR,KAAKyzC,KAAO,EAClBjzC,EAAIR,KAAK2zC,KAAO,EAAS,IACxBnsC,EAAIxH,KAAK0zC,KAAO,EACjBlsC,EAAIxH,KAAK4zC,KAAO,EAAS,ICxTnC,MAAM5nC,GAAM,EAAIzI,KAAKwI,GAAIpH,GAAMpB,KAAKoB,IAEpC,SAAS8I,GAAO9H,UACPA,EAAE,GAGX,SAAS+H,GAAO/H,UACPA,EAAE,GAiBX,SAAS2xC,GAAO92C,EAAGgH,EAAG+H,SACb,CAAC/O,EAAI+C,KAAKwN,IAAIvQ,EAAIgH,GAAK+H,EAAG/H,EAAIjE,KAAKsN,IAAIrQ,EAAIgH,GAAK+H,GAG1C,MAAMgoC,eACPvJ,EAAQ6E,EAAKplC,GAAQqlC,EAAKplC,GAAQQ,UACrC,IAAIqpC,GAAS,WAAYvJ,EA8LpC,SAAmBA,EAAQ6E,EAAIC,EAAI5kC,SAC3B5P,EAAI0vC,EAAO1wC,OACX2H,EAAQ,IAAIW,aAAiB,EAAJtH,OAC1B,IAAIf,EAAI,EAAGA,EAAIe,IAAKf,EAAG,OACpBoI,EAAIqoC,EAAOzwC,GACjB0H,EAAU,EAAJ1H,GAASs1C,EAAG70C,KAAKkQ,EAAMvI,EAAGpI,EAAGywC,GACnC/oC,EAAU,EAAJ1H,EAAQ,GAAKu1C,EAAG90C,KAAKkQ,EAAMvI,EAAGpI,EAAGywC,UAElC/oC,EArMCuyC,CAAUxJ,EAAQ6E,EAAIC,EAAI5kC,GAC1BtI,aAAa/G,KAuMvB,UAAuBmvC,EAAQ6E,EAAIC,EAAI5kC,OACjC3Q,EAAI,MACH,MAAMoI,KAAKqoC,QACR6E,EAAG70C,KAAKkQ,EAAMvI,EAAGpI,EAAGywC,SACpB8E,EAAG90C,KAAKkQ,EAAMvI,EAAGpI,EAAGywC,KACxBzwC,EA5MsBk6C,CAAazJ,EAAQ6E,EAAIC,EAAI5kC,KAEvDvP,YAAYqvC,QACL0J,YAAc,IAAI3J,GAAWC,QAC7BsG,QAAU,IAAI/F,WAAWP,EAAO1wC,OAAS,QACzCq6C,WAAa,IAAIpJ,WAAWP,EAAO1wC,OAAS,QAC5C0wC,OAAShuC,KAAK03C,YAAYvJ,YAC1B4F,QAEPhF,qBACO2I,YAAY3I,cACZgF,QACE/zC,KAET+zC,cACQnzC,EAAIZ,KAAK03C,YAAa1J,EAAShuC,KAAKguC,UAGtCptC,EAAEwvC,MAAQxvC,EAAEwvC,KAAK9yC,OAAS,GAvClC,SAAmBsD,SACXyvC,UAACA,EAADlC,OAAYA,GAAUvtC,MACvB,IAAIrD,EAAI,EAAGA,EAAI8yC,EAAU/yC,OAAQC,GAAK,EAAG,OACtC0C,EAAI,EAAIowC,EAAU9yC,GAClB2C,EAAI,EAAImwC,EAAU9yC,EAAI,GACtB8F,EAAI,EAAIgtC,EAAU9yC,EAAI,OACb4wC,EAAO9qC,GAAK8qC,EAAOluC,KAAOkuC,EAAOjuC,EAAI,GAAKiuC,EAAOluC,EAAI,KACrDkuC,EAAOjuC,GAAKiuC,EAAOluC,KAAOkuC,EAAO9qC,EAAI,GAAK8qC,EAAOluC,EAAI,IACxD,MAAO,OAAO,SAErB,EA6B8B23C,CAAUh3C,GAAI,MAC1Cg3C,UAAYrJ,WAAW1vC,KAAK,CAACvB,OAAQ0wC,EAAO1wC,OAAO,IAAI,CAACkP,EAAEjP,IAAMA,IAClE0F,MAAK,CAAC1F,EAAG6F,IAAM4qC,EAAO,EAAIzwC,GAAKywC,EAAO,EAAI5qC,IAAM4qC,EAAO,EAAIzwC,EAAI,GAAKywC,EAAO,EAAI5qC,EAAI,WAChFyjB,EAAI7mB,KAAK43C,UAAU,GAAIx3C,EAAIJ,KAAK43C,UAAU53C,KAAK43C,UAAUt6C,OAAS,GACtEu6C,EAAS,CAAE7J,EAAO,EAAInnB,GAAImnB,EAAO,EAAInnB,EAAI,GAAImnB,EAAO,EAAI5tC,GAAI4tC,EAAO,EAAI5tC,EAAI,IAC3EmP,EAAI,KAAOhM,KAAKu0C,MAAMD,EAAO,GAAKA,EAAO,GAAIA,EAAO,GAAKA,EAAO,QAC7D,IAAIt6C,EAAI,EAAGe,EAAI0vC,EAAO1wC,OAAS,EAAGC,EAAIe,IAAKf,EAAG,OAC3CoI,EAAI2xC,GAAOtJ,EAAO,EAAIzwC,GAAIywC,EAAO,EAAIzwC,EAAI,GAAIgS,GACnDy+B,EAAO,EAAIzwC,GAAKoI,EAAE,GAClBqoC,EAAO,EAAIzwC,EAAI,GAAKoI,EAAE,QAEnB+xC,YAAc,IAAI3J,GAAWC,eAE3BhuC,KAAK43C,gBAGRtH,EAAYtwC,KAAKswC,UAAYtwC,KAAK03C,YAAYpH,UAC9CF,EAAOpwC,KAAKowC,KAAOpwC,KAAK03C,YAAYtH,KACpCC,EAAYrwC,KAAKqwC,UAAYrwC,KAAK03C,YAAYrH,UAC9CiE,EAAUt0C,KAAKs0C,QAAQltC,MAAM,GAC7B2wC,EAAY/3C,KAAK23C,WAAWvwC,MAAM,OAKnC,IAAIyf,EAAI,EAAGvoB,EAAIgyC,EAAUhzC,OAAQupB,EAAIvoB,IAAKuoB,EAAG,OAC1ClhB,EAAI0qC,EAAUxpB,EAAI,GAAM,EAAIA,EAAI,EAAIA,EAAI,IACxB,IAAlBypB,EAAUzpB,KAA6B,IAAhBytB,EAAQ3uC,KAAW2uC,EAAQ3uC,GAAKkhB,OAExD,IAAItpB,EAAI,EAAGe,EAAI8xC,EAAK9yC,OAAQC,EAAIe,IAAKf,EACxCw6C,EAAU3H,EAAK7yC,IAAMA,EAInB6yC,EAAK9yC,QAAU,GAAK8yC,EAAK9yC,OAAS,SAC/B+yC,UAAY,IAAI9B,WAAW,GAAGnnC,MAAM,QACpCkpC,UAAY,IAAI/B,WAAW,GAAGnnC,MAAM,QACpCipC,UAAU,GAAKD,EAAK,QACpBC,UAAU,GAAKD,EAAK,QACpBC,UAAU,GAAKD,EAAK,GACzBkE,EAAQlE,EAAK,IAAM,EACC,IAAhBA,EAAK9yC,SAAcg3C,EAAQlE,EAAK,IAAM,IAG9C4H,QAAQH,UACC,IAAItE,GAAQvzC,KAAM63C,cAEhBt6C,SACH+2C,QAACA,EAADlE,KAAUA,EAAVuH,WAAgBA,EAAhBrH,UAA4BA,EAA5BD,UAAuCA,EAAvCuH,UAAkDA,GAAa53C,QAGjE43C,EAAW,OACPxnC,EAAIwnC,EAAUl4C,QAAQnC,UACxB6S,EAAI,UAASwnC,EAAUxnC,EAAI,SAC3BA,EAAIwnC,EAAUt6C,OAAS,UAASs6C,EAAUxnC,EAAI,WAI9C+lC,EAAK7B,EAAQ/2C,OACP,IAAR44C,EAAW,WACXtvB,EAAIsvB,EAAIpE,GAAM,IACf,UACKA,EAAK1B,EAAUxpB,GACrBA,EAAIA,EAAI,GAAM,EAAIA,EAAI,EAAIA,EAAI,EAC1BwpB,EAAUxpB,KAAOtpB,EAAG,UACxBspB,EAAIypB,EAAUzpB,IACH,IAAPA,EAAU,OACNlhB,EAAIyqC,GAAMuH,EAAWp6C,GAAK,GAAK6yC,EAAK9yC,oBACtCqI,IAAMosC,UAAUpsC,WAGfkhB,IAAMsvB,GAEjBtd,KAAKr4B,EAAGgH,EAAGjK,EAAI,OACRiD,GAAKA,IAASA,IAAOgH,GAAKA,IAASA,EAAI,OAAQ,QAC9C1B,EAAKvI,MACP8F,QACIA,EAAIrD,KAAKy1C,MAAMl4C,EAAGiD,EAAGgH,KAAO,GAAKnE,IAAM9F,GAAK8F,IAAMyC,GAAIvI,EAAI8F,SAC3DA,EAEToyC,MAAMl4C,EAAGiD,EAAGgH,SACJ8sC,QAACA,EAADlE,KAAUA,EAAVuH,WAAgBA,EAAhBrH,UAA4BA,EAA5BD,UAAuCA,EAAvCrC,OAAkDA,GAAUhuC,SAC9C,IAAhBs0C,EAAQ/2C,KAAcywC,EAAO1wC,OAAQ,OAAQC,EAAI,IAAMywC,EAAO1wC,QAAU,OACxE+F,EAAI9F,EACJ06C,EAAKtzC,GAAInE,EAAIwtC,EAAW,EAAJzwC,GAAQ,GAAKoH,GAAI6C,EAAIwmC,EAAW,EAAJzwC,EAAQ,GAAI,SAC1D44C,EAAK7B,EAAQ/2C,OACfspB,EAAIsvB,IACL,KACG3wC,EAAI6qC,EAAUxpB,SACZ2c,EAAK7+B,GAAInE,EAAIwtC,EAAW,EAAJxoC,GAAQ,GAAKb,GAAI6C,EAAIwmC,EAAW,EAAJxoC,EAAQ,GAAI,MAC9Dg+B,EAAKyU,IAAIA,EAAKzU,EAAIngC,EAAImC,GAC1BqhB,EAAIA,EAAI,GAAM,EAAIA,EAAI,EAAIA,EAAI,EAC1BwpB,EAAUxpB,KAAOtpB,EAAG,SACxBspB,EAAIypB,EAAUzpB,IACH,IAAPA,EAAU,IACZA,EAAIupB,GAAMuH,EAAWp6C,GAAK,GAAK6yC,EAAK9yC,QAChCupB,IAAMrhB,GACJb,GAAInE,EAAIwtC,EAAW,EAAJnnB,GAAQ,GAAKliB,GAAI6C,EAAIwmC,EAAW,EAAJnnB,EAAQ,GAAI,GAAKoxB,EAAI,OAAOpxB,eAIxEA,IAAMsvB,UACR9yC,EAETuqC,OAAOjhC,SACCS,EAAoB,MAAXT,EAAkBA,EAAU,IAAIR,QAAO5K,GAChDysC,OAACA,EAADsC,UAASA,EAATD,UAAoBA,GAAarwC,SAClC,IAAIzC,EAAI,EAAGe,EAAIgyC,EAAUhzC,OAAQC,EAAIe,IAAKf,EAAG,OAC1C6F,EAAIktC,EAAU/yC,MAChB6F,EAAI7F,EAAG,eACLg3C,EAAoB,EAAflE,EAAU9yC,GACfi3C,EAAoB,EAAfnE,EAAUjtC,GACrBuJ,EAAQuC,OAAO8+B,EAAOuG,GAAKvG,EAAOuG,EAAK,IACvC5nC,EAAQyC,OAAO4+B,EAAOwG,GAAKxG,EAAOwG,EAAK,gBAEpC0D,WAAWvrC,GACTS,GAAUA,EAAOnO,QAE1Bk5C,aAAaxrC,EAAS4C,EAAI,SAClBnC,EAAoB,MAAXT,EAAkBA,EAAU,IAAIR,QAAO5K,GAChDysC,OAACA,GAAUhuC,SACZ,IAAIzC,EAAI,EAAGe,EAAI0vC,EAAO1wC,OAAQC,EAAIe,EAAGf,GAAK,EAAG,OAC1CiD,EAAIwtC,EAAOzwC,GAAIiK,EAAIwmC,EAAOzwC,EAAI,GACpCoP,EAAQuC,OAAO1O,EAAI+O,EAAG/H,GACtBmF,EAAQ8D,IAAIjQ,EAAGgH,EAAG+H,EAAG,EAAGvD,WAEnBoB,GAAUA,EAAOnO,QAE1Bi5C,WAAWvrC,SACHS,EAAoB,MAAXT,EAAkBA,EAAU,IAAIR,QAAO5K,GAChD6uC,KAACA,EAADpC,OAAOA,GAAUhuC,KACjBwO,EAAc,EAAV4hC,EAAK,GAAQ9xC,EAAI8xC,EAAK9yC,OAChCqP,EAAQuC,OAAO8+B,EAAOx/B,GAAIw/B,EAAOx/B,EAAI,QAChC,IAAIjR,EAAI,EAAGA,EAAIe,IAAKf,EAAG,OACpBiR,EAAI,EAAI4hC,EAAK7yC,GACnBoP,EAAQyC,OAAO4+B,EAAOx/B,GAAIw/B,EAAOx/B,EAAI,WAEvC7B,EAAQwC,YACD/B,GAAUA,EAAOnO,QAE1Bm5C,oBACQhD,EAAU,IAAI9B,eACf4E,WAAW9C,GACTA,EAAQn2C,QAEjBo5C,eAAe96C,EAAGoP,SACVS,EAAoB,MAAXT,EAAkBA,EAAU,IAAIR,QAAO5K,GAChDysC,OAACA,EAADqC,UAASA,GAAarwC,KACtByO,EAAyB,EAApB4hC,EAAU9yC,GAAK,GACpBmR,EAAwB,EAAnB2hC,EAAU9yC,EAAI,GACnB02C,EAAwB,EAAnB5D,EAAU9yC,EAAI,UACzBoP,EAAQuC,OAAO8+B,EAAOv/B,GAAKu/B,EAAOv/B,EAAK,IACvC9B,EAAQyC,OAAO4+B,EAAOt/B,GAAKs/B,EAAOt/B,EAAK,IACvC/B,EAAQyC,OAAO4+B,EAAOiG,GAAKjG,EAAOiG,EAAK,IACvCtnC,EAAQwC,YACD/B,GAAUA,EAAOnO,kCAGlBoxC,UAACA,GAAarwC,SACf,IAAIzC,EAAI,EAAGe,EAAI+xC,EAAU/yC,OAAS,EAAGC,EAAIe,IAAKf,QAC3CyC,KAAKs4C,gBAAgB/6C,GAG/B+6C,gBAAgB/6C,SACR63C,EAAU,IAAI9B,eACf+E,eAAe96C,EAAG63C,GAChBA,EAAQn2C,SCnNJ,SAASs0C,WAEpBrrC,IADMszB,IAAAA,WAAY7yB,IAAAA,kBAAmB4vC,IAAAA,mBAG9BC,EAAmB7vC,KACrB8vC,EAAiBF,OAUpB/c,IAPFkd,IAAAA,aACAC,IAAAA,aACApiB,IAAAA,QACA8O,IAAAA,cACAE,IAAAA,gBACAqT,IAAAA,YACAC,IAAAA,gBAGIC,EAAcvyC,UAAM41B,aACxB,SAAC/yB,uBACCoyB,KAAakd,wBAAetvC,GAC5BovC,EAAgBpvC,KAElB,CAACoyB,EAAYgd,SAIbC,IACCG,GACCF,GACAC,GACApiB,GACA8O,GACAE,WAGK,SAGHlF,EAAQ,CACZyY,YAAAA,SAGsB,YAApBD,EACKtyC,wBAACwyC,GAAkB1Y,GAGrB95B,wBAACyyC,GAAmB3Y,GAG7B,SAAS2Y,UACPF,IAAAA,cAUI5wC,IALFG,IAAAA,YACAu9B,IAAAA,cACApK,IAAAA,WACA5yB,IAAAA,eACAqwC,IAAAA,yBAGIC,EAA0C,IAAzBtT,EAActoC,QAAgBsoC,EAAc,GAAGh7B,QAEhEuuC,EAAWvT,EAAcnzB,OAC7B,SAAA7R,SAAuB,QAAlBA,EAAEiR,cAA0BjR,EAAEgK,kBAG9BrE,UAAMy1B,SAAQ,eACfod,EAAa37C,MAAMoB,KAAKo6C,EAAyBt3C,WAClDe,KAAI,gCACJomB,QAAO,SAAA3f,OACAC,EAAQD,EAAO,MAEhBC,OAIC+B,EAAe/B,EAAM+B,mBACH,cAAjBA,GAAiD,OAAjBA,MAExClI,MAAK,SAAChD,EAAGC,OACFm5C,EAAQzT,EAAc/M,MAAK,SAAAj4B,UAAKA,EAAEo0B,KAAO/0B,EAAE,GAAG80B,mBAC9CukB,EAAQ1T,EAAc/M,MAAK,SAAAj4B,UAAKA,EAAEo0B,KAAO90B,EAAE,GAAG60B,0BAExCvrB,GAAWvJ,EAAE,GAAIoI,EAAagxC,EAAOF,GACrC3vC,GAAWtJ,EAAE,GAAImI,EAAaixC,EAAOH,MAKjD9wC,EAAYU,YACdqwC,EAAWt1C,cAGPy1C,EAAUH,EAAW12C,KAAI,SAACyG,EAAQ5L,EAAGi8C,SACnCpwC,EAAQD,EAAO,GAEfyzB,EAAO4c,EAAIj8C,EAAI,GACfU,EAAOu7C,EAAIj8C,EAAI,GAEf+K,EAAgBs9B,EAAc/M,MAClC,SAAAj4B,UAAKA,EAAEo0B,KAAO5rB,EAAM2rB,mBAEhB0kB,EAAYjwC,GAAWJ,EAAOf,EAAaC,EAAe6wC,GAE5DjzC,iBAAQmC,SAAAA,EAAawC,MAAM3E,WAAW,CAAC,EAAG,GAEzCwzC,EAA4BxzC,KAAdyzC,EAAczzC,QAE7B02B,EAAM,KACFt0B,EAAgBs9B,EAAc/M,MAClC,SAAAj4B,UAAKA,EAAEo0B,KAAO4H,EAAK,GAAG7H,mBAGxB2kB,EAAeD,GAAaA,EADbjwC,GAAWozB,EAAK,GAAIv0B,EAAaC,EAAe6wC,IACb,KAGhDl7C,EAAM,KACFqK,EAAgBs9B,EAAc/M,MAClC,SAAAj4B,UAAKA,EAAEo0B,KAAO/2B,EAAK,GAAG82B,mBAGxB4kB,EAAaF,GADEjwC,GAAWvL,EAAK,GAAIoK,EAAaC,EAAe6wC,GAC5BM,GAAa,QAG3C,CACLC,aAAAA,EACAC,WAAAA,EACAF,UAAAA,EACAG,gBAAiBzwC,EACd2f,QAAO,SAAA1f,OACAoC,EAAiBpC,EAAMoC,sBAE3B,MAAOA,KAGV9I,KAAI,SAAC0G,EAAO7L,EAAGi8C,aACR5c,EAAO4c,EAAIj8C,EAAI,GACfU,EAAOu7C,EAAIj8C,EAAI,GAEf+K,EAAgBs9B,EAAc/M,MAClC,SAAAj4B,UAAKA,EAAEo0B,KAAO5rB,EAAM2rB,sBAGlBmkB,EAAgB,WACdhzC,iBAAQoC,SAAAA,EAAeuC,MAAM3E,WAAW,CAAC,EAAG,GAE5CmF,EAAY,UAACjC,EAAMiC,kBAANC,EAAkB,YAAIlC,EAAMiC,kBAANE,EAAkB,UAErDjD,GAAAA,EAAeS,aACjB7C,EAAMpC,UACNuH,EAAUvH,uBAGP+1C,EAAgC3zC,KAAhB4zC,EAAgB5zC,QAEjC02B,EACFid,iBACEvxC,SAAAA,EAAeuC,eAAMQ,EAAU,MAAMlL,QAAQA,OAG7ClC,EACF67C,iBAAexxC,SAAAA,EAAeuC,eAAMQ,EAAU,MAAMlL,QAAQA,UAGvD,CACL05C,eAAAA,EACAC,aAAAA,EACA1wC,MAAAA,OAIEnK,iBACJqJ,SAAAA,EAAeuC,MACbvC,EAAcsC,iBACVxB,EAAMiC,kBAAN0uC,EAAkB,GAClB3wC,EAAMoC,mBACPrL,IAEH+F,iBAAQoC,SAAAA,EAAeuC,MAAM3E,WAAW,CAAC,EAAG,SAE5CoC,GAAAA,EAAeS,YACjB7C,EAAMpC,cAGH+1C,EAAgC3zC,KAAhB4zC,EAAgB5zC,QAEjC02B,EAAM,SACFod,EAAWpU,EAAc/M,MAC7B,SAAAj4B,UAAKA,EAAEo0B,YAAO4H,SAAAA,EAAM7H,oBAMtB8kB,EAAiB56C,GAASA,kBAHxB+6C,SAAAA,EAAUnvC,MACRmvC,EAASpvC,iBAAUgyB,EAAKvxB,kBAAL4uC,EAAiB,GAAKrd,EAAKpxB,mBAC3CrL,MACwC,KAG7ClC,EAAM,SACFi8C,EAAWtU,EAAc/M,MAC7B,SAAAj4B,UAAKA,EAAEo0B,YAAO/2B,SAAAA,EAAM82B,oBAMtB+kB,EAAe76C,mBAHbi7C,SAAAA,EAAUrvC,MACRqvC,EAAStvC,iBAAU3M,EAAKoN,kBAAL8uC,EAAiB,GAAKl8C,EAAKuN,mBAC3CrL,KAC6BlB,GAAS,QAGxC,CACL46C,eAAAA,EACAC,aAAAA,EACA1wC,MAAAA,iBAOR7C,6BAEI6zC,aAAc,kBAAMtB,EAAY,OAChC9xC,MAAO,CACLiC,UAAW1B,EAAUqB,EAAerI,KAAMqI,EAAeM,OAI5DqwC,EAAQ72C,KAAI,SAAC23C,EAAQ98C,UAElBgJ,6BAAGjH,IAAQ+6C,EAAOZ,cAAal8C,GAC5B88C,EAAOT,gBAAgBl3C,KAAI,SAAC43C,EAAe/8C,OACpCsR,EAAMxG,EAAYU,WAEpBuxC,EAAcT,eADdQ,EAAOX,aAELvrC,EAAM9F,EAAYU,WAEpBuxC,EAAcR,aADdO,EAAOV,WAEL7qC,EAAMzG,EAAYU,WAEpBsxC,EAAOX,aADPY,EAAcT,eAEZzrC,EAAM/F,EAAYU,WAEpBsxC,EAAOV,WADPW,EAAcR,aAGZt5C,EAAI+C,KAAKlC,IAAIwN,EAAIV,GACjB3G,EAAIjE,KAAKlC,IAAIyN,EAAIV,GACjBmsC,EAAOh3C,KAAKjC,IAAIuN,EAAIV,GACpBqsC,EAAOj3C,KAAKjC,IAAIwN,EAAIV,GAEpBnE,EAAS1G,KAAKjC,IAAIk5C,EAAOhzC,EAAG,GAC5BqC,EAAQtG,KAAKjC,IAAIi5C,EAAO/5C,EAAG,UAG/B+F,gCAEIjH,IAAK/B,EACLiD,EAAAA,EACAgH,EAAAA,EACAqC,MAAAA,EACAI,OAAAA,EACA+0B,UAAW,iBACXyb,aAAc,kBAAM3B,EAAYwB,EAAclxC,QAC9CpC,MAAO,CACLI,KAAMo0B,IAAaC,KACf,YACA,kBACJrxB,YAAa,EACblD,OAAQs0B,IAAaC,KAAO,QAAU,QACtC3oB,QAAS0oB,IAAaod,YAAc,EAAI,eAW3D,CACDK,EACA5wC,EACAO,EAAerI,KACfqI,EAAeM,IACf08B,EACAuT,EACAD,EACAJ,EACAtd,IAIJ,IAAMkf,GAAiBxtC,KAEvB,SAAS6rC,UACPD,IAAAA,cAWI5wC,IANFG,IAAAA,YACAG,IAAAA,OACAo9B,IAAAA,cACApK,IAAAA,WACA5yB,IAAAA,eAIE+xC,EAAW,KAETC,EAAgE,GAEhEzB,EAAWvT,EAAcnzB,OAC7B,SAAA7R,SAAuB,QAAlBA,EAAEiR,cAA0BjR,EAAEgK,kBAGrCpC,EAAOg0B,SAAQ,SAAA9D,GACbA,EAAMvvB,OACH2f,QAAO,SAAA1f,OACA+B,EAAe/B,EAAM+B,aACrBK,EAAiBpC,EAAMoC,qBAEV,cAAjBL,GACiB,OAAjBA,GACmB,cAAnBK,GACmB,OAAnBA,KAGHgxB,SAAQ,SAAApzB,OACDd,EAAgBs9B,EAAc/M,MAClC,SAAAj4B,UAAKA,EAAEo0B,KAAO5rB,EAAM2rB,mBAEhBv0B,EAuEd,SACE4I,EACAf,EACAC,EACA6wC,UAEO9wC,EAAYU,WACfe,GAAaV,EAAOd,GACpBkB,GAAWJ,EAAOf,EAAaC,EAAe6wC,GA/ElCjmC,CAAK9J,EAAOf,EAAaC,EAAgB6wC,GAC7C3xC,EAiFd,SACE4B,EACAf,EACAC,EACA6wC,UAEO9wC,EAAYU,WACfS,GAAWJ,EAAOf,EAAaC,EAAe6wC,GAC9CrvC,GAAaV,EAAOd,GAzFR8K,CAAKhK,EAAOf,EAAaC,EAAgB6wC,GAGpC,iBAAN34C,GACM,iBAANgH,GACPG,OAAOC,MAAMJ,IACbG,OAAOC,MAAMpH,IAKfo6C,EAAY93C,KAAK,CACftC,EAAAA,EACAgH,EAAAA,EACA4B,MAAAA,UAkBRuxC,EAbiBpD,GAAS14C,KACxB+7C,GACA,SAAAh6C,UAAK2C,KAAKjC,IAAIV,EAAEJ,EAAG,MACnB,SAAAI,UAAK2C,KAAKjC,IAAIV,EAAE4G,EAAG,MAGIwwC,QAAQ,CAC/B,EACA,EACApvC,EAAeiB,MACfjB,EAAeqB,SAGE4wC,eAEnBF,EAAWl9C,MAAMoB,KAAK87C,GAGpBp0C,6BAEI6zC,aAAc,kBAAMtB,EAAY,OAChC9xC,MAAO,CACLiC,UAAW1B,EAAUqB,EAAerI,KAAMqI,EAAeM,OAI5DyxC,EAASj4C,KAAI,SAACsrC,EAAQzwC,OACfiE,EAAQwsC,EAAOxsC,MACf4H,EAAQwxC,EAAYp5C,GAAO4H,MAC3BqD,EAAOiuC,GAAe1M,SAAkBzsC,SAE5CgF,gCAEIjH,IAAK/B,EACLqD,EAAG6L,EACHuyB,UAAW,iBACXyb,aAAc,kBAAM3B,EAAY1vC,IAChCpC,MAAO,CACLI,KAAMo0B,IAAaC,KAAO,YAAc,kBACxCrxB,YAAa,EACblD,OAAQs0B,IAAaC,KAAO,QAAU,QACtC3oB,QAAS0oB,IAAaod,YAAc,EAAI,SAgCxD,SAASpvC,GACPJ,EACAf,EACAC,EACA6wC,WAEIjuC,WAAU7C,EAAYwC,MAAMzB,EAAM+B,iBAAiBhL,IAEnDg5C,GAA0C,QAA9B7wC,EAAcuJ,cACvBvJ,EAAcsC,QAIjBM,GAAWZ,EAAsBlB,EAAOf,GAAe,GAHvD6C,YAAW7C,EAAYyC,gBAAiB1B,EAAMgC,gBAAgBjL,IAC9D+K,GAAWvB,EAAiBP,EAAOf,EAAaC,GAAiB,WAM9D4C,EAGT,SAASpB,GACPV,EACAd,sBAEIA,EAAcsC,iBACTtC,EAAcuC,wBAAMzB,EAAMiC,kBAANyvC,EAAkB,MAAM36C,QAAQA,aAGtDmI,EAAcuC,MAAMzB,EAAMoC,mBAAmBrL,2CCzahD46C,GAAqB,CACzB,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAkKF,SAASC,cACPjnB,IAAAA,QACAlqB,IAAAA,MACAI,IAAAA,WAMK8pB,EAAQ1rB,kBACL,IAAIwH,MAAM,iCAGbkkB,EAAQ6R,cAActoC,aACnB,IAAIuS,MAAM,8CAGZorC,EAAqB10C,UAAMy1B,SAAQ,eACjCkf,EAAaC,GAAqBpnB,EAAQ1rB,YAAa0rB,EAAQ5mB,gBAM5DqnB,SAAU,UALC4mB,GAClBrnB,EAAQ1rB,YACR6yC,MAID,CAACnnB,EAAQ5mB,KAAM4mB,EAAQ1rB,cAEpBgzC,EAAuB90C,UAAMy1B,SAAQ,kBAClCjI,EAAQ6R,cAAcljC,KAC3B,SAAC4F,EAAe/K,OAGRu5B,EAAcskB,GAAyB9yC,EAF1B6yC,GAAqB7yC,EAAeyrB,EAAQ5mB,cAI1D2pB,EAAYjlB,cACsB,SAAjCopC,EAAmBvmB,UACrBoC,EAAYjlB,YAAc,MACjBilB,EAAYlsB,UACrBksB,EAAYjlB,YAAc,cAKG,IAAxBilB,EAAYlsB,SACnBksB,EAAYjlB,aACZ,CAAC,QAAQ24B,SAAS1T,EAAYjlB,eAE9BilB,EAAYlsB,SAAU,MAItB4pB,SAAWj3B,EAAa,QAAT,QACZu5B,QAIR,CAAC/C,EAAQ5mB,KAAM4mB,EAAQ6R,cAAeqV,IAGnCK,EAAiB/0C,UAAMy1B,SAAQ,mBAC7Bsf,EPrQH,SACLvnB,iCAAAA,IAAAA,EAA4C,KAE5B,IAAZA,EACFA,EAAU,CAAE/gB,MAAM,IACG,IAAZ+gB,IACTA,EAAU,CAAE/gB,MAAM,OAIlBA,MAAM,GACH+gB,GACH7f,eAAO6f,EAAQ7f,SAAS,OACxBqnC,uBAAexnB,EAAQwnB,iBAAiB,CACtC,QACA,WACA,cACA,OACA,UACA,aACA,MACA,UAEFjnC,iBAASyf,EAAQzf,WAAW,EAC5BknC,sBAAcznB,EAAQynB,gBAAgB,EAEtC5N,gBAAQ7Z,EAAQ6Z,UAAU/C,KO2OH4Q,UAAe1nB,UAAA2nB,EAASnlB,gBAC/C+kB,EAAejP,sBACbiP,EAAejP,gBAEmB,YAA5BtY,EAAQ8kB,gBACH,SAEF,UAGJyC,IACN,CAACvnB,EAAQ8kB,yBAAiB9kB,UAAA4nB,EAASplB,UAEtCxC,OACKA,GACHwC,QAAS+kB,QAKL3V,EAASp/B,UAAMC,OAAsB,MACrCg1B,EAAap1B,OAAkB2tB,GAASwC,QAAS+kB,KAEjD1f,EAAsBr1B,UAAM80B,SAAyB,CACzD96B,KAAM,GACNS,MAAO,GACPkI,IAAK,GACL4uB,OAAQ,KAGH+D,EAAkBD,KAEnB2c,EAAqBhyC,UAAM80B,UAAkB,GAC5Cod,EAAiBF,KAElB5vC,EAAoBpC,UAAM80B,SAA+B,MACxDxyB,EAAgBF,KAIjBC,EAAiBrC,UAAMy1B,SAAQ,uBAC7B1nB,EAEyB,iBAApByf,EAAQzf,iBACXyf,EAAQzf,QAAQ/T,QAvQL,EAwQXwzB,EAAQzf,QAJVA,EAMyB,iBAApByf,EAAQzf,iBACXyf,EAAQzf,QAAQtT,SA3QL,EA4QX+yB,EAAQzf,QARVA,EAUyB,iBAApByf,EAAQzf,iBACXyf,EAAQzf,QAAQwjB,UA/QL,EAgRX/D,EAAQzf,QAZVA,EAcyB,iBAApByf,EAAQzf,iBACXyf,EAAQzf,QAAQpL,OAnRL,EAoRX6qB,EAAQzf,QAGV/T,EACJ+T,EACA/Q,KAAKjC,IACH6E,EAAI5H,OAAO4C,OAAO06B,EAAet7B,OAAO,SAAAK,UAAKA,EAAEiJ,SAC/C1D,EAAI5H,OAAO4C,OAAO06B,EAAe3yB,MAAM,SAAAtI,UAAKA,EAAEs8B,eAC9C/2B,EAAI5H,OAAO4C,OAAO06B,EAAe/D,SAAS,SAAAl3B,UAAKA,EAAEs8B,gBAG/Ch0B,EACJoL,EACA/Q,KAAKjC,IACH6E,EAAI5H,OAAO4C,OAAO06B,EAAe3yB,MAAM,SAAAtI,UAAKA,EAAEqJ,UAC9C9D,EAAI5H,OAAO4C,OAAO06B,EAAet7B,OAAO,SAAAK,UAAKA,EAAEo8B,cAC/C72B,EAAI5H,OAAO4C,OAAO06B,EAAe76B,QAAQ,SAAAJ,UAAKA,EAAEo8B,eAG9Ch8B,EACJsT,EACA/Q,KAAKjC,IACH6E,EAAI5H,OAAO4C,OAAO06B,EAAe76B,QAAQ,SAAAJ,UAAKA,EAAEiJ,SAChD1D,EAAI5H,OAAO4C,OAAO06B,EAAe3yB,MAAM,SAAAtI,UAAKA,EAAEu8B,gBAC9Ch3B,EAAI5H,OAAO4C,OAAO06B,EAAe/D,SAAS,SAAAl3B,UAAKA,EAAEu8B,iBAG/CrF,EACJxjB,EACA/Q,KAAKjC,IACH6E,EAAI5H,OAAO4C,OAAO06B,EAAe/D,SAAS,SAAAl3B,UAAKA,EAAEqJ,UACjD9D,EAAI5H,OAAO4C,OAAO06B,EAAet7B,OAAO,SAAAK,UAAKA,EAAEq8B,iBAC/C92B,EAAI5H,OAAO4C,OAAO06B,EAAe76B,QAAQ,SAAAJ,UAAKA,EAAEq8B,wBAM7C,CAAE18B,KAAAA,EAAM2I,IAAAA,EAAKlI,MAAAA,EAAO82B,OAAAA,EAAQjuB,MAHjBtG,KAAKjC,IAAI,EAAGuI,EAAQtJ,EAAOS,GAGQiJ,OAFlC1G,KAAKjC,IAAI,EAAG2I,EAASf,EAAM4uB,MAG7C,CACD/D,EAAQzf,QACRunB,EAAet7B,KACfs7B,EAAe3yB,IACf2yB,EAAe/D,OACf+D,EAAe76B,MACf6I,EACAI,IAGIzB,EAASjC,UAAMy1B,SAAQ,mBACrBxzB,EAA2B,GAE3BozC,EAA0C,GAG1CxwC,EAAc,EAClBA,EAAc2oB,EAAQ5mB,KAAK7P,OAC3B8N,IACA,WACMywC,EAAiB9nB,EAAQ5mB,KAAK/B,GAC9B0wC,WAAWD,EAAe7mB,MAAM5pB,EAAc,GAC9CkhC,WAAcuP,EAAepf,oBAAmBrxB,EAAc,GAC9D2pB,EAAkB8mB,EAAe9mB,gBACjCgnB,EAAiBF,EAAe1uC,KAChChE,EAAS,GAEfyyC,KAAmB7mB,YACjB6mB,KAAmB7mB,MAAsB,MACrCinB,EAAqBJ,KAAmB7mB,GAE9C6mB,KAAmB7mB,SAGjB,IAAIknB,EAAa,EACjBA,EAAaF,EAAez+C,OAC5B2+C,IACA,KACM9mB,EAAgB4mB,EAAeE,GACrC9yC,EAAO8yC,GAAc,CACnBJ,eAAAA,EACAzwC,YAAAA,EACA4wC,mBAAAA,EACAF,SAAAA,EACAxP,YAAAA,EACAvX,gBAAAA,EACAvzB,MAAOy6C,EACP9mB,cAAAA,GAIJ3sB,EAAO4C,GAAe,CACpBywC,eAAAA,EACAr6C,MAAO4J,EACP4pB,GAAI8mB,EACJrf,MAAO6P,EACPvT,aAAcijB,EACdjnB,gBAAAA,EACA5rB,OAAAA,UAIGX,IACN,CAACurB,EAAQ5mB,OAER2mB,EAAYvtB,UAAMy1B,SAAQ,kBACrBxzB,EAAO9F,KAAI,SAAA2C,UAAKA,EAAE8D,UAAQyuB,KAAK,KACrC,CAACpvB,IAEEH,EAAc9B,UAAMy1B,SAAQ,kBACzBrI,IACL,EACAsnB,EACAzyC,EACAsrB,EACAlrB,EACAiB,EACAI,KAED,CAAC6pB,EAAWlrB,EAAgBqB,EAAQgxC,EAAoBzyC,EAAQqB,IAE7D+7B,EAAgBr/B,UAAMy1B,SAAQ,kBAC3Bqf,EAAqB34C,KAAI,SAAA4F,UACvBqrB,IACL,EACArrB,EACAE,EACAsrB,EACAlrB,EACAiB,EACAI,QAGH,CAAC6pB,EAAWlrB,EAAgBqB,EAAQoxC,EAAsB7yC,EAAQqB,MAEZtD,UAAMy1B,SAAQ,eAChEyc,QACI,CAAC,IAAI/2C,IAAO,IAAIA,SAGnBu3C,EAA2B,IAAIv3C,IAC/Bw6C,EAAuB,IAAIx6C,IAE3By6C,EAAsBvW,EAAcnzB,OACxC,SAAA7R,SAAuB,QAAlBA,EAAEiR,cAA0BjR,EAAEgK,WAGjCwxC,EAAwB,SAAChzC,MACvB+yC,EAAqB,KACjB7zC,EAAgBs9B,EAAc/M,MAClC,SAAAj4B,UAAKA,EAAEo0B,KAAO5rB,EAAM2rB,sBAGY,QAA9BzsB,EAAcuJ,cAA0BvJ,EAAcsC,eACjDpB,EAAWJ,EAAOf,EAAaC,UAInCc,EAAM+B,cAGXkxC,EAAoB,SAACjzC,YACpBgzC,EAAsBhzC,IACvBkzC,EAAgB,SAAClzC,YAA4BA,EAAM+B,oBAEvB,YAA5B4oB,EAAQ8kB,kBACVwD,EAAoB,SAAAjzC,UACfgzC,EAAsBhzC,OAAUA,EAAMoC,iBAGT,WAAhC8vC,EAAejP,aACjBiQ,EAAgB,SAAAlzC,UAAYA,EAAM+B,iBAAgB/B,EAAMoC,gBACf,cAAhC8vC,EAAejP,aACxBiQ,EAAgB,SAAAlzC,YAAYA,EAAMoC,gBACO,WAAhC8vC,EAAejP,eACxBiQ,EAAgB,SAAAlzC,YAAYA,EAAMgC,cAGpC0oB,EAAU0I,SAAQ,SAAApzB,OACVmzC,EAAkBF,EAA+BjzC,GACjDozC,EAAcF,EAA2BlzC,GAE1C6vC,EAAyB72C,IAAIm6C,IAChCtD,EAAyBj3C,IAAIu6C,EAAgB,IAG1CL,EAAqB95C,IAAIo6C,IAC5BN,EAAqBl6C,IAAIw6C,EAAY,IAGvCvD,EAAyBh3C,IAAIs6C,GAAiBz5C,KAAKsG,GACnD8yC,EAAqBj6C,IAAIu6C,GAAa15C,KAAKsG,MAG7C6vC,EAAyBzc,SAAQ,SAACv9B,EAAOK,GACvC25C,EAAyBj3C,IACvB1C,EACAm9C,GAAwBx9C,EAAO2mC,OAInCsW,EAAqB1f,SAAQ,SAACv9B,EAAOK,GACnC48C,EAAqBl6C,IACnB1C,EACAm9C,GAAwBx9C,EAAO2mC,OAInC9R,EAAU0I,SAAQ,SAAApzB,OACVmzC,EAAkBF,EAA+BjzC,GACjDozC,EAAcF,EAA2BlzC,GAC/CA,EAAMszC,iBAAmBzD,EAAyBh3C,IAAIs6C,GACtDnzC,EAAM+hC,aAAe+Q,EAAqBj6C,IAAIu6C,MAGzC,CAACvD,EAA0BiD,KACjC,CACDzD,EACA3kB,EACAC,EAAQ8kB,gBACRxwC,EACAu9B,EACA0V,EAAejP,eAvFV4M,OAA0BiD,OA0F3BzzC,EAAuBlC,UAAM41B,aACjC,SAAC3zB,EAAwBK,aACjBmf,EAAO,CACX7gB,MACEq0B,IAAamhB,cACXn0C,EAAOhH,MAAQg6B,IAAamhB,cAAcr/C,SAI1Cs/C,ElG9iBL,SACLp0C,EACAK,gBAEIA,SAAAA,EAAcizC,YAAatzC,EAAOwsB,GAC7B,UAGF,OkGsiBY6nB,CAAgBr0C,EAAQK,GACjCi0C,uBAAethB,KAAauhB,uBAAbC,SAA8Bx0C,EAAQo0C,MAAW,UACtEp0C,EAAOxB,MAAQD,EAAkB+1C,EAAc90B,GACxCxf,EAAOxB,QAEhB,CAACw0B,IAGG9yB,EAAsBnC,UAAM41B,aAChC,SAAC/yB,EAAsBP,eACfmf,gBACDxf,EAAOY,EAAMgC,qBAAb6xC,EAA2Bj2C,OAC9BG,MACEq0B,IAAamhB,cACXvzC,EAAMgC,YAAcowB,IAAamhB,cAAcr/C,UAI/Cs/C,ElGrjBL,SACLxzC,EACAP,gBAEIO,IAAUP,EACL,mBAIPO,EAAM+hC,eAAN+R,EAAoBxf,MAAK,SAAAyf,GACvBA,EAAWrB,kBAAajzC,SAAAA,EAAcizC,YACpCqB,EAAW37C,YAAUqH,GAAAA,EAAcrH,UAGhC,eAGF,OkGoiBY47C,CAAeh0C,EAAwBP,GAChDi0C,uBACJthB,KAAawP,sBAAbqS,SAA6Bj0C,EAAwBwzC,MAAW,UAElExzC,EAAMpC,MAAQD,EAAkB+1C,EAAc90B,GAEvC5e,EAAMpC,QAEf,CAACw0B,EAAYhzB,IAIX80C,EAAgB/2C,UAAMy1B,SAAQ,eAC1BuhB,EAAiB,UAAI/0C,GAAQ1E,iBAE5B03B,IAAagiB,eAAeD,KAClC,CAAC/hB,EAAYhzB,IAEhBq1B,GAA0B,WAEtB8H,EAAOj/B,SACPi/B,EAAOj/B,QAAQ+2C,gBACd9X,EAAOj/B,QAAQ+2C,cAAcz2C,MAAMwtB,WAEpCmR,EAAOj/B,QAAQ+2C,cAAcz2C,MAAMwtB,SAAW,mBAI5CkpB,EAA0C,CAC9CliB,WAAAA,EACA5yB,eAAAA,EACAP,YAAAA,EACAu9B,cAAAA,EACAp9B,OAAAA,EACA80C,cAAAA,EACArE,yBAAAA,EACAiD,qBAAAA,EACAryC,MAAAA,EACAI,OAAAA,EACAxB,qBAAAA,EACAC,oBAAAA,EACAkzB,oBAAAA,EACAjzB,kBAAAA,EACAg9B,OAAAA,EACA4S,mBAAAA,GAGIoF,EAAiBp3C,UAAMy1B,SAC3B,kBACE/4B,EACER,EAAO66C,GAAe,SAAA18C,UAAKA,EAAEm0B,oBAC7B,gBAAEz1B,cAASsmC,EAAcyF,WAAU,SAAA1/B,UAAQA,EAAKqpB,KAAO11B,UAE3D,CAACg+C,EAAe1X,IAIdgY,EAAgB,iBAAO,CACzBv1C,YAAAA,EACAu9B,cAAAA,EACA+X,eAAAA,IAGEE,EAAwBt3C,UAAM41B,aAChC,iBAAO,CACL9zB,YAAAA,EACAu9B,cAAAA,EACA+X,eAAAA,KAEF,CAACt1C,EAAau9B,EAAe+X,IAG3B5pB,EAAQ+pB,gBACVF,EAAgBC,OAGZE,EAAWx3C,UAAMy1B,SAAQ,iBAC0B4hB,IAA/Cv1C,IAAAA,YAAau9B,IAAAA,uBAAe+X,eACdj7C,KAAI,gBAAEs7C,OAAQx1C,OAC5BF,EAAgBs9B,EAAc/M,MAAK,SAAAj4B,UAAKA,EAAEo0B,KAAOgpB,SAElD11C,SACI,SAGDuJ,EAAgBvJ,EAAhBuJ,YACFosC,EAAa,cAEC,SAAhBpsC,GACgB,WAAhBA,GACgB,SAAhBA,SAEOF,MAEW,QAAhBE,SACKqsC,QAEH,IAAIruC,MAAM,uBAXC,UAcfxH,EAAYysB,WAAaxsB,EAAcwsB,UAClC,KAIPvuB,wBAAC03C,GACC3+C,UAAK0+C,EAAAA,EAAU,cACf31C,YAAaA,EACbC,cAAeA,EACfE,OAAQA,SAIb,CAACo1C,WAGFr3C,wBAACwB,GAAqB9I,MAAOmH,EAAas3C,IACxCn3C,mCACEA,+BACED,IAAKq/B,EACL3+B,MAAO,CACL6C,MAAAA,EACAI,OAAAA,EACAk0C,SAAUpqB,EAAQqqB,MAAQ,SAAW,WAEvCC,QAAS,SAAAx3B,gBAAKkN,EAAQ4kB,oBAAR5kB,EAAQ4kB,aAAe9vC,EAAcge,IACnD4zB,aAAc,WACZlC,EAAmB,IAAG,IAExB6B,aAAc,WACZ7B,EAAmB,IAAG,KAGxBhyC,6BAAGy4B,UAAU,QACV,CAAC32B,UAAgBu9B,GAAeljC,KAAI,SAAAiJ,UACnCpF,wBAAC+3C,MAAWh/C,IAAK,CAACqM,EAAK6oB,SAAU7oB,EAAKqpB,IAAIhT,KAAK,KAASrW,QAG5DpF,6BACEy4B,UAAU,SACVh4B,MAAO,CACLi4B,cAAe,SAGhB8e,GAEHx3C,wBAACgtC,wBACAxf,EAAQwqB,iBAARxqB,EAAQwqB,eAAiB,MAE5Bh4C,wBAAC4+B,SACD5+B,wBAACwmC,WAMT,SAASoO,GACPpnB,EACA5mB,OAEIqxC,SAEJrxC,EAAKuwB,MAAK,SAAAhF,UACDA,EAAMvrB,KAAKuwB,MAAK,SAAAvI,OACfl2B,EAAQ80B,EAAQmB,SAASC,MAC3Bl2B,MAAAA,SACFu/C,EAAoBv/C,GACb,QAKNu/C,EAGT,SAASpD,GACPrnB,EACAmnB,OAEIxmB,EAAYX,EAAQW,cAEnBX,EAAQW,aACe,iBAAfwmB,EACTxmB,EAAY,cACP,GAA8C,yBAAlCwmB,SAAAA,EAAqBvwB,UACtC+J,EAAY,WACP,CAAA,GACiB,iBAAfwmB,GACe,kBAAfA,QAID,IAAIrrC,MAAM,sDAFhB6kB,EAAY,mBAMJX,GAASW,UAAAA,IAGvB,SAAS+nB,GACPtzC,EACAy8B,SAEO,UAAIz8B,GAAQlG,MAAK,SAAChD,EAAGC,eACpBm5C,EAAQzT,EAAc/M,MAAK,SAAAj4B,UAAKA,EAAEo0B,KAAO/0B,EAAE80B,mBAC3CukB,EAAQ1T,EAAc/M,MAAK,SAAAj4B,UAAKA,EAAEo0B,KAAO90B,EAAE60B,yCAG/CskB,SAAAA,EAAOxuC,MAAMwuC,EAAMzuC,iBAAU3K,EAAEoL,kBAAFozC,EAAc,GAAKx+C,EAAEuL,mBAAmBrL,qBAGrEm5C,SAAAA,EAAOzuC,MAAMyuC,EAAM1uC,iBAAU1K,EAAEmL,kBAAFqzC,EAAc,GAAKx+C,EAAEsL,mBAAmBrL,gBA3sBpE,gBACI0zB,IAATE,QACAiL,IAAAA,cACAh4B,MAAAA,aAAQ,KACL23C,UAEG5qB,EA3BR,SACEA,yCAGKA,GACH6qB,sBAAc7qB,EAAQ6qB,gBAAgB,IACtCC,uBAAe9qB,EAAQ8qB,iBAAiB,IACxCrB,wBACEzpB,EAAQypB,kBAAmB,SAACh1C,UAA6BA,GAC3DqwC,yBAAiB9kB,EAAQ8kB,mBAAmB,UAC5CD,qBAAa7kB,EAAQ6kB,gBACrB+D,uBAAe5oB,EAAQ4oB,iBAAiB5B,GACxC+D,iCAAyB/qB,EAAQ+qB,4BACjCC,wCACEhrB,EAAQgrB,kCAAkC,SAC5C1Z,uBAAetR,EAAQsR,kBACvBE,yBAAiBxR,EAAQwR,oBACzBjxB,iBAASyf,EAAQzf,WAnBE,IA6BL0qC,CAAoBnrB,KAElCttB,UAAM80B,SAAgC,MADjC4jB,OAAcC,OAGfC,QAAcF,SAAAA,EAAcxB,cAE5B2B,EAA0B74C,UAAMy1B,SAAQ,kBAChC,SAANuE,EAAOr2B,OACNA,SACI,SAGHm1C,EAAcn1C,EAAGuzC,kBAElB4B,SACI,QAGLA,EAAYC,aAAeD,EAAYE,aAAc,KAC/CpB,EAAax3C,OAAO64C,iBAAiBH,GAArClB,YAEJA,EAAS3T,SAAS,WAAa2T,EAAS3T,SAAS,eAC5C6U,SAIJ9e,EAAI8e,GAGN9e,CAAI4e,KACV,CAACA,MAEiC54C,UAAM80B,SAAS,CAClDxxB,MAAOkqB,EAAQ6qB,aACf30C,OAAQ8pB,EAAQ8qB,uBAFTh1C,IAAAA,MAAOI,IAAAA,OAAUw1C,OAK1B5hB,GAA0B,cACpBshB,EAAa,KACTO,EAAW/4C,OAAO64C,iBAAiBL,GAEpC,CAAC,WAAY,WAAY,SAAS3U,SAASkV,EAASlrB,YACvD2qB,EAAYn4C,MAAMwtB,SAAW,eAGhC,CAAC2qB,IAEJ54C,UAAMM,WAAU,cACTs4C,OAICje,EAAW,IAAIye,gBAAe,eAC5BzuC,QAAOiuC,SAAAA,EAAahkB,wBACpBykB,EAASj5C,OAAO64C,iBAAiBL,GAEnCjuC,GACFuuC,EAAQ,CACN51C,MACEqH,EAAKrH,MACLyV,SAASsgC,EAAOC,iBAChBvgC,SAASsgC,EAAOE,kBAClB71C,OACEiH,EAAKjH,OACLqV,SAASsgC,EAAOG,gBAChBzgC,SAASsgC,EAAOI,+BAKxB9e,EAASC,QAAQge,GAEV,WACLje,EAASK,UAAU4d,OAEpB,CAACA,UAEwC54C,UAAM80B,UAAS,GAApD4kB,OAAgBC,cAEvB35C,UAAMM,WAAU,cACTs4C,GAAgBprB,EAAQ+qB,6BAEzB5d,EAAW,IAAIif,sBACjB,SAAAx+C,iBACoBA,kBAAS,SACfs+C,eACRC,GAAkB,GAElBA,GAAkB,MAIxB,CACEE,KAAMhB,EACNiB,WAAYtsB,EAAQgrB,wCAIxB7d,EAASC,QAAQge,GAEV,WACLje,EAASK,UAAU4d,OAEpB,CACDA,EACAC,EACArrB,EAAQgrB,+BACRhrB,EAAQ+qB,0BAIRv4C,iCACED,IAAK44C,GACDP,GACJ3f,yBAAyBA,GAAa,IACtCh4B,SACEghC,WAAY,cACThhC,GACHwtB,SAAU,WACV3qB,MAAAA,EACAI,OAAAA,MAGDg2C,EACC15C,wBAACy0C,IAAWjnB,QAASA,EAAelqB,MAAAA,EAAOI,OAAAA,IACzC"}